---
title: 实现并发调度器
---

根据输出实现

```js
function sleep(ms) {
  return new Promise((resolve) => {
    setTimeout(() => {
      resolve();
    }, ms);
  });
}

// 创建一个并发量上限为 2 的调度器
const scheduler = new Scheduler(2);

scheduler
  .addTask(() => {
    return sleep(1000).then(() => 1);
  })
  .then((res) => {
    // 预期结果为 1
    // 第 1 秒输出结果
    console.log(res);
  });

scheduler
  .addTask(() => {
    return sleep(3000).then(() => 2);
  })
  .then((res) => {
    // 预期结果为 2
    // 第 3 秒输出结果
    console.log(res);
  });

scheduler
  .addTask(() => {
    return sleep(2000).then(() => 3);
  })
  .then((res) => {
    // 预期结果为 3
    // 第 2 秒输出结果
    console.log(res);
  });
```

## 实现

```js
class Scheduler {
  
}
```
