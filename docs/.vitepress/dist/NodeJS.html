<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>node 开发技能图解 | 学习资料</title>
    <meta name="description" content="前端学习资料">
    <link rel="stylesheet" href="/assets/style.8f2abc50.css">
    <link rel="modulepreload" href="/assets/app.05d66233.js">
    <link rel="modulepreload" href="/assets/NodeJS.md.2580d526.lean.js">
    
    <script>(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-1f0de3d3><!--[--><span tabindex="-1" data-v-34c8042a></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-34c8042a> Skip to content </a><!--]--><!----><header class="VPNav no-sidebar" data-v-1f0de3d3 data-v-3c105d26><div class="VPNavBar" data-v-3c105d26 data-v-3a092df6><div class="container" data-v-3a092df6><div class="VPNavBarTitle" data-v-3a092df6 data-v-201d92c1><a class="title" href="/" data-v-201d92c1><!----><!--[-->学习资料<!--]--></a></div><div class="content" data-v-3a092df6><!----><!----><!----><div class="VPNavBarAppearance appearance" data-v-3a092df6 data-v-678c18ed><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-678c18ed data-v-28fad8f5 data-v-1d734b82><span class="check" data-v-1d734b82><span class="icon" data-v-1d734b82><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-28fad8f5><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-28fad8f5><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-3a092df6 data-v-0417331a data-v-2f6d1336><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-2f6d1336><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-2f6d1336><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-2f6d1336><div class="VPMenu" data-v-2f6d1336 data-v-887a9eee><!----><!--[--><!--[--><!----><div class="group" data-v-0417331a><div class="item appearance" data-v-0417331a><p class="label" data-v-0417331a>Appearance</p><div class="appearance-action" data-v-0417331a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-0417331a data-v-28fad8f5 data-v-1d734b82><span class="check" data-v-1d734b82><span class="icon" data-v-1d734b82><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-28fad8f5><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-28fad8f5><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-3a092df6 data-v-4ca74ee1><span class="container" data-v-4ca74ee1><span class="top" data-v-4ca74ee1></span><span class="middle" data-v-4ca74ee1></span><span class="bottom" data-v-4ca74ee1></span></span></button></div></div></div><!----></header><!----><!----><div class="VPContent" id="VPContent" data-v-1f0de3d3 data-v-41e36057><div class="VPDoc" data-v-41e36057 data-v-aee5ac82><div class="container" data-v-aee5ac82><div class="aside" data-v-aee5ac82><div class="aside-curtain" data-v-aee5ac82></div><div class="aside-container" data-v-aee5ac82><div class="aside-content" data-v-aee5ac82><div class="VPDocAside" data-v-aee5ac82 data-v-977dc09a><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-977dc09a data-v-0b47d634><div class="content" data-v-0b47d634><div class="outline-marker" data-v-0b47d634></div><div class="outline-title" data-v-0b47d634>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-0b47d634><span class="visually-hidden" id="doc-outline-aria-label" data-v-0b47d634> Table of Contents for current page </span><ul class="root" data-v-0b47d634><!--[--><li style="" data-v-0b47d634><a class="outline-link" href="#node-开发技能图解" data-v-0b47d634>node 开发技能图解</a><!----></li><li style="" data-v-0b47d634><a class="outline-link" href="#node-核心内置类库-事件，流，文件，网络等" data-v-0b47d634>node 核心内置类库(事件，流，文件，网络等)</a><!----></li><li style="" data-v-0b47d634><a class="outline-link" href="#node-高级话题-异步，部署，性能调优，异常调试等" data-v-0b47d634>node 高级话题(异步，部署，性能调优，异常调试等)</a><!----></li><li style="" data-v-0b47d634><a class="outline-link" href="#常用知名第三方类库-async-express-等" data-v-0b47d634>常用知名第三方类库(Async, Express 等)</a><!----></li><li style="" data-v-0b47d634><a class="outline-link" href="#其它相关后端常用技术-mongodb-redis-apache-nginx-等" data-v-0b47d634>其它相关后端常用技术(MongoDB, Redis, Apache, Nginx 等)</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-977dc09a></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-aee5ac82><div class="content-container" data-v-aee5ac82><!--[--><!--]--><main class="main" data-v-aee5ac82><div style="position:relative;" class="vp-doc _NodeJS" data-v-aee5ac82><div><h2 id="node-开发技能图解" tabindex="-1">node 开发技能图解 <a class="header-anchor" href="#node-开发技能图解" aria-hidden="true">#</a></h2><p><img src="https://cdn.nlark.com/yuque/0/2022/png/732231/1648822020350-1c40d225-4272-49e7-9628-48dbe6d41feb.png#clientId=u19301b7d-b721-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=437&amp;id=ud086bfcc&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=546&amp;originWidth=1049&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=313588&amp;status=done&amp;style=none&amp;taskId=u99345354-b657-48ec-ad17-df35b991056&amp;title=&amp;width=839.2" alt="image.png"></p><h1 id="node-事件循环机制" tabindex="-1">node 事件循环机制 <a class="header-anchor" href="#node-事件循环机制" aria-hidden="true">#</a></h1><p><img src="https://cdn.nlark.com/yuque/0/2022/png/732231/1648822012407-0511752c-3b08-476e-ad62-6a6a6907ec0a.png#clientId=u19301b7d-b721-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=437&amp;id=u2b08e9be&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=546&amp;originWidth=1049&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=462020&amp;status=done&amp;style=none&amp;taskId=ub06d607f-ed47-4bba-9d63-ed0fca7ba15&amp;title=&amp;width=839.2" alt="image.png"></p><h2 id="node-核心内置类库-事件，流，文件，网络等" tabindex="-1">node 核心内置类库(事件，流，文件，网络等) <a class="header-anchor" href="#node-核心内置类库-事件，流，文件，网络等" aria-hidden="true">#</a></h2><h3 id="node-概览" tabindex="-1">node 概览 <a class="header-anchor" href="#node-概览" aria-hidden="true">#</a></h3><h4 id="什么要用-node" tabindex="-1">什么要用 node <a class="header-anchor" href="#什么要用-node" aria-hidden="true">#</a></h4><p>总结起来 node 有以下几个特点:简单强大，轻量可扩展．简单体现在 node 使用的是 javascript,json 来进行编码，人人都会；强大体现在非阻塞 IO,可以适应分块传输数据，较慢的网络环境，尤其擅长高并发访问；轻量体现在 node 本身既是代码，又是服务器，前后端使用统一语言;可扩展体现在可以轻松应对多实例，多服务器架构，同时有海量的第三方应用组件．</p><h4 id="node-的构架是什么样子的" tabindex="-1">node 的构架是什么样子的? <a class="header-anchor" href="#node-的构架是什么样子的" aria-hidden="true">#</a></h4><p>主要分为三层，应用 app &gt;&gt; V8 及 node 内置架构 &gt;&gt; 操作系统. V8 是 node 运行的环境，可以理解为 node 虚拟机．node 内置架构又可分为三层: 核心模块(javascript 实现) &gt;&gt; c++绑定 &gt;&gt; libuv + CAes + http.</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/732231/1648822037118-d6faf5a1-6bab-44a3-aaa6-934357b06909.png#clientId=u19301b7d-b721-4&amp;crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;from=paste&amp;height=690&amp;id=u54ad5a7e&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=862&amp;originWidth=1385&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;size=85083&amp;status=done&amp;style=none&amp;taskId=u5a27d80c-21ce-4477-a85c-7554c10f732&amp;title=&amp;width=1108" alt="image.png"></p><h4 id="node-有哪些核心模块" tabindex="-1">node 有哪些核心模块? <a class="header-anchor" href="#node-有哪些核心模块" aria-hidden="true">#</a></h4><p>EventEmitter, Stream, FS, Net 和 全局对象</p><h3 id="node-全局对象" tabindex="-1">node 全局对象 <a class="header-anchor" href="#node-全局对象" aria-hidden="true">#</a></h3><h4 id="node-有哪些全局对象" tabindex="-1">node 有哪些全局对象? <a class="header-anchor" href="#node-有哪些全局对象" aria-hidden="true">#</a></h4><p>process, console, Buffer</p><h4 id="process-有哪些常用方法" tabindex="-1">process 有哪些常用方法? <a class="header-anchor" href="#process-有哪些常用方法" aria-hidden="true">#</a></h4><p>process.stdin, process.stdout, process.stderr, process.on, process.<wbr>env, process.argv, process.arch, process.platform, process.exit</p><h4 id="console-有哪些常用方法" tabindex="-1">console 有哪些常用方法? <a class="header-anchor" href="#console-有哪些常用方法" aria-hidden="true">#</a></h4><p>console.log/console.info, console.error/console.warning, console.time/console.timeEnd, console.trace, console.table</p><h4 id="node-有哪些定时功能" tabindex="-1">node 有哪些定时功能 <a class="header-anchor" href="#node-有哪些定时功能" aria-hidden="true">#</a></h4><p>setTimeout/clearTimeout, setInterval/clearInterval, setImmediate/clearImmediate, process.nextTick</p><h4 id="node-中的-buffer-如何应用" tabindex="-1">node 中的 Buffer 如何应用 <a class="header-anchor" href="#node-中的-buffer-如何应用" aria-hidden="true">#</a></h4><p>Buffer 是用来处理二进制数据的，比如图片，mp3,数据库文件等.Buffer 支持各种编码解码，二进制字符串互转．</p><h3 id="eventemitter" tabindex="-1">EventEmitter <a class="header-anchor" href="#eventemitter" aria-hidden="true">#</a></h3><h4 id="什么是-eventemitter" tabindex="-1">什么是 EventEmitter <a class="header-anchor" href="#什么是-eventemitter" aria-hidden="true">#</a></h4><p>EventEmitter 是 node 中一个实现观察者模式的类，主要功能是监听和发射消息，用于处理多模块交互问题.</p><h4 id="如何实现一个-eventemitter" tabindex="-1">如何实现一个 EventEmitter <a class="header-anchor" href="#如何实现一个-eventemitter" aria-hidden="true">#</a></h4><p>主要分三步：定义一个子类，调用构造函数，继承 EventEmitter</p><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> util </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">util</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> EventEmitter </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">events</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">EventEmitter</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MyEmitter</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">EventEmitter</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 构造函数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">util</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">inherits</span><span style="color:#A6ACCD;">(MyEmitter</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> EventEmitter) </span><span style="color:#676E95;font-style:italic;">// 继承</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> em </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MyEmitter</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">em</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">收到事件hello的数据:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">) </span><span style="color:#676E95;font-style:italic;">// 接收事件，并打印到控制台</span></span>
<span class="line"><span style="color:#A6ACCD;">em</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">emit</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">EventEmitter传递消息真方便!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h4 id="eventemitter-有哪些典型应用" tabindex="-1">EventEmitter 有哪些典型应用 <a class="header-anchor" href="#eventemitter-有哪些典型应用" aria-hidden="true">#</a></h4><ol><li>模块间传递消息</li><li>回调函数内外传递消息</li><li>处理流数据，因为流是在 EventEmitter 基础上实现的</li><li>观察者模式发射触发机制相关应用</li></ol><h4 id="怎么捕获-eventemitter-的错误事件" tabindex="-1">怎么捕获 EventEmitter 的错误事件? <a class="header-anchor" href="#怎么捕获-eventemitter-的错误事件" aria-hidden="true">#</a></h4><p>监听 error 事件即可．如果有多个 EventEmitter,也可以用 domain 来统一处理错误事件.</p><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> domain </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">domain</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> myDomain </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> domain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">myDomain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">domain接收到的错误事件:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">) </span><span style="color:#676E95;font-style:italic;">// 接收事件并打印</span></span>
<span class="line"><span style="color:#A6ACCD;">myDomain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">run</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">emitter1</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">MyEmitter</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">emitter1</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">emit</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">错误事件来自emitter1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">emitter2</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">MyEmitter</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">emitter2</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">emit</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">error</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">错误事件来自emitter2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h4 id="eventemitter-中的-newlistenser-事件有什么用处" tabindex="-1">EventEmitter 中的 newListenser 事件有什么用处 <a class="header-anchor" href="#eventemitter-中的-newlistenser-事件有什么用处" aria-hidden="true">#</a></h4><p>newListener 可以用来做事件机制的反射，特殊应用，事件管理等．当任何 on 事件添加到 EventEmitter 时，就会触发 newListener 事件，基于这种模式，我们可以做很多自定义处理.</p><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> emitter3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MyEmitter</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">emitter3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">newListener</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> listener</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">新事件的名字:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">新事件的代码:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">listener</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">我是自定义延时处理机制</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">emitter3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello　node</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h3 id="stream" tabindex="-1">Stream <a class="header-anchor" href="#stream" aria-hidden="true">#</a></h3><h4 id="什么是-stream" tabindex="-1">什么是 Stream? <a class="header-anchor" href="#什么是-stream" aria-hidden="true">#</a></h4><p>stream 是基于事件 EventEmitter 的数据管理模式．由各种不同的抽象接口组成，主要包括可写，可读，可读写，可转换等几种类型．</p><h4 id="stream-有什么好处" tabindex="-1">Stream 有什么好处? <a class="header-anchor" href="#stream-有什么好处" aria-hidden="true">#</a></h4><p>非阻塞式数据处理提升效率，片断处理节省内存，管道处理方便可扩展等.</p><h4 id="stream-有哪些典型应用" tabindex="-1">Stream 有哪些典型应用? <a class="header-anchor" href="#stream-有哪些典型应用" aria-hidden="true">#</a></h4><p>文件，网络，数据转换，音频视频等.</p><h4 id="怎么捕获-stream-的错误事件" tabindex="-1">怎么捕获 Stream 的错误事件? <a class="header-anchor" href="#怎么捕获-stream-的错误事件" aria-hidden="true">#</a></h4><p>监听 error 事件，方法同 EventEmitter.</p><h4 id="有哪些常用-stream-分别什么时候使用" tabindex="-1">有哪些常用 Stream,分别什么时候使用? <a class="header-anchor" href="#有哪些常用-stream-分别什么时候使用" aria-hidden="true">#</a></h4><p>Readable 为可被读流，在作为输入数据源时使用；Writable 为可被写流,在作为输出源时使用；Duplex 为可读写流,它作为输出源接受被写入，同时又作为输入源被后面的流读出．Transform 机制和 Duplex 一样，都是双向流，区别时 Transfrom 只需要实现一个函数_transfrom(chunk, encoding, callback);而 Duplex 需要分别实现_read(size)函数和_write(chunk, encoding, callback)函数.</p><h4 id="实现一个-writable-stream" tabindex="-1">实现一个 Writable Stream? <a class="header-anchor" href="#实现一个-writable-stream" aria-hidden="true">#</a></h4><ol><li>构造函数 call Writable</li><li>继承 Writable</li><li>实现_write(chunk, encoding, callback)函数</li></ol><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> Writable </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stream</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Writable</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> util </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">util</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MyWritable</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">Writable</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 构造函数</span></span>
<span class="line"><span style="color:#A6ACCD;">util</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">inherits</span><span style="color:#A6ACCD;">(MyWritable</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Writable) </span><span style="color:#676E95;font-style:italic;">// 继承自Writable</span></span>
<span class="line"><span style="color:#FFCB6B;">MyWritable</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_write</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">chunk</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> encoding</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> callback</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">被写入的数据是:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">chunk</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#F07178;">()) </span><span style="color:#676E95;font-style:italic;">// 此处可对写入的数据进行处理</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">callback</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">process</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">stdin</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pipe</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MyWritable</span><span style="color:#A6ACCD;">()) </span><span style="color:#676E95;font-style:italic;">// stdin作为输入源，MyWritable作为输出源</span></span>
<span class="line"></span></code></pre></div><h3 id="文件系统" tabindex="-1">文件系统 <a class="header-anchor" href="#文件系统" aria-hidden="true">#</a></h3><ul><li><ol><li>内置的 fs 模块架构是什么样子的?</li></ol><p>fs 模块主要由下面几部分组成:</p><ol><li>POSIX 文件 Wrapper,对应于操作系统的原生文件操作</li><li>文件流 fs.createReadStream 和 fs.createWriteStream</li><li>同步文件读写,fs.readFileSync 和 fs.writeFileSync</li><li>异步文件读写, fs.readFile 和 fs.writeFile</li></ol></li><li><ol start="2"><li>读写一个文件有多少种方法?</li></ol><p>总体来说有四种:</p><ol><li>POSIX 式低层读写</li><li>流式读写</li><li>同步文件读写</li><li>异步文件读写</li></ol></li><li><ol start="3"><li>怎么读取 json 配置文件?</li></ol></li></ul><p>主要有两种方式，第一种是利用 node 内置的 require(&#39;data.json&#39;)机制，直接得到 js 对象;   第二种是读入文件入内容，然后用 JSON.parse(content)转换成 js 对象．二者的区别是 require 机制情况下，如果多个模块都加载了同一个 json 文件，那么其中一个改变了 js 对象，其它跟着改变，这是由 node 模块的缓存机制造成的，只有一个 js 模块对象; 第二种方式则可以随意改变加载后的 js 变量，而且各模块互不影响，因为他们都是独立的，是多个 js 对象.</p><ul><li><ol start="4"><li>fs.watch 和 fs.watchFile 有什么区别，怎么应用?</li></ol></li></ul><p>二者主要用来监听文件变动．fs.watch 利用操作系统原生机制来监听，可能不适用网络文件系统; fs.watchFile 则是定期检查文件状态变更，适用于网络文件系统，但是相比 fs.watch 有些慢，因为不是实时机制．</p><h3 id="网络" tabindex="-1">网络 <a class="header-anchor" href="#网络" aria-hidden="true">#</a></h3><h4 id="node-的网络模块架构是什么样子的" tabindex="-1">node 的网络模块架构是什么样子的 <a class="header-anchor" href="#node-的网络模块架构是什么样子的" aria-hidden="true">#</a></h4><p>node 全面支持各种网络服务器和客户端，包括 tcp, http/https, tcp, udp, dns, tls/ssl 等.</p><h4 id="node-是怎样支持-https-tls-的" tabindex="-1">node 是怎样支持 https,tls 的 <a class="header-anchor" href="#node-是怎样支持-https-tls-的" aria-hidden="true">#</a></h4><p>主要实现以下几个步骤即可:</p><ol><li>openssl 生成公钥私钥</li><li>服务器或客户端使用 https 替代 http</li><li>服务器或客户端加载公钥私钥证书</li></ol><h4 id="实现一个简单的-http-服务器" tabindex="-1">实现一个简单的 http 服务器 <a class="header-anchor" href="#实现一个简单的-http-服务器" aria-hidden="true">#</a></h4><p>经典又很没毛意义的一个题目．思路是加载 http 模块，创建服务器，监听端口.</p><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> http </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">) </span><span style="color:#676E95;font-style:italic;">// 加载http模块</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">http</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createServer</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> res</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">writeHead</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">200</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">Content-Type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">text/html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// 200代表状态成功, 文档类型是给浏览器识别用的</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">write</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&lt;meta charset=&quot;UTF-8&quot;&gt; &lt;h1&gt;我是标题啊！&lt;/h1&gt; &lt;font color=&quot;red&quot;&gt;这么原生，初级的服务器，下辈子能用着吗?!&lt;/font&gt;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// 返回给客户端的html数据</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">end</span><span style="color:#F07178;">() </span><span style="color:#676E95;font-style:italic;">// 结束输出流</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">listen</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">3000</span><span style="color:#A6ACCD;">) </span><span style="color:#676E95;font-style:italic;">// 绑定3ooo, 查看效果请访问 http://localhost:3000</span></span>
<span class="line"></span></code></pre></div><h3 id="child-process" tabindex="-1">child-process <a class="header-anchor" href="#child-process" aria-hidden="true">#</a></h3><h4 id="为什么需要-child-process" tabindex="-1">为什么需要 child-process <a class="header-anchor" href="#为什么需要-child-process" aria-hidden="true">#</a></h4><p>node 是异步非阻塞的，这对高并发非常有效．可是我们还有其它一些常用需求，比如和操作系统 shell 命令交互，调用可执行文件，创建子进程进行阻塞式访问或高 CPU 计算等，child-process 就是为满足这些需求而生的．child-process 顾名思义，就是把 node 阻塞的工作交给子进程去做．</p><h4 id="exec-execfile-spawn-和-fork-都是做什么用的" tabindex="-1">exec,execFile,spawn 和 fork 都是做什么用的 <a class="header-anchor" href="#exec-execfile-spawn-和-fork-都是做什么用的" aria-hidden="true">#</a></h4><p>exec 可以用操作系统原生的方式执行各种命令，如管道 cat ab.txt | grep hello; execFile 是执行一个文件; spawn 是流式和操作系统进行交互; fork 是两个 node 程序(javascript)之间时行交互.</p><h4 id="实现一个简单的命令行交互程序" tabindex="-1">实现一个简单的命令行交互程序 <a class="header-anchor" href="#实现一个简单的命令行交互程序" aria-hidden="true">#</a></h4><p>那就用 spawn 吧</p><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> cp </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">child_process</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> child </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> cp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">spawn</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">echo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">你好</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">钩子</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">]) </span><span style="color:#676E95;font-style:italic;">// 执行命令</span></span>
<span class="line"><span style="color:#A6ACCD;">child</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">stdout</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pipe</span><span style="color:#A6ACCD;">(process</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">stdout) </span><span style="color:#676E95;font-style:italic;">// child.stdout是输入流，process.stdout是输出流</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 这句的意思是将子进程的输出作为当前程序的输入流，然后重定向到当前程序的标准输出，即控制台</span></span>
<span class="line"></span></code></pre></div><h4 id="两个-node-程序之间怎样交互" tabindex="-1">两个 node 程序之间怎样交互 <a class="header-anchor" href="#两个-node-程序之间怎样交互" aria-hidden="true">#</a></h4><p>用 fork 嘛，上面讲过了．原理是子程序用 process.on, process.send，父程序里用 child.on,child.send 进行交互.</p><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// fork-parent.js</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> cp </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">child_process</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> child </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> cp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fork</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./fork-child.js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">child</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">message</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">msg</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">老爸从儿子接受到数据:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">child</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">我是你爸爸，送关怀来了!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// fork-child.js</span></span>
<span class="line"><span style="color:#A6ACCD;">process</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">message</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">msg</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">儿子从老爸接收到的数据:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">msg</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">process</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">我不要关怀，我要银民币！</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h4 id="怎样让一个-js-文件变得像-linux-命令一样可执行" tabindex="-1">怎样让一个 js 文件变得像 linux 命令一样可执行 <a class="header-anchor" href="#怎样让一个-js-文件变得像-linux-命令一样可执行" aria-hidden="true">#</a></h4><ol><li>在 myCommand.js 文件头部加入 #!/usr/bin/env node</li><li>chmod 命令把 js 文件改为可执行即可</li><li>进入文件目录，命令行输入 myComand 就是相当于 node myComand.js 了</li></ol><h4 id="child-process-和-process-的-stdin-stdout-stderror-是一样的吗" tabindex="-1">child-process 和 process 的 stdin,stdout,stderror 是一样的吗 <a class="header-anchor" href="#child-process-和-process-的-stdin-stdout-stderror-是一样的吗" aria-hidden="true">#</a></h4><p>概念都是一样的，输入，输出，错误，都是流．区别是在父程序眼里，子程序的 stdout 是输入流，stdin 是输出流．</p><h2 id="node-高级话题-异步，部署，性能调优，异常调试等" tabindex="-1">node 高级话题(异步，部署，性能调优，异常调试等) <a class="header-anchor" href="#node-高级话题-异步，部署，性能调优，异常调试等" aria-hidden="true">#</a></h2><h4 id="node-中的异步和同步怎么理解" tabindex="-1">node 中的异步和同步怎么理解 <a class="header-anchor" href="#node-中的异步和同步怎么理解" aria-hidden="true">#</a></h4><p>node 是单线程的，异步是通过一次次的循环事件队列来实现的．同步则是说阻塞式的 IO,这在高并发环境会是一个很大的性能问题，所以同步一般只在基础框架的启动时使用，用来加载配置文件，初始化程序什么的．</p><h4 id="有哪些方法可以进行异步流程的控制" tabindex="-1">有哪些方法可以进行异步流程的控制 <a class="header-anchor" href="#有哪些方法可以进行异步流程的控制" aria-hidden="true">#</a></h4><ol><li>多层嵌套回调</li><li>为每一个回调写单独的函数，函数里边再回调</li><li>用第三方框架比方 async, q, promise 等</li></ol><h4 id="怎样绑定-node-程序到-80-端口" tabindex="-1">怎样绑定 node 程序到 80 端口 <a class="header-anchor" href="#怎样绑定-node-程序到-80-端口" aria-hidden="true">#</a></h4><p>多种方式：</p><ol><li>sudo</li><li>apache/nginx 代理</li><li>用操作系统的 firewall iptables 进行端口重定向</li></ol><h4 id="有哪些方法可以让-node-程序遇到错误后自动重启" tabindex="-1">有哪些方法可以让 node 程序遇到错误后自动重启 <a class="header-anchor" href="#有哪些方法可以让-node-程序遇到错误后自动重启" aria-hidden="true">#</a></h4><ol><li>runit</li><li>forever</li><li>nohup npm start &amp;</li></ol><h4 id="怎样充分利用多个-cpu" tabindex="-1">怎样充分利用多个 CPU <a class="header-anchor" href="#怎样充分利用多个-cpu" aria-hidden="true">#</a></h4><p>一个 CPU 运行一个 node 实例</p><h4 id="怎样调节-node-执行单元的内存大小" tabindex="-1">怎样调节 node 执行单元的内存大小 <a class="header-anchor" href="#怎样调节-node-执行单元的内存大小" aria-hidden="true">#</a></h4><p>用--max-old-space-size 和 --max-new-space-size 来设置 v8 使用内存的上限</p><h4 id="程序总是崩溃，怎样找出问题在哪里" tabindex="-1">程序总是崩溃，怎样找出问题在哪里 <a class="header-anchor" href="#程序总是崩溃，怎样找出问题在哪里" aria-hidden="true">#</a></h4><ol><li>node --prof 查看哪些函数调用次数多</li><li>memwatch 和 heapdump 获得内存快照进行对比，查找内存溢出</li></ol><h4 id="有哪些常用方法可以防止程序崩溃" tabindex="-1">有哪些常用方法可以防止程序崩溃 <a class="header-anchor" href="#有哪些常用方法可以防止程序崩溃" aria-hidden="true">#</a></h4><ol><li>try-catch-finally</li><li>EventEmitter/Stream error 事件处理</li><li>domain 统一控制</li><li>jshint 静态检查</li><li>jasmine/mocha 进行单元测试</li></ol><h4 id="怎样调试-node-程序" tabindex="-1">怎样调试 node 程序? <a class="header-anchor" href="#怎样调试-node-程序" aria-hidden="true">#</a></h4><p>node --debug app.js 和 node-inspector</p><h4 id="如何捕获-nodejs-中的错误，有几种方法" tabindex="-1">如何捕获 NodeJS 中的错误，有几种方法? <a class="header-anchor" href="#如何捕获-nodejs-中的错误，有几种方法" aria-hidden="true">#</a></h4><ol><li>监听错误事件 req.on(&#39;error&#39;, function(){}), 适用 EventEmitter 存在的情况</li><li>Promise.then.catch(error),适用 Promise 存在的情况</li><li>try-catch,适用 async-await 和 js 运行时异常，比如 undefined object</li></ol><h2 id="常用知名第三方类库-async-express-等" tabindex="-1">常用知名第三方类库(Async, Express 等) <a class="header-anchor" href="#常用知名第三方类库-async-express-等" aria-hidden="true">#</a></h2><h4 id="async-都有哪些常用方法，分别是怎么用" tabindex="-1">async 都有哪些常用方法，分别是怎么用? <a class="header-anchor" href="#async-都有哪些常用方法，分别是怎么用" aria-hidden="true">#</a></h4><p>async 是一个 js 类库，它的目的是解决 js 中异常流程难以控制的问题．async 不仅适用在 node.js 里，浏览器中也可以使用．</p><ol><li>async.parallel 并行执行完多个函数后，调用结束函数</li></ol><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">	async</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parallel</span><span style="color:#A6ACCD;">([</span></span>
<span class="line"><span style="color:#A6ACCD;">	    </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(){</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">	    </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(){</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> callback)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><ol start="2"><li>async.series 串行执行完多个函数后，调用结束函数</li></ol><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">	async</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">series</span><span style="color:#A6ACCD;">([</span></span>
<span class="line"><span style="color:#A6ACCD;">	    </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(){</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">	    </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(){</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><ol start="3"><li>async.waterfall 依次执行多个函数，后一个函数以前面函数的结果作为输入参数</li></ol><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">async</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">waterfall</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    [</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">callback</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">callback</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">null,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">one</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">two</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">arg1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> arg2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> callback</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// arg1 now equals &#39;one&#39; and arg2 now equals &#39;two&#39;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">callback</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">null,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">three</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">arg1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> callback</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// arg1 now equals &#39;three&#39;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">callback</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">null,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">done</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> result</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// result now equals &#39;done&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><ol start="4"><li>async.map 异步执行多个数组，返回结果数组</li></ol><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">async</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">map</span><span style="color:#A6ACCD;">([</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">file1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">file2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">file3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> fs</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">stat</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> results</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// results is now an array of stats for each file</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><ol start="5"><li>async.filter 异步过滤多个数组，返回结果数组</li></ol><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">async</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter</span><span style="color:#A6ACCD;">([</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">file1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">file2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">file3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> fs</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">exists</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">results</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// results now equals an array of the existing files</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h4 id="express-项目的目录大致是什么样子的" tabindex="-1">express 项目的目录大致是什么样子的 <a class="header-anchor" href="#express-项目的目录大致是什么样子的" aria-hidden="true">#</a></h4><p>app.js, package.json, bin/www, public, routes, views.</p><h4 id="express-常用函数" tabindex="-1">express 常用函数 <a class="header-anchor" href="#express-常用函数" aria-hidden="true">#</a></h4><p>express.Router 路由组件,app.get 路由定向，app.configure 配置，app.set 设定参数,app.use 使用中间件</p><h4 id="express-中如何获取路由的参数" tabindex="-1">express 中如何获取路由的参数 <a class="header-anchor" href="#express-中如何获取路由的参数" aria-hidden="true">#</a></h4><p>/users/:name 使用 <a href="http://req.params.name" target="_blank" rel="noopener noreferrer">req.params.name</a> 来获取; req.body.username 则是获得表单传入参数 username; express 路由支持常用通配符 ?, +, *, and ()</p><h4 id="express-response-有哪些常用方法" tabindex="-1">express response 有哪些常用方法 <a class="header-anchor" href="#express-response-有哪些常用方法" aria-hidden="true">#</a></h4><ul><li>res.download() 弹出文件下载</li><li>res.end() 结束 response</li><li>res.json() 返回 json</li><li>res.jsonp() 返回 jsonp</li><li>res.redirect() 重定向请求</li><li>res.render() 渲染模板</li><li>res.send() 返回多种形式数据</li><li>res.sendFile 返回文件</li><li>res.sendStatus() 返回状态</li></ul><h2 id="其它相关后端常用技术-mongodb-redis-apache-nginx-等" tabindex="-1">其它相关后端常用技术(MongoDB, Redis, Apache, Nginx 等) <a class="header-anchor" href="#其它相关后端常用技术-mongodb-redis-apache-nginx-等" aria-hidden="true">#</a></h2><h4 id="mongodb-有哪些常用优化措施" tabindex="-1">mongodb 有哪些常用优化措施 <a class="header-anchor" href="#mongodb-有哪些常用优化措施" aria-hidden="true">#</a></h4><p>类似传统数据库，索引和分区．</p><h4 id="mongoose-是什么？有支持哪些特性" tabindex="-1">mongoose 是什么？有支持哪些特性? <a class="header-anchor" href="#mongoose-是什么？有支持哪些特性" aria-hidden="true">#</a></h4><p>mongoose 是 mongodb 的文档映射模型．主要由 Schema, Model 和 Instance 三个方面组成．Schema 就是定义数据类型，Model 就是把 Schema 和 js 类绑定到一起，Instance 就是一个对象实例．常见 mongoose 操作有,save, update, find. findOne, findById, static 方法等．</p><h4 id="redis-支持哪些功能" tabindex="-1">redis 支持哪些功能 <a class="header-anchor" href="#redis-支持哪些功能" aria-hidden="true">#</a></h4><p>set/get, mset/hset/hmset/hmget/hgetall/hkeys, sadd/smembers, publish/subscribe, expire</p><h4 id="redis-最简单的应用" tabindex="-1">redis 最简单的应用 <a class="header-anchor" href="#redis-最简单的应用" aria-hidden="true">#</a></h4><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> redis </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">redis</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    client </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> redis</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createClient</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">client</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">foo_rand000000000000</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">some fantastic value</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">client</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">foo_rand000000000000</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">err</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> reply</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">reply</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#F07178;">())</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">client</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">end</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span></code></pre></div><h4 id="apache-nginx-有什么区别" tabindex="-1">apache,nginx 有什么区别? <a class="header-anchor" href="#apache-nginx-有什么区别" aria-hidden="true">#</a></h4><p>二者都是代理服务器，功能类似．apache 应用简单，相当广泛．nginx 在分布式，静态转发方面比较有优势．</p></div></div></main><!----><!--[--><!--]--></div></div></div></div></div><!----></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"nodejs.md\":\"2580d526\"}")</script>
    <script type="module" async src="/assets/app.05d66233.js"></script>
    
  </body>
</html>