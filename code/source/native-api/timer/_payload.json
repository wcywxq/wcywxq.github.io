[{"data":1,"prerenderedAt":2781},["Reactive",2],{"navigation":3,"/code/source/native-api/timer":320,"/code/source/native-api/timer-surround":2777},[4,32],{"title":5,"_path":6,"children":7},"八股文","/endorsement",[8,19],{"title":9,"_path":10,"children":11},"构建工具","/endorsement/build-tools",[12],{"title":13,"_path":14,"children":15},"Webpack","/endorsement/build-tools/webpack",[16],{"title":17,"_path":18},"构建流程","/endorsement/build-tools/webpack/build-process",{"title":20,"_path":21,"children":22},"Html","/endorsement/html",[23,26,29],{"title":24,"_path":25},"Canvas 和 Svg","/endorsement/html/canvas-svg",{"title":27,"_path":28},"DOCTYPE 文档类型","/endorsement/html/doc-type",{"title":30,"_path":31},"离线存储","/endorsement/html/offline-storage",{"title":33,"_path":34,"children":35},"代码","/code",[36,264,313],{"title":37,"_path":38,"children":39},"算法","/code/algorithm",[40,53],{"title":41,"_path":42,"children":43},"剑指 offer","/code/algorithm/sword-ofter",[44,47,50],{"title":45,"_path":46},"LCR.140 训练计划 II","/code/algorithm/sword-ofter/lian-biao-zhong-dao-shu-di-kge-jie-dian-lcof",{"title":48,"_path":49},"LCR 169. 招式拆解 II","/code/algorithm/sword-ofter/di-yi-ge-zhi-chu-xian-yi-ci-de-zi-fu-lcof",{"title":51,"_path":52},"LCR 187. 破冰游戏","/code/algorithm/sword-ofter/yuan-quan-zhong-zui-hou-sheng-xia-de-shu-zi-lcof",{"title":54,"_path":55,"children":56},"力扣 leetCode","/code/algorithm/leetcode",[57,60,63,66,69,72,75,78,81,84,87,90,93,96,99,102,105,108,111,114,117,120,123,126,129,132,135,138,141,144,147,150,153,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261],{"title":58,"_path":59},"No.1 两数相加","/code/algorithm/leetcode/two-sum",{"title":61,"_path":62},"No.2 两数相加","/code/algorithm/leetcode/add-two-numbers",{"title":64,"_path":65},"No.3 无重复字符的最长子串","/code/algorithm/leetcode/longest-substring-without-repeating-characters",{"title":67,"_path":68},"No.4 寻找两个正序数组的中位数","/code/algorithm/leetcode/median-of-two-sorted-arrays",{"title":70,"_path":71},"No.5 最长回文子串","/code/algorithm/leetcode/longest-palindromic-substring",{"title":73,"_path":74},"No.7 整数反转","/code/algorithm/leetcode/reverse-integer",{"title":76,"_path":77},"No.9 回文数","/code/algorithm/leetcode/palindrome-number",{"title":79,"_path":80},"No.14 最长公共前缀","/code/algorithm/leetcode/longest-common-prefix",{"title":82,"_path":83},"No.15 三数之和","/code/algorithm/leetcode/3sum",{"title":85,"_path":86},"No.20 有效的括号","/code/algorithm/leetcode/valid-parentheses",{"title":88,"_path":89},"No.21 合并两个有序链表","/code/algorithm/leetcode/merge-two-sorted-lists",{"title":91,"_path":92},"No.22 括号生成","/code/algorithm/leetcode/generate-parentheses",{"title":94,"_path":95},"No.23 合并 K 个升序链表","/code/algorithm/leetcode/merge-k-sorted-lists",{"title":97,"_path":98},"No.24 两两交换链表中的节点","/code/algorithm/leetcode/swap-nodes-in-pairs",{"title":100,"_path":101},"No.25 K 个一组翻转链表","/code/algorithm/leetcode/reverse-nodes-in-k-group",{"title":103,"_path":104},"No.31 下一个排列","/code/algorithm/leetcode/next-permutation",{"title":106,"_path":107},"No.32 最长有效括号","/code/algorithm/leetcode/longest-valid-parentheses",{"title":109,"_path":110},"No.33 搜索旋转排序数组","/code/algorithm/leetcode/search-in-rotated-sorted-array",{"title":112,"_path":113},"No.34 在排序数组中查找元素的第一个和最后一个位置","/code/algorithm/leetcode/find-first-and-last-position-of-element-in-sorted-array",{"title":115,"_path":116},"No.39 组合求和","/code/algorithm/leetcode/combination-sum",{"title":118,"_path":119},"No.42 接雨水","/code/algorithm/leetcode/trapping-rain-water",{"title":121,"_path":122},"No.46 全排列","/code/algorithm/leetcode/permutations",{"title":124,"_path":125},"No.53 最大子序和","/code/algorithm/leetcode/maximum-subarray",{"title":127,"_path":128},"No.56 合并区间","/code/algorithm/leetcode/merge-intervals",{"title":130,"_path":131},"No.67 二进制求和","/code/algorithm/leetcode/add-binary",{"title":133,"_path":134},"No.69 x 的平方根","/code/algorithm/leetcode/sqrtx",{"title":136,"_path":137},"No.70 爬楼梯","/code/algorithm/leetcode/climbing-stairs",{"title":139,"_path":140},"No.88 合并两个有序数组","/code/algorithm/leetcode/merge-sorted-array",{"title":142,"_path":143},"No.92 反转链表 II","/code/algorithm/leetcode/reverse-linked-list-ii",{"title":145,"_path":146},"No.94 二叉树的中序遍历","/code/algorithm/leetcode/binary-tree-inorder-traversal",{"title":148,"_path":149},"No.101 对称二叉树","/code/algorithm/leetcode/symmetric-tree",{"title":151,"_path":152},"No.102 二叉树的层序遍历","/code/algorithm/leetcode/binary-tree-level-order-traversal",{"title":154,"_path":155},"No.104 二叉树的最大深度","/code/algorithm/leetcode/maximum-depth-of-binary-tree",{"title":157,"_path":158},"No.111 二叉树的最小深度","/code/algorithm/leetcode/minimum-depth-of-binary-tree",{"title":160,"_path":161},"No.112 路径总和","/code/algorithm/leetcode/path-sum",{"title":163,"_path":164},"No.121 买股票的最佳时机","/code/algorithm/leetcode/best-time-to-buy-and-sell-stock",{"title":166,"_path":167},"No.129 求根到叶子节点数字之和","/code/algorithm/leetcode/sum-root-to-leaf-numbers",{"title":169,"_path":170},"No.136 只出现一次的数字","/code/algorithm/leetcode/single-number",{"title":172,"_path":173},"No.141 环型链表","/code/algorithm/leetcode/linked-list-cycle",{"title":175,"_path":176},"No.146 LRU 缓存","/code/algorithm/leetcode/lru-cache",{"title":178,"_path":179},"No.151 反转字符串中的单词","/code/algorithm/leetcode/reverse-words-in-a-string",{"title":181,"_path":182},"No.153 寻找旋转排序数组中的最小值","/code/algorithm/leetcode/find-minimum-in-rotated-sorted-array",{"title":184,"_path":185},"No.155 最小栈","/code/algorithm/leetcode/min-stack",{"title":187,"_path":188},"No.160 相交链表","/code/algorithm/leetcode/intersection-of-two-linked-lists",{"title":190,"_path":191},"No.162 寻找峰值","/code/algorithm/leetcode/find-peak-element",{"title":193,"_path":194},"No.169 多数元素","/code/algorithm/leetcode/majority-element",{"title":196,"_path":197},"No.200 岛屿数量","/code/algorithm/leetcode/number-of-islands",{"title":199,"_path":200},"No.206 反转链表","/code/algorithm/leetcode/reverse-linked-list",{"title":202,"_path":203},"No.209 长度最小的子数组","/code/algorithm/leetcode/minimum-size-subarray-sum",{"title":205,"_path":206},"No.215 数组中的第K个最大元素","/code/algorithm/leetcode/kth-largest-element-in-an-array",{"title":208,"_path":209},"No.226 翻转二叉树","/code/algorithm/leetcode/invert-binary-tree",{"title":211,"_path":212},"No.238 除自身以外数组的乘积","/code/algorithm/leetcode/product-of-array-except-self",{"title":214,"_path":215},"No.322 零钱兑换","/code/algorithm/leetcode/coin-change",{"title":217,"_path":218},"No.334 递增的三元子序列","/code/algorithm/leetcode/increasing-triplet-subsequence",{"title":220,"_path":221},"No.344 反转字符串","/code/algorithm/leetcode/reverse-string",{"title":223,"_path":224},"No.345 反转字符串中的元音字母","/code/algorithm/leetcode/reverse-vowels-of-a-string",{"title":226,"_path":227},"No.384 打乱数组","/code/algorithm/leetcode/shuffle-an-array",{"title":229,"_path":230},"No.415 字符串相加","/code/algorithm/leetcode/add-strings",{"title":232,"_path":233},"No.443 压缩字符串","/code/algorithm/leetcode/string-compression",{"title":235,"_path":236},"No.509 斐波那契数","/code/algorithm/leetcode/fibonacci-number",{"title":238,"_path":239},"No.605 种花问题","/code/algorithm/leetcode/can-place-flowers",{"title":241,"_path":242},"No.617 合并二叉树","/code/algorithm/leetcode/merge-two-binary-trees",{"title":244,"_path":245},"No.678 有效的括号字符串","/code/algorithm/leetcode/valid-parenthesis-string",{"title":247,"_path":248},"No.704 二分查找","/code/algorithm/leetcode/binary-search",{"title":250,"_path":251},"No.912 排序数组","/code/algorithm/leetcode/sort-an-array",{"title":253,"_path":254},"No.1071 字符串的最大公因子","/code/algorithm/leetcode/greatest-common-divisor-of-strings",{"title":256,"_path":257},"No.1143 最长公共子序列","/code/algorithm/leetcode/longest-common-subsequence",{"title":259,"_path":260},"No.1431 拥有最多糖果的孩子","/code/algorithm/leetcode/kids-with-the-greatest-number-of-candies",{"title":262,"_path":263},"No.1768 交替合并字符串","/code/algorithm/leetcode/merge-strings-alternately",{"title":265,"_path":266,"children":267},"源码实现","/code/source",[268,293,306],{"title":269,"_path":270,"children":271},"原生 api","/code/source/native-api",[272,275,278,281,284,287,290],{"title":273,"_path":274},"ajax","/code/source/native-api/ajax",{"title":276,"_path":277},"call & apply & bind","/code/source/native-api/call-apply-bind",{"title":279,"_path":280},"new 操作符","/code/source/native-api/new",{"title":282,"_path":283},"instanceof 关键字","/code/source/native-api/instanceof",{"title":285,"_path":286},"定时器","/code/source/native-api/timer",{"title":288,"_path":289},"JSON.stringify","/code/source/native-api/json-stringify",{"title":291,"_path":292},"Iterator 迭代器","/code/source/native-api/iterator",{"title":294,"_path":295,"children":296},"数组 Array","/code/source/array",[297,300,303],{"title":298,"_path":299},"数组去重","/code/source/array/remove-duplicate",{"title":301,"_path":302},"数组扁平化","/code/source/array/flat",{"title":304,"_path":305},"交集、差集、并集、补集","/code/source/array/intersect-minus-union-complement",{"title":307,"_path":308,"children":309},"字符串 String","/code/source/string",[310],{"title":311,"_path":312},"repeat()","/code/source/string/repeat",{"title":314,"_path":315,"children":316},"业务场景","/code/scene",[317],{"title":318,"_path":319},"顺序打印 url 并支持 retry","/code/scene/promise-url-retry",{"_path":286,"_dir":321,"_draft":322,"_partial":322,"_locale":323,"title":285,"description":323,"body":324,"_type":2772,"_id":2773,"_source":2774,"_file":2775,"_extension":2776},"native-api",false,"",{"type":325,"children":326,"toc":2762},"root",[327,336,343,349,355,369,375,380,776,781,787,1144,1150,1155,1653,1658,2423,2429,2434,2756],{"type":328,"tag":329,"props":330,"children":332},"element","h2",{"id":331},"使用-requestanimationframe-实现定时器",[333],{"type":334,"value":335},"text","使用 RequestAnimationFrame 实现定时器",{"type":328,"tag":337,"props":338,"children":340},"h3",{"id":339},"浏览器默认提供的-settimeout-和-setinterval-的问题",[341],{"type":334,"value":342},"浏览器默认提供的 setTimeout 和 setInterval 的问题",{"type":328,"tag":344,"props":345,"children":346},"p",{},[347],{"type":334,"value":348},"首先在针对浏览器端的默认实现中，setTimeout 和 setInterval 的定时是 不准确的，因为我们知道 js 是单线程的，如果前面的代码耗费了较长的时间，那么会导致后面的定时器不能按时执行。此外 setInterval 会带来性能上的问题，比如存在执行累积的问题等等。\n可以使用 requestAnimationFrame 来实现定时器的要求，首先 requestAnimationFrame 自带函数节流功能，基本可以保证在 16.6ms 内只执行一次（不掉帧的情况下），并且该函数的延时效果是精确的，没有其他定时器时间不准的问题。",{"type":328,"tag":337,"props":350,"children":352},{"id":351},"requestanimationframe-简单介绍",[353],{"type":334,"value":354},"requestAnimationFrame 简单介绍",{"type":328,"tag":344,"props":356,"children":357},{},[358,360,367],{"type":334,"value":359},"requestAnimationFrame 的语法很简单：",{"type":328,"tag":361,"props":362,"children":364},"code",{"className":363},[],[365],{"type":334,"value":366},"window.requestAnimationFrame(callback)",{"type":334,"value":368},"。callback 为一个指定函数的参数，该函数在下次重新绘制动画时调用",{"type":328,"tag":337,"props":370,"children":372},{"id":371},"settimeout-实现",[373],{"type":334,"value":374},"setTimeout 实现",{"type":328,"tag":344,"props":376,"children":377},{},[378],{"type":334,"value":379},"重新绘制的时间即 16.6ms 执行。我们可以通过递归调用来达到定时器的效果",{"type":328,"tag":381,"props":382,"children":386},"pre",{"className":383,"code":384,"language":385,"meta":323,"style":323},"language-js shiki shiki-themes slack-ochin slack-ochin ayu-dark","function _setTimeout(fn, timeout) {\n  let timer;\n  let startTime = Date.now();\n  const loop = () => {\n    timer = window.requestAnimationFrame(loop);\n    if (Date.now() - startTime >= timeout) {\n      fn.call(this, timer);\n      window.cancelAnimationFrame(timer);\n    }\n  };\n  window.requestAnimationFrame(loop);\n}\n","js",[387],{"type":328,"tag":361,"props":388,"children":389},{"__ignoreMap":323},[390,436,456,500,533,578,633,677,712,721,734,767],{"type":328,"tag":391,"props":392,"children":395},"span",{"class":393,"line":394},"line",1,[396,402,408,414,420,426,431],{"type":328,"tag":391,"props":397,"children":399},{"style":398},"--shiki-light:#0991B6;--shiki-default:#0991B6;--shiki-dark:#FF8F40",[400],{"type":334,"value":401},"function",{"type":328,"tag":391,"props":403,"children":405},{"style":404},"--shiki-light:#7EB233;--shiki-default:#7EB233;--shiki-dark:#FFB454",[406],{"type":334,"value":407}," _setTimeout",{"type":328,"tag":391,"props":409,"children":411},{"style":410},"--shiki-light:#002339;--shiki-default:#002339;--shiki-dark:#BFBDB6",[412],{"type":334,"value":413},"(",{"type":328,"tag":391,"props":415,"children":417},{"style":416},"--shiki-light:#B1108E;--shiki-default:#B1108E;--shiki-dark:#D2A6FF",[418],{"type":334,"value":419},"fn",{"type":328,"tag":391,"props":421,"children":423},{"style":422},"--shiki-light:#002339;--shiki-default:#002339;--shiki-dark:#BFBDB6B3",[424],{"type":334,"value":425},",",{"type":328,"tag":391,"props":427,"children":428},{"style":416},[429],{"type":334,"value":430}," timeout",{"type":328,"tag":391,"props":432,"children":433},{"style":410},[434],{"type":334,"value":435},") {\n",{"type":328,"tag":391,"props":437,"children":439},{"class":393,"line":438},2,[440,445,451],{"type":328,"tag":391,"props":441,"children":442},{"style":398},[443],{"type":334,"value":444},"  let",{"type":328,"tag":391,"props":446,"children":448},{"style":447},"--shiki-light:#2F86D2;--shiki-default:#2F86D2;--shiki-dark:#BFBDB6",[449],{"type":334,"value":450}," timer",{"type":328,"tag":391,"props":452,"children":453},{"style":422},[454],{"type":334,"value":455},";\n",{"type":328,"tag":391,"props":457,"children":459},{"class":393,"line":458},3,[460,464,469,475,480,486,491,496],{"type":328,"tag":391,"props":461,"children":462},{"style":398},[463],{"type":334,"value":444},{"type":328,"tag":391,"props":465,"children":466},{"style":447},[467],{"type":334,"value":468}," startTime",{"type":328,"tag":391,"props":470,"children":472},{"style":471},"--shiki-light:#7B30D0;--shiki-default:#7B30D0;--shiki-dark:#F29668",[473],{"type":334,"value":474}," =",{"type":328,"tag":391,"props":476,"children":477},{"style":447},[478],{"type":334,"value":479}," Date",{"type":328,"tag":391,"props":481,"children":483},{"style":482},"--shiki-light:#002339;--shiki-default:#002339;--shiki-dark:#F29668",[484],{"type":334,"value":485},".",{"type":328,"tag":391,"props":487,"children":488},{"style":404},[489],{"type":334,"value":490},"now",{"type":328,"tag":391,"props":492,"children":493},{"style":410},[494],{"type":334,"value":495},"()",{"type":328,"tag":391,"props":497,"children":498},{"style":422},[499],{"type":334,"value":455},{"type":328,"tag":391,"props":501,"children":503},{"class":393,"line":502},4,[504,509,514,518,523,528],{"type":328,"tag":391,"props":505,"children":506},{"style":398},[507],{"type":334,"value":508},"  const",{"type":328,"tag":391,"props":510,"children":511},{"style":404},[512],{"type":334,"value":513}," loop",{"type":328,"tag":391,"props":515,"children":516},{"style":471},[517],{"type":334,"value":474},{"type":328,"tag":391,"props":519,"children":520},{"style":410},[521],{"type":334,"value":522}," () ",{"type":328,"tag":391,"props":524,"children":525},{"style":398},[526],{"type":334,"value":527},"=>",{"type":328,"tag":391,"props":529,"children":530},{"style":410},[531],{"type":334,"value":532}," {\n",{"type":328,"tag":391,"props":534,"children":536},{"class":393,"line":535},5,[537,542,546,551,555,560,564,569,574],{"type":328,"tag":391,"props":538,"children":539},{"style":447},[540],{"type":334,"value":541},"    timer",{"type":328,"tag":391,"props":543,"children":544},{"style":471},[545],{"type":334,"value":474},{"type":328,"tag":391,"props":547,"children":548},{"style":447},[549],{"type":334,"value":550}," window",{"type":328,"tag":391,"props":552,"children":553},{"style":482},[554],{"type":334,"value":485},{"type":328,"tag":391,"props":556,"children":557},{"style":404},[558],{"type":334,"value":559},"requestAnimationFrame",{"type":328,"tag":391,"props":561,"children":562},{"style":410},[563],{"type":334,"value":413},{"type":328,"tag":391,"props":565,"children":566},{"style":447},[567],{"type":334,"value":568},"loop",{"type":328,"tag":391,"props":570,"children":571},{"style":410},[572],{"type":334,"value":573},")",{"type":328,"tag":391,"props":575,"children":576},{"style":422},[577],{"type":334,"value":455},{"type":328,"tag":391,"props":579,"children":581},{"class":393,"line":580},6,[582,588,593,598,602,606,611,616,620,625,629],{"type":328,"tag":391,"props":583,"children":585},{"style":584},"--shiki-light:#7B30D0;--shiki-default:#7B30D0;--shiki-dark:#FF8F40",[586],{"type":334,"value":587},"    if",{"type":328,"tag":391,"props":589,"children":590},{"style":410},[591],{"type":334,"value":592}," (",{"type":328,"tag":391,"props":594,"children":595},{"style":447},[596],{"type":334,"value":597},"Date",{"type":328,"tag":391,"props":599,"children":600},{"style":482},[601],{"type":334,"value":485},{"type":328,"tag":391,"props":603,"children":604},{"style":404},[605],{"type":334,"value":490},{"type":328,"tag":391,"props":607,"children":608},{"style":410},[609],{"type":334,"value":610},"() ",{"type":328,"tag":391,"props":612,"children":613},{"style":471},[614],{"type":334,"value":615},"-",{"type":328,"tag":391,"props":617,"children":618},{"style":447},[619],{"type":334,"value":468},{"type":328,"tag":391,"props":621,"children":622},{"style":471},[623],{"type":334,"value":624}," >=",{"type":328,"tag":391,"props":626,"children":627},{"style":447},[628],{"type":334,"value":430},{"type":328,"tag":391,"props":630,"children":631},{"style":410},[632],{"type":334,"value":435},{"type":328,"tag":391,"props":634,"children":636},{"class":393,"line":635},7,[637,642,646,651,655,661,665,669,673],{"type":328,"tag":391,"props":638,"children":639},{"style":447},[640],{"type":334,"value":641},"      fn",{"type":328,"tag":391,"props":643,"children":644},{"style":482},[645],{"type":334,"value":485},{"type":328,"tag":391,"props":647,"children":648},{"style":404},[649],{"type":334,"value":650},"call",{"type":328,"tag":391,"props":652,"children":653},{"style":410},[654],{"type":334,"value":413},{"type":328,"tag":391,"props":656,"children":658},{"style":657},"--shiki-light:#000000;--shiki-default:#000000;--shiki-dark:#39BAE6;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:italic",[659],{"type":334,"value":660},"this",{"type":328,"tag":391,"props":662,"children":663},{"style":422},[664],{"type":334,"value":425},{"type":328,"tag":391,"props":666,"children":667},{"style":447},[668],{"type":334,"value":450},{"type":328,"tag":391,"props":670,"children":671},{"style":410},[672],{"type":334,"value":573},{"type":328,"tag":391,"props":674,"children":675},{"style":422},[676],{"type":334,"value":455},{"type":328,"tag":391,"props":678,"children":680},{"class":393,"line":679},8,[681,686,690,695,699,704,708],{"type":328,"tag":391,"props":682,"children":683},{"style":447},[684],{"type":334,"value":685},"      window",{"type":328,"tag":391,"props":687,"children":688},{"style":482},[689],{"type":334,"value":485},{"type":328,"tag":391,"props":691,"children":692},{"style":404},[693],{"type":334,"value":694},"cancelAnimationFrame",{"type":328,"tag":391,"props":696,"children":697},{"style":410},[698],{"type":334,"value":413},{"type":328,"tag":391,"props":700,"children":701},{"style":447},[702],{"type":334,"value":703},"timer",{"type":328,"tag":391,"props":705,"children":706},{"style":410},[707],{"type":334,"value":573},{"type":328,"tag":391,"props":709,"children":710},{"style":422},[711],{"type":334,"value":455},{"type":328,"tag":391,"props":713,"children":715},{"class":393,"line":714},9,[716],{"type":328,"tag":391,"props":717,"children":718},{"style":410},[719],{"type":334,"value":720},"    }\n",{"type":328,"tag":391,"props":722,"children":724},{"class":393,"line":723},10,[725,730],{"type":328,"tag":391,"props":726,"children":727},{"style":410},[728],{"type":334,"value":729},"  }",{"type":328,"tag":391,"props":731,"children":732},{"style":422},[733],{"type":334,"value":455},{"type":328,"tag":391,"props":735,"children":737},{"class":393,"line":736},11,[738,743,747,751,755,759,763],{"type":328,"tag":391,"props":739,"children":740},{"style":447},[741],{"type":334,"value":742},"  window",{"type":328,"tag":391,"props":744,"children":745},{"style":482},[746],{"type":334,"value":485},{"type":328,"tag":391,"props":748,"children":749},{"style":404},[750],{"type":334,"value":559},{"type":328,"tag":391,"props":752,"children":753},{"style":410},[754],{"type":334,"value":413},{"type":328,"tag":391,"props":756,"children":757},{"style":447},[758],{"type":334,"value":568},{"type":328,"tag":391,"props":760,"children":761},{"style":410},[762],{"type":334,"value":573},{"type":328,"tag":391,"props":764,"children":765},{"style":422},[766],{"type":334,"value":455},{"type":328,"tag":391,"props":768,"children":770},{"class":393,"line":769},12,[771],{"type":328,"tag":391,"props":772,"children":773},{"style":410},[774],{"type":334,"value":775},"}\n",{"type":328,"tag":344,"props":777,"children":778},{},[779],{"type":334,"value":780},"这里需要先定义一个开始时间 startTime，然后定义一个递归函数 loop，每次先递归调用自己获取最新的 timer，这样才能够保证可以取消掉，然后判断当前时间减去开始时间是否大于自己设定的值，如果大则回调并取消定时器即可，否则因为我们已经在一开始回调自己了，所以会在 16.6ms 后再次执行并判断，直到满足条件为止。",{"type":328,"tag":337,"props":782,"children":784},{"id":783},"setinterval-实现",[785],{"type":334,"value":786},"setInterval 实现",{"type":328,"tag":381,"props":788,"children":790},{"className":383,"code":789,"language":385,"meta":323,"style":323},"function _setInterval(fn, interval) {\n  let timer;\n  let startTime = Date.now();\n  const loop = () => {\n    timer = window.requestAnimationFrame(loop);\n    if (Date.now() - startTime >= interval) {\n      fn.call(this, timer);\n      startTime = Date.now();\n    }\n  };\n  timer = window.RequestAnimationFrame(loop);\n  return timer;\n}\n",[791],{"type":328,"tag":361,"props":792,"children":793},{"__ignoreMap":323},[794,827,842,877,904,943,990,1029,1061,1068,1079,1120,1136],{"type":328,"tag":391,"props":795,"children":796},{"class":393,"line":394},[797,801,806,810,814,818,823],{"type":328,"tag":391,"props":798,"children":799},{"style":398},[800],{"type":334,"value":401},{"type":328,"tag":391,"props":802,"children":803},{"style":404},[804],{"type":334,"value":805}," _setInterval",{"type":328,"tag":391,"props":807,"children":808},{"style":410},[809],{"type":334,"value":413},{"type":328,"tag":391,"props":811,"children":812},{"style":416},[813],{"type":334,"value":419},{"type":328,"tag":391,"props":815,"children":816},{"style":422},[817],{"type":334,"value":425},{"type":328,"tag":391,"props":819,"children":820},{"style":416},[821],{"type":334,"value":822}," interval",{"type":328,"tag":391,"props":824,"children":825},{"style":410},[826],{"type":334,"value":435},{"type":328,"tag":391,"props":828,"children":829},{"class":393,"line":438},[830,834,838],{"type":328,"tag":391,"props":831,"children":832},{"style":398},[833],{"type":334,"value":444},{"type":328,"tag":391,"props":835,"children":836},{"style":447},[837],{"type":334,"value":450},{"type":328,"tag":391,"props":839,"children":840},{"style":422},[841],{"type":334,"value":455},{"type":328,"tag":391,"props":843,"children":844},{"class":393,"line":458},[845,849,853,857,861,865,869,873],{"type":328,"tag":391,"props":846,"children":847},{"style":398},[848],{"type":334,"value":444},{"type":328,"tag":391,"props":850,"children":851},{"style":447},[852],{"type":334,"value":468},{"type":328,"tag":391,"props":854,"children":855},{"style":471},[856],{"type":334,"value":474},{"type":328,"tag":391,"props":858,"children":859},{"style":447},[860],{"type":334,"value":479},{"type":328,"tag":391,"props":862,"children":863},{"style":482},[864],{"type":334,"value":485},{"type":328,"tag":391,"props":866,"children":867},{"style":404},[868],{"type":334,"value":490},{"type":328,"tag":391,"props":870,"children":871},{"style":410},[872],{"type":334,"value":495},{"type":328,"tag":391,"props":874,"children":875},{"style":422},[876],{"type":334,"value":455},{"type":328,"tag":391,"props":878,"children":879},{"class":393,"line":502},[880,884,888,892,896,900],{"type":328,"tag":391,"props":881,"children":882},{"style":398},[883],{"type":334,"value":508},{"type":328,"tag":391,"props":885,"children":886},{"style":404},[887],{"type":334,"value":513},{"type":328,"tag":391,"props":889,"children":890},{"style":471},[891],{"type":334,"value":474},{"type":328,"tag":391,"props":893,"children":894},{"style":410},[895],{"type":334,"value":522},{"type":328,"tag":391,"props":897,"children":898},{"style":398},[899],{"type":334,"value":527},{"type":328,"tag":391,"props":901,"children":902},{"style":410},[903],{"type":334,"value":532},{"type":328,"tag":391,"props":905,"children":906},{"class":393,"line":535},[907,911,915,919,923,927,931,935,939],{"type":328,"tag":391,"props":908,"children":909},{"style":447},[910],{"type":334,"value":541},{"type":328,"tag":391,"props":912,"children":913},{"style":471},[914],{"type":334,"value":474},{"type":328,"tag":391,"props":916,"children":917},{"style":447},[918],{"type":334,"value":550},{"type":328,"tag":391,"props":920,"children":921},{"style":482},[922],{"type":334,"value":485},{"type":328,"tag":391,"props":924,"children":925},{"style":404},[926],{"type":334,"value":559},{"type":328,"tag":391,"props":928,"children":929},{"style":410},[930],{"type":334,"value":413},{"type":328,"tag":391,"props":932,"children":933},{"style":447},[934],{"type":334,"value":568},{"type":328,"tag":391,"props":936,"children":937},{"style":410},[938],{"type":334,"value":573},{"type":328,"tag":391,"props":940,"children":941},{"style":422},[942],{"type":334,"value":455},{"type":328,"tag":391,"props":944,"children":945},{"class":393,"line":580},[946,950,954,958,962,966,970,974,978,982,986],{"type":328,"tag":391,"props":947,"children":948},{"style":584},[949],{"type":334,"value":587},{"type":328,"tag":391,"props":951,"children":952},{"style":410},[953],{"type":334,"value":592},{"type":328,"tag":391,"props":955,"children":956},{"style":447},[957],{"type":334,"value":597},{"type":328,"tag":391,"props":959,"children":960},{"style":482},[961],{"type":334,"value":485},{"type":328,"tag":391,"props":963,"children":964},{"style":404},[965],{"type":334,"value":490},{"type":328,"tag":391,"props":967,"children":968},{"style":410},[969],{"type":334,"value":610},{"type":328,"tag":391,"props":971,"children":972},{"style":471},[973],{"type":334,"value":615},{"type":328,"tag":391,"props":975,"children":976},{"style":447},[977],{"type":334,"value":468},{"type":328,"tag":391,"props":979,"children":980},{"style":471},[981],{"type":334,"value":624},{"type":328,"tag":391,"props":983,"children":984},{"style":447},[985],{"type":334,"value":822},{"type":328,"tag":391,"props":987,"children":988},{"style":410},[989],{"type":334,"value":435},{"type":328,"tag":391,"props":991,"children":992},{"class":393,"line":635},[993,997,1001,1005,1009,1013,1017,1021,1025],{"type":328,"tag":391,"props":994,"children":995},{"style":447},[996],{"type":334,"value":641},{"type":328,"tag":391,"props":998,"children":999},{"style":482},[1000],{"type":334,"value":485},{"type":328,"tag":391,"props":1002,"children":1003},{"style":404},[1004],{"type":334,"value":650},{"type":328,"tag":391,"props":1006,"children":1007},{"style":410},[1008],{"type":334,"value":413},{"type":328,"tag":391,"props":1010,"children":1011},{"style":657},[1012],{"type":334,"value":660},{"type":328,"tag":391,"props":1014,"children":1015},{"style":422},[1016],{"type":334,"value":425},{"type":328,"tag":391,"props":1018,"children":1019},{"style":447},[1020],{"type":334,"value":450},{"type":328,"tag":391,"props":1022,"children":1023},{"style":410},[1024],{"type":334,"value":573},{"type":328,"tag":391,"props":1026,"children":1027},{"style":422},[1028],{"type":334,"value":455},{"type":328,"tag":391,"props":1030,"children":1031},{"class":393,"line":679},[1032,1037,1041,1045,1049,1053,1057],{"type":328,"tag":391,"props":1033,"children":1034},{"style":447},[1035],{"type":334,"value":1036},"      startTime",{"type":328,"tag":391,"props":1038,"children":1039},{"style":471},[1040],{"type":334,"value":474},{"type":328,"tag":391,"props":1042,"children":1043},{"style":447},[1044],{"type":334,"value":479},{"type":328,"tag":391,"props":1046,"children":1047},{"style":482},[1048],{"type":334,"value":485},{"type":328,"tag":391,"props":1050,"children":1051},{"style":404},[1052],{"type":334,"value":490},{"type":328,"tag":391,"props":1054,"children":1055},{"style":410},[1056],{"type":334,"value":495},{"type":328,"tag":391,"props":1058,"children":1059},{"style":422},[1060],{"type":334,"value":455},{"type":328,"tag":391,"props":1062,"children":1063},{"class":393,"line":714},[1064],{"type":328,"tag":391,"props":1065,"children":1066},{"style":410},[1067],{"type":334,"value":720},{"type":328,"tag":391,"props":1069,"children":1070},{"class":393,"line":723},[1071,1075],{"type":328,"tag":391,"props":1072,"children":1073},{"style":410},[1074],{"type":334,"value":729},{"type":328,"tag":391,"props":1076,"children":1077},{"style":422},[1078],{"type":334,"value":455},{"type":328,"tag":391,"props":1080,"children":1081},{"class":393,"line":736},[1082,1087,1091,1095,1099,1104,1108,1112,1116],{"type":328,"tag":391,"props":1083,"children":1084},{"style":447},[1085],{"type":334,"value":1086},"  timer",{"type":328,"tag":391,"props":1088,"children":1089},{"style":471},[1090],{"type":334,"value":474},{"type":328,"tag":391,"props":1092,"children":1093},{"style":447},[1094],{"type":334,"value":550},{"type":328,"tag":391,"props":1096,"children":1097},{"style":482},[1098],{"type":334,"value":485},{"type":328,"tag":391,"props":1100,"children":1101},{"style":404},[1102],{"type":334,"value":1103},"RequestAnimationFrame",{"type":328,"tag":391,"props":1105,"children":1106},{"style":410},[1107],{"type":334,"value":413},{"type":328,"tag":391,"props":1109,"children":1110},{"style":447},[1111],{"type":334,"value":568},{"type":328,"tag":391,"props":1113,"children":1114},{"style":410},[1115],{"type":334,"value":573},{"type":328,"tag":391,"props":1117,"children":1118},{"style":422},[1119],{"type":334,"value":455},{"type":328,"tag":391,"props":1121,"children":1122},{"class":393,"line":769},[1123,1128,1132],{"type":328,"tag":391,"props":1124,"children":1125},{"style":584},[1126],{"type":334,"value":1127},"  return",{"type":328,"tag":391,"props":1129,"children":1130},{"style":447},[1131],{"type":334,"value":450},{"type":328,"tag":391,"props":1133,"children":1134},{"style":422},[1135],{"type":334,"value":455},{"type":328,"tag":391,"props":1137,"children":1139},{"class":393,"line":1138},13,[1140],{"type":328,"tag":391,"props":1141,"children":1142},{"style":410},[1143],{"type":334,"value":775},{"type":328,"tag":329,"props":1145,"children":1147},{"id":1146},"settimeout-实现-setinterval",[1148],{"type":334,"value":1149},"setTimeout 实现 setInterval",{"type":328,"tag":344,"props":1151,"children":1152},{},[1153],{"type":334,"value":1154},"不完整实现：",{"type":328,"tag":381,"props":1156,"children":1158},{"className":383,"code":1157,"language":385,"meta":323,"style":323},"const _setInterval = (fn, interval) => {\n  let timer;\n  const loop = () => {\n    timer = setTimeout(() => {\n      // timeout 时间之后会执行真正的函数 fn\n      fn();\n      // 同时再次调用 interval 本身\n      loop();\n    }, interval);\n  };\n  // 开始执行\n  loop();\n  // 返回用于关闭定时器的函数\n  return () => clearTimeout(timer);\n};\n\nlet cancelInterval = _setInterval(() => {\n  console.log(1);\n}, 300);\n\nsetTimeout(() => {\n  cancelInterval();\n  console.log(\"1s之后关闭定时器\");\n}, 1000);\n",[1159],{"type":328,"tag":361,"props":1160,"children":1161},{"__ignoreMap":323},[1162,1207,1222,1249,1278,1287,1302,1310,1326,1350,1361,1369,1385,1393,1430,1443,1453,1487,1523,1548,1556,1577,1594,1628],{"type":328,"tag":391,"props":1163,"children":1164},{"class":393,"line":394},[1165,1170,1174,1178,1182,1186,1190,1194,1199,1203],{"type":328,"tag":391,"props":1166,"children":1167},{"style":398},[1168],{"type":334,"value":1169},"const",{"type":328,"tag":391,"props":1171,"children":1172},{"style":404},[1173],{"type":334,"value":805},{"type":328,"tag":391,"props":1175,"children":1176},{"style":471},[1177],{"type":334,"value":474},{"type":328,"tag":391,"props":1179,"children":1180},{"style":410},[1181],{"type":334,"value":592},{"type":328,"tag":391,"props":1183,"children":1184},{"style":416},[1185],{"type":334,"value":419},{"type":328,"tag":391,"props":1187,"children":1188},{"style":422},[1189],{"type":334,"value":425},{"type":328,"tag":391,"props":1191,"children":1192},{"style":416},[1193],{"type":334,"value":822},{"type":328,"tag":391,"props":1195,"children":1196},{"style":410},[1197],{"type":334,"value":1198},") ",{"type":328,"tag":391,"props":1200,"children":1201},{"style":398},[1202],{"type":334,"value":527},{"type":328,"tag":391,"props":1204,"children":1205},{"style":410},[1206],{"type":334,"value":532},{"type":328,"tag":391,"props":1208,"children":1209},{"class":393,"line":438},[1210,1214,1218],{"type":328,"tag":391,"props":1211,"children":1212},{"style":398},[1213],{"type":334,"value":444},{"type":328,"tag":391,"props":1215,"children":1216},{"style":447},[1217],{"type":334,"value":450},{"type":328,"tag":391,"props":1219,"children":1220},{"style":422},[1221],{"type":334,"value":455},{"type":328,"tag":391,"props":1223,"children":1224},{"class":393,"line":458},[1225,1229,1233,1237,1241,1245],{"type":328,"tag":391,"props":1226,"children":1227},{"style":398},[1228],{"type":334,"value":508},{"type":328,"tag":391,"props":1230,"children":1231},{"style":404},[1232],{"type":334,"value":513},{"type":328,"tag":391,"props":1234,"children":1235},{"style":471},[1236],{"type":334,"value":474},{"type":328,"tag":391,"props":1238,"children":1239},{"style":410},[1240],{"type":334,"value":522},{"type":328,"tag":391,"props":1242,"children":1243},{"style":398},[1244],{"type":334,"value":527},{"type":328,"tag":391,"props":1246,"children":1247},{"style":410},[1248],{"type":334,"value":532},{"type":328,"tag":391,"props":1250,"children":1251},{"class":393,"line":502},[1252,1256,1260,1265,1270,1274],{"type":328,"tag":391,"props":1253,"children":1254},{"style":447},[1255],{"type":334,"value":541},{"type":328,"tag":391,"props":1257,"children":1258},{"style":471},[1259],{"type":334,"value":474},{"type":328,"tag":391,"props":1261,"children":1262},{"style":404},[1263],{"type":334,"value":1264}," setTimeout",{"type":328,"tag":391,"props":1266,"children":1267},{"style":410},[1268],{"type":334,"value":1269},"(() ",{"type":328,"tag":391,"props":1271,"children":1272},{"style":398},[1273],{"type":334,"value":527},{"type":328,"tag":391,"props":1275,"children":1276},{"style":410},[1277],{"type":334,"value":532},{"type":328,"tag":391,"props":1279,"children":1280},{"class":393,"line":535},[1281],{"type":328,"tag":391,"props":1282,"children":1284},{"style":1283},"--shiki-light:#357B42;--shiki-default:#357B42;--shiki-dark:#ACB6BF8C;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[1285],{"type":334,"value":1286},"      // timeout 时间之后会执行真正的函数 fn\n",{"type":328,"tag":391,"props":1288,"children":1289},{"class":393,"line":580},[1290,1294,1298],{"type":328,"tag":391,"props":1291,"children":1292},{"style":404},[1293],{"type":334,"value":641},{"type":328,"tag":391,"props":1295,"children":1296},{"style":410},[1297],{"type":334,"value":495},{"type":328,"tag":391,"props":1299,"children":1300},{"style":422},[1301],{"type":334,"value":455},{"type":328,"tag":391,"props":1303,"children":1304},{"class":393,"line":635},[1305],{"type":328,"tag":391,"props":1306,"children":1307},{"style":1283},[1308],{"type":334,"value":1309},"      // 同时再次调用 interval 本身\n",{"type":328,"tag":391,"props":1311,"children":1312},{"class":393,"line":679},[1313,1318,1322],{"type":328,"tag":391,"props":1314,"children":1315},{"style":404},[1316],{"type":334,"value":1317},"      loop",{"type":328,"tag":391,"props":1319,"children":1320},{"style":410},[1321],{"type":334,"value":495},{"type":328,"tag":391,"props":1323,"children":1324},{"style":422},[1325],{"type":334,"value":455},{"type":328,"tag":391,"props":1327,"children":1328},{"class":393,"line":714},[1329,1334,1338,1342,1346],{"type":328,"tag":391,"props":1330,"children":1331},{"style":410},[1332],{"type":334,"value":1333},"    }",{"type":328,"tag":391,"props":1335,"children":1336},{"style":422},[1337],{"type":334,"value":425},{"type":328,"tag":391,"props":1339,"children":1340},{"style":447},[1341],{"type":334,"value":822},{"type":328,"tag":391,"props":1343,"children":1344},{"style":410},[1345],{"type":334,"value":573},{"type":328,"tag":391,"props":1347,"children":1348},{"style":422},[1349],{"type":334,"value":455},{"type":328,"tag":391,"props":1351,"children":1352},{"class":393,"line":723},[1353,1357],{"type":328,"tag":391,"props":1354,"children":1355},{"style":410},[1356],{"type":334,"value":729},{"type":328,"tag":391,"props":1358,"children":1359},{"style":422},[1360],{"type":334,"value":455},{"type":328,"tag":391,"props":1362,"children":1363},{"class":393,"line":736},[1364],{"type":328,"tag":391,"props":1365,"children":1366},{"style":1283},[1367],{"type":334,"value":1368},"  // 开始执行\n",{"type":328,"tag":391,"props":1370,"children":1371},{"class":393,"line":769},[1372,1377,1381],{"type":328,"tag":391,"props":1373,"children":1374},{"style":404},[1375],{"type":334,"value":1376},"  loop",{"type":328,"tag":391,"props":1378,"children":1379},{"style":410},[1380],{"type":334,"value":495},{"type":328,"tag":391,"props":1382,"children":1383},{"style":422},[1384],{"type":334,"value":455},{"type":328,"tag":391,"props":1386,"children":1387},{"class":393,"line":1138},[1388],{"type":328,"tag":391,"props":1389,"children":1390},{"style":1283},[1391],{"type":334,"value":1392},"  // 返回用于关闭定时器的函数\n",{"type":328,"tag":391,"props":1394,"children":1396},{"class":393,"line":1395},14,[1397,1401,1405,1409,1414,1418,1422,1426],{"type":328,"tag":391,"props":1398,"children":1399},{"style":584},[1400],{"type":334,"value":1127},{"type":328,"tag":391,"props":1402,"children":1403},{"style":410},[1404],{"type":334,"value":522},{"type":328,"tag":391,"props":1406,"children":1407},{"style":398},[1408],{"type":334,"value":527},{"type":328,"tag":391,"props":1410,"children":1411},{"style":404},[1412],{"type":334,"value":1413}," clearTimeout",{"type":328,"tag":391,"props":1415,"children":1416},{"style":410},[1417],{"type":334,"value":413},{"type":328,"tag":391,"props":1419,"children":1420},{"style":447},[1421],{"type":334,"value":703},{"type":328,"tag":391,"props":1423,"children":1424},{"style":410},[1425],{"type":334,"value":573},{"type":328,"tag":391,"props":1427,"children":1428},{"style":422},[1429],{"type":334,"value":455},{"type":328,"tag":391,"props":1431,"children":1433},{"class":393,"line":1432},15,[1434,1439],{"type":328,"tag":391,"props":1435,"children":1436},{"style":410},[1437],{"type":334,"value":1438},"}",{"type":328,"tag":391,"props":1440,"children":1441},{"style":422},[1442],{"type":334,"value":455},{"type":328,"tag":391,"props":1444,"children":1446},{"class":393,"line":1445},16,[1447],{"type":328,"tag":391,"props":1448,"children":1450},{"emptyLinePlaceholder":1449},true,[1451],{"type":334,"value":1452},"\n",{"type":328,"tag":391,"props":1454,"children":1456},{"class":393,"line":1455},17,[1457,1462,1467,1471,1475,1479,1483],{"type":328,"tag":391,"props":1458,"children":1459},{"style":398},[1460],{"type":334,"value":1461},"let",{"type":328,"tag":391,"props":1463,"children":1464},{"style":447},[1465],{"type":334,"value":1466}," cancelInterval",{"type":328,"tag":391,"props":1468,"children":1469},{"style":471},[1470],{"type":334,"value":474},{"type":328,"tag":391,"props":1472,"children":1473},{"style":404},[1474],{"type":334,"value":805},{"type":328,"tag":391,"props":1476,"children":1477},{"style":410},[1478],{"type":334,"value":1269},{"type":328,"tag":391,"props":1480,"children":1481},{"style":398},[1482],{"type":334,"value":527},{"type":328,"tag":391,"props":1484,"children":1485},{"style":410},[1486],{"type":334,"value":532},{"type":328,"tag":391,"props":1488,"children":1490},{"class":393,"line":1489},18,[1491,1496,1500,1505,1509,1515,1519],{"type":328,"tag":391,"props":1492,"children":1493},{"style":447},[1494],{"type":334,"value":1495},"  console",{"type":328,"tag":391,"props":1497,"children":1498},{"style":482},[1499],{"type":334,"value":485},{"type":328,"tag":391,"props":1501,"children":1502},{"style":404},[1503],{"type":334,"value":1504},"log",{"type":328,"tag":391,"props":1506,"children":1507},{"style":410},[1508],{"type":334,"value":413},{"type":328,"tag":391,"props":1510,"children":1512},{"style":1511},"--shiki-light:#174781;--shiki-default:#174781;--shiki-dark:#D2A6FF",[1513],{"type":334,"value":1514},"1",{"type":328,"tag":391,"props":1516,"children":1517},{"style":410},[1518],{"type":334,"value":573},{"type":328,"tag":391,"props":1520,"children":1521},{"style":422},[1522],{"type":334,"value":455},{"type":328,"tag":391,"props":1524,"children":1526},{"class":393,"line":1525},19,[1527,1531,1535,1540,1544],{"type":328,"tag":391,"props":1528,"children":1529},{"style":410},[1530],{"type":334,"value":1438},{"type":328,"tag":391,"props":1532,"children":1533},{"style":422},[1534],{"type":334,"value":425},{"type":328,"tag":391,"props":1536,"children":1537},{"style":1511},[1538],{"type":334,"value":1539}," 300",{"type":328,"tag":391,"props":1541,"children":1542},{"style":410},[1543],{"type":334,"value":573},{"type":328,"tag":391,"props":1545,"children":1546},{"style":422},[1547],{"type":334,"value":455},{"type":328,"tag":391,"props":1549,"children":1551},{"class":393,"line":1550},20,[1552],{"type":328,"tag":391,"props":1553,"children":1554},{"emptyLinePlaceholder":1449},[1555],{"type":334,"value":1452},{"type":328,"tag":391,"props":1557,"children":1559},{"class":393,"line":1558},21,[1560,1565,1569,1573],{"type":328,"tag":391,"props":1561,"children":1562},{"style":404},[1563],{"type":334,"value":1564},"setTimeout",{"type":328,"tag":391,"props":1566,"children":1567},{"style":410},[1568],{"type":334,"value":1269},{"type":328,"tag":391,"props":1570,"children":1571},{"style":398},[1572],{"type":334,"value":527},{"type":328,"tag":391,"props":1574,"children":1575},{"style":410},[1576],{"type":334,"value":532},{"type":328,"tag":391,"props":1578,"children":1580},{"class":393,"line":1579},22,[1581,1586,1590],{"type":328,"tag":391,"props":1582,"children":1583},{"style":404},[1584],{"type":334,"value":1585},"  cancelInterval",{"type":328,"tag":391,"props":1587,"children":1588},{"style":410},[1589],{"type":334,"value":495},{"type":328,"tag":391,"props":1591,"children":1592},{"style":422},[1593],{"type":334,"value":455},{"type":328,"tag":391,"props":1595,"children":1597},{"class":393,"line":1596},23,[1598,1602,1606,1610,1614,1620,1624],{"type":328,"tag":391,"props":1599,"children":1600},{"style":447},[1601],{"type":334,"value":1495},{"type":328,"tag":391,"props":1603,"children":1604},{"style":482},[1605],{"type":334,"value":485},{"type":328,"tag":391,"props":1607,"children":1608},{"style":404},[1609],{"type":334,"value":1504},{"type":328,"tag":391,"props":1611,"children":1612},{"style":410},[1613],{"type":334,"value":413},{"type":328,"tag":391,"props":1615,"children":1617},{"style":1616},"--shiki-light:#A44185;--shiki-default:#A44185;--shiki-dark:#AAD94C",[1618],{"type":334,"value":1619},"\"1s之后关闭定时器\"",{"type":328,"tag":391,"props":1621,"children":1622},{"style":410},[1623],{"type":334,"value":573},{"type":328,"tag":391,"props":1625,"children":1626},{"style":422},[1627],{"type":334,"value":455},{"type":328,"tag":391,"props":1629,"children":1631},{"class":393,"line":1630},24,[1632,1636,1640,1645,1649],{"type":328,"tag":391,"props":1633,"children":1634},{"style":410},[1635],{"type":334,"value":1438},{"type":328,"tag":391,"props":1637,"children":1638},{"style":422},[1639],{"type":334,"value":425},{"type":328,"tag":391,"props":1641,"children":1642},{"style":1511},[1643],{"type":334,"value":1644}," 1000",{"type":328,"tag":391,"props":1646,"children":1647},{"style":410},[1648],{"type":334,"value":573},{"type":328,"tag":391,"props":1650,"children":1651},{"style":422},[1652],{"type":334,"value":455},{"type":328,"tag":344,"props":1654,"children":1655},{},[1656],{"type":334,"value":1657},"另一种方案：",{"type":328,"tag":381,"props":1659,"children":1661},{"className":383,"code":1660,"language":385,"meta":323,"style":323},"function _setInterval(handler, timeout, ...args) {\n  // 判断是否为浏览器环境\n  let isBrowser = typeof window !== \"undefined\";\n  if (isBrowser && this !== window) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  let timer = {};\n  if (isBrowser) {\n    // 浏览器上的处理\n    timer = {\n      value: -1,\n      valueOf() {\n        return this.value;\n      },\n    };\n    const callback = () => {\n      timer.value = setTimeout(callback, timeout);\n      handler.apply(this, args);\n    };\n    timer.value = setTimeout(callback, timeout);\n  } else {\n    // nodejs 的处理\n    const callback = () => {\n      Object.assign(timer, setTimeout(callback, timeout));\n      handler.apply(this, args);\n    };\n    Object.assign(timer, setTimeout(callback, timeout));\n  }\n  return timer;\n}\n",[1662],{"type":328,"tag":361,"props":1663,"children":1664},{"__ignoreMap":323},[1665,1711,1719,1758,1797,1832,1840,1864,1883,1891,1906,1933,1946,1971,1983,1994,2023,2072,2114,2125,2172,2189,2197,2224,2282,2322,2334,2391,2399,2415],{"type":328,"tag":391,"props":1666,"children":1667},{"class":393,"line":394},[1668,1672,1676,1680,1685,1689,1693,1697,1702,1707],{"type":328,"tag":391,"props":1669,"children":1670},{"style":398},[1671],{"type":334,"value":401},{"type":328,"tag":391,"props":1673,"children":1674},{"style":404},[1675],{"type":334,"value":805},{"type":328,"tag":391,"props":1677,"children":1678},{"style":410},[1679],{"type":334,"value":413},{"type":328,"tag":391,"props":1681,"children":1682},{"style":416},[1683],{"type":334,"value":1684},"handler",{"type":328,"tag":391,"props":1686,"children":1687},{"style":422},[1688],{"type":334,"value":425},{"type":328,"tag":391,"props":1690,"children":1691},{"style":416},[1692],{"type":334,"value":430},{"type":328,"tag":391,"props":1694,"children":1695},{"style":422},[1696],{"type":334,"value":425},{"type":328,"tag":391,"props":1698,"children":1699},{"style":471},[1700],{"type":334,"value":1701}," ...",{"type":328,"tag":391,"props":1703,"children":1704},{"style":416},[1705],{"type":334,"value":1706},"args",{"type":328,"tag":391,"props":1708,"children":1709},{"style":410},[1710],{"type":334,"value":435},{"type":328,"tag":391,"props":1712,"children":1713},{"class":393,"line":438},[1714],{"type":328,"tag":391,"props":1715,"children":1716},{"style":1283},[1717],{"type":334,"value":1718},"  // 判断是否为浏览器环境\n",{"type":328,"tag":391,"props":1720,"children":1721},{"class":393,"line":458},[1722,1726,1731,1735,1740,1744,1749,1754],{"type":328,"tag":391,"props":1723,"children":1724},{"style":398},[1725],{"type":334,"value":444},{"type":328,"tag":391,"props":1727,"children":1728},{"style":447},[1729],{"type":334,"value":1730}," isBrowser",{"type":328,"tag":391,"props":1732,"children":1733},{"style":471},[1734],{"type":334,"value":474},{"type":328,"tag":391,"props":1736,"children":1737},{"style":471},[1738],{"type":334,"value":1739}," typeof",{"type":328,"tag":391,"props":1741,"children":1742},{"style":447},[1743],{"type":334,"value":550},{"type":328,"tag":391,"props":1745,"children":1746},{"style":471},[1747],{"type":334,"value":1748}," !==",{"type":328,"tag":391,"props":1750,"children":1751},{"style":1616},[1752],{"type":334,"value":1753}," \"undefined\"",{"type":328,"tag":391,"props":1755,"children":1756},{"style":422},[1757],{"type":334,"value":455},{"type":328,"tag":391,"props":1759,"children":1760},{"class":393,"line":502},[1761,1766,1770,1775,1780,1785,1789,1793],{"type":328,"tag":391,"props":1762,"children":1763},{"style":584},[1764],{"type":334,"value":1765},"  if",{"type":328,"tag":391,"props":1767,"children":1768},{"style":410},[1769],{"type":334,"value":592},{"type":328,"tag":391,"props":1771,"children":1772},{"style":447},[1773],{"type":334,"value":1774},"isBrowser",{"type":328,"tag":391,"props":1776,"children":1777},{"style":471},[1778],{"type":334,"value":1779}," &&",{"type":328,"tag":391,"props":1781,"children":1782},{"style":657},[1783],{"type":334,"value":1784}," this",{"type":328,"tag":391,"props":1786,"children":1787},{"style":471},[1788],{"type":334,"value":1748},{"type":328,"tag":391,"props":1790,"children":1791},{"style":447},[1792],{"type":334,"value":550},{"type":328,"tag":391,"props":1794,"children":1795},{"style":410},[1796],{"type":334,"value":435},{"type":328,"tag":391,"props":1798,"children":1799},{"class":393,"line":535},[1800,1805,1810,1815,1819,1824,1828],{"type":328,"tag":391,"props":1801,"children":1802},{"style":584},[1803],{"type":334,"value":1804},"    throw",{"type":328,"tag":391,"props":1806,"children":1807},{"style":471},[1808],{"type":334,"value":1809}," new",{"type":328,"tag":391,"props":1811,"children":1812},{"style":404},[1813],{"type":334,"value":1814}," TypeError",{"type":328,"tag":391,"props":1816,"children":1817},{"style":410},[1818],{"type":334,"value":413},{"type":328,"tag":391,"props":1820,"children":1821},{"style":1616},[1822],{"type":334,"value":1823},"\"Illegal invocation\"",{"type":328,"tag":391,"props":1825,"children":1826},{"style":410},[1827],{"type":334,"value":573},{"type":328,"tag":391,"props":1829,"children":1830},{"style":422},[1831],{"type":334,"value":455},{"type":328,"tag":391,"props":1833,"children":1834},{"class":393,"line":580},[1835],{"type":328,"tag":391,"props":1836,"children":1837},{"style":410},[1838],{"type":334,"value":1839},"  }\n",{"type":328,"tag":391,"props":1841,"children":1842},{"class":393,"line":635},[1843,1847,1851,1855,1860],{"type":328,"tag":391,"props":1844,"children":1845},{"style":398},[1846],{"type":334,"value":444},{"type":328,"tag":391,"props":1848,"children":1849},{"style":447},[1850],{"type":334,"value":450},{"type":328,"tag":391,"props":1852,"children":1853},{"style":471},[1854],{"type":334,"value":474},{"type":328,"tag":391,"props":1856,"children":1857},{"style":410},[1858],{"type":334,"value":1859}," {}",{"type":328,"tag":391,"props":1861,"children":1862},{"style":422},[1863],{"type":334,"value":455},{"type":328,"tag":391,"props":1865,"children":1866},{"class":393,"line":679},[1867,1871,1875,1879],{"type":328,"tag":391,"props":1868,"children":1869},{"style":584},[1870],{"type":334,"value":1765},{"type":328,"tag":391,"props":1872,"children":1873},{"style":410},[1874],{"type":334,"value":592},{"type":328,"tag":391,"props":1876,"children":1877},{"style":447},[1878],{"type":334,"value":1774},{"type":328,"tag":391,"props":1880,"children":1881},{"style":410},[1882],{"type":334,"value":435},{"type":328,"tag":391,"props":1884,"children":1885},{"class":393,"line":714},[1886],{"type":328,"tag":391,"props":1887,"children":1888},{"style":1283},[1889],{"type":334,"value":1890},"    // 浏览器上的处理\n",{"type":328,"tag":391,"props":1892,"children":1893},{"class":393,"line":723},[1894,1898,1902],{"type":328,"tag":391,"props":1895,"children":1896},{"style":447},[1897],{"type":334,"value":541},{"type":328,"tag":391,"props":1899,"children":1900},{"style":471},[1901],{"type":334,"value":474},{"type":328,"tag":391,"props":1903,"children":1904},{"style":410},[1905],{"type":334,"value":532},{"type":328,"tag":391,"props":1907,"children":1908},{"class":393,"line":736},[1909,1914,1919,1924,1928],{"type":328,"tag":391,"props":1910,"children":1911},{"style":410},[1912],{"type":334,"value":1913},"      value",{"type":328,"tag":391,"props":1915,"children":1916},{"style":422},[1917],{"type":334,"value":1918},":",{"type":328,"tag":391,"props":1920,"children":1921},{"style":471},[1922],{"type":334,"value":1923}," -",{"type":328,"tag":391,"props":1925,"children":1926},{"style":1511},[1927],{"type":334,"value":1514},{"type":328,"tag":391,"props":1929,"children":1930},{"style":422},[1931],{"type":334,"value":1932},",\n",{"type":328,"tag":391,"props":1934,"children":1935},{"class":393,"line":769},[1936,1941],{"type":328,"tag":391,"props":1937,"children":1938},{"style":404},[1939],{"type":334,"value":1940},"      valueOf",{"type":328,"tag":391,"props":1942,"children":1943},{"style":410},[1944],{"type":334,"value":1945},"() {\n",{"type":328,"tag":391,"props":1947,"children":1948},{"class":393,"line":1138},[1949,1954,1958,1962,1967],{"type":328,"tag":391,"props":1950,"children":1951},{"style":584},[1952],{"type":334,"value":1953},"        return",{"type":328,"tag":391,"props":1955,"children":1956},{"style":657},[1957],{"type":334,"value":1784},{"type":328,"tag":391,"props":1959,"children":1960},{"style":482},[1961],{"type":334,"value":485},{"type":328,"tag":391,"props":1963,"children":1964},{"style":447},[1965],{"type":334,"value":1966},"value",{"type":328,"tag":391,"props":1968,"children":1969},{"style":422},[1970],{"type":334,"value":455},{"type":328,"tag":391,"props":1972,"children":1973},{"class":393,"line":1395},[1974,1979],{"type":328,"tag":391,"props":1975,"children":1976},{"style":410},[1977],{"type":334,"value":1978},"      }",{"type":328,"tag":391,"props":1980,"children":1981},{"style":422},[1982],{"type":334,"value":1932},{"type":328,"tag":391,"props":1984,"children":1985},{"class":393,"line":1432},[1986,1990],{"type":328,"tag":391,"props":1987,"children":1988},{"style":410},[1989],{"type":334,"value":1333},{"type":328,"tag":391,"props":1991,"children":1992},{"style":422},[1993],{"type":334,"value":455},{"type":328,"tag":391,"props":1995,"children":1996},{"class":393,"line":1445},[1997,2002,2007,2011,2015,2019],{"type":328,"tag":391,"props":1998,"children":1999},{"style":398},[2000],{"type":334,"value":2001},"    const",{"type":328,"tag":391,"props":2003,"children":2004},{"style":404},[2005],{"type":334,"value":2006}," callback",{"type":328,"tag":391,"props":2008,"children":2009},{"style":471},[2010],{"type":334,"value":474},{"type":328,"tag":391,"props":2012,"children":2013},{"style":410},[2014],{"type":334,"value":522},{"type":328,"tag":391,"props":2016,"children":2017},{"style":398},[2018],{"type":334,"value":527},{"type":328,"tag":391,"props":2020,"children":2021},{"style":410},[2022],{"type":334,"value":532},{"type":328,"tag":391,"props":2024,"children":2025},{"class":393,"line":1455},[2026,2031,2035,2039,2043,2047,2051,2056,2060,2064,2068],{"type":328,"tag":391,"props":2027,"children":2028},{"style":447},[2029],{"type":334,"value":2030},"      timer",{"type":328,"tag":391,"props":2032,"children":2033},{"style":482},[2034],{"type":334,"value":485},{"type":328,"tag":391,"props":2036,"children":2037},{"style":447},[2038],{"type":334,"value":1966},{"type":328,"tag":391,"props":2040,"children":2041},{"style":471},[2042],{"type":334,"value":474},{"type":328,"tag":391,"props":2044,"children":2045},{"style":404},[2046],{"type":334,"value":1264},{"type":328,"tag":391,"props":2048,"children":2049},{"style":410},[2050],{"type":334,"value":413},{"type":328,"tag":391,"props":2052,"children":2053},{"style":447},[2054],{"type":334,"value":2055},"callback",{"type":328,"tag":391,"props":2057,"children":2058},{"style":422},[2059],{"type":334,"value":425},{"type":328,"tag":391,"props":2061,"children":2062},{"style":447},[2063],{"type":334,"value":430},{"type":328,"tag":391,"props":2065,"children":2066},{"style":410},[2067],{"type":334,"value":573},{"type":328,"tag":391,"props":2069,"children":2070},{"style":422},[2071],{"type":334,"value":455},{"type":328,"tag":391,"props":2073,"children":2074},{"class":393,"line":1489},[2075,2080,2084,2089,2093,2097,2101,2106,2110],{"type":328,"tag":391,"props":2076,"children":2077},{"style":447},[2078],{"type":334,"value":2079},"      handler",{"type":328,"tag":391,"props":2081,"children":2082},{"style":482},[2083],{"type":334,"value":485},{"type":328,"tag":391,"props":2085,"children":2086},{"style":404},[2087],{"type":334,"value":2088},"apply",{"type":328,"tag":391,"props":2090,"children":2091},{"style":410},[2092],{"type":334,"value":413},{"type":328,"tag":391,"props":2094,"children":2095},{"style":657},[2096],{"type":334,"value":660},{"type":328,"tag":391,"props":2098,"children":2099},{"style":422},[2100],{"type":334,"value":425},{"type":328,"tag":391,"props":2102,"children":2103},{"style":447},[2104],{"type":334,"value":2105}," args",{"type":328,"tag":391,"props":2107,"children":2108},{"style":410},[2109],{"type":334,"value":573},{"type":328,"tag":391,"props":2111,"children":2112},{"style":422},[2113],{"type":334,"value":455},{"type":328,"tag":391,"props":2115,"children":2116},{"class":393,"line":1525},[2117,2121],{"type":328,"tag":391,"props":2118,"children":2119},{"style":410},[2120],{"type":334,"value":1333},{"type":328,"tag":391,"props":2122,"children":2123},{"style":422},[2124],{"type":334,"value":455},{"type":328,"tag":391,"props":2126,"children":2127},{"class":393,"line":1550},[2128,2132,2136,2140,2144,2148,2152,2156,2160,2164,2168],{"type":328,"tag":391,"props":2129,"children":2130},{"style":447},[2131],{"type":334,"value":541},{"type":328,"tag":391,"props":2133,"children":2134},{"style":482},[2135],{"type":334,"value":485},{"type":328,"tag":391,"props":2137,"children":2138},{"style":447},[2139],{"type":334,"value":1966},{"type":328,"tag":391,"props":2141,"children":2142},{"style":471},[2143],{"type":334,"value":474},{"type":328,"tag":391,"props":2145,"children":2146},{"style":404},[2147],{"type":334,"value":1264},{"type":328,"tag":391,"props":2149,"children":2150},{"style":410},[2151],{"type":334,"value":413},{"type":328,"tag":391,"props":2153,"children":2154},{"style":447},[2155],{"type":334,"value":2055},{"type":328,"tag":391,"props":2157,"children":2158},{"style":422},[2159],{"type":334,"value":425},{"type":328,"tag":391,"props":2161,"children":2162},{"style":447},[2163],{"type":334,"value":430},{"type":328,"tag":391,"props":2165,"children":2166},{"style":410},[2167],{"type":334,"value":573},{"type":328,"tag":391,"props":2169,"children":2170},{"style":422},[2171],{"type":334,"value":455},{"type":328,"tag":391,"props":2173,"children":2174},{"class":393,"line":1558},[2175,2180,2185],{"type":328,"tag":391,"props":2176,"children":2177},{"style":410},[2178],{"type":334,"value":2179},"  } ",{"type":328,"tag":391,"props":2181,"children":2182},{"style":584},[2183],{"type":334,"value":2184},"else",{"type":328,"tag":391,"props":2186,"children":2187},{"style":410},[2188],{"type":334,"value":532},{"type":328,"tag":391,"props":2190,"children":2191},{"class":393,"line":1579},[2192],{"type":328,"tag":391,"props":2193,"children":2194},{"style":1283},[2195],{"type":334,"value":2196},"    // nodejs 的处理\n",{"type":328,"tag":391,"props":2198,"children":2199},{"class":393,"line":1596},[2200,2204,2208,2212,2216,2220],{"type":328,"tag":391,"props":2201,"children":2202},{"style":398},[2203],{"type":334,"value":2001},{"type":328,"tag":391,"props":2205,"children":2206},{"style":404},[2207],{"type":334,"value":2006},{"type":328,"tag":391,"props":2209,"children":2210},{"style":471},[2211],{"type":334,"value":474},{"type":328,"tag":391,"props":2213,"children":2214},{"style":410},[2215],{"type":334,"value":522},{"type":328,"tag":391,"props":2217,"children":2218},{"style":398},[2219],{"type":334,"value":527},{"type":328,"tag":391,"props":2221,"children":2222},{"style":410},[2223],{"type":334,"value":532},{"type":328,"tag":391,"props":2225,"children":2226},{"class":393,"line":1630},[2227,2232,2236,2241,2245,2249,2253,2257,2261,2265,2269,2273,2278],{"type":328,"tag":391,"props":2228,"children":2229},{"style":447},[2230],{"type":334,"value":2231},"      Object",{"type":328,"tag":391,"props":2233,"children":2234},{"style":482},[2235],{"type":334,"value":485},{"type":328,"tag":391,"props":2237,"children":2238},{"style":404},[2239],{"type":334,"value":2240},"assign",{"type":328,"tag":391,"props":2242,"children":2243},{"style":410},[2244],{"type":334,"value":413},{"type":328,"tag":391,"props":2246,"children":2247},{"style":447},[2248],{"type":334,"value":703},{"type":328,"tag":391,"props":2250,"children":2251},{"style":422},[2252],{"type":334,"value":425},{"type":328,"tag":391,"props":2254,"children":2255},{"style":404},[2256],{"type":334,"value":1264},{"type":328,"tag":391,"props":2258,"children":2259},{"style":410},[2260],{"type":334,"value":413},{"type":328,"tag":391,"props":2262,"children":2263},{"style":447},[2264],{"type":334,"value":2055},{"type":328,"tag":391,"props":2266,"children":2267},{"style":422},[2268],{"type":334,"value":425},{"type":328,"tag":391,"props":2270,"children":2271},{"style":447},[2272],{"type":334,"value":430},{"type":328,"tag":391,"props":2274,"children":2275},{"style":410},[2276],{"type":334,"value":2277},"))",{"type":328,"tag":391,"props":2279,"children":2280},{"style":422},[2281],{"type":334,"value":455},{"type":328,"tag":391,"props":2283,"children":2285},{"class":393,"line":2284},25,[2286,2290,2294,2298,2302,2306,2310,2314,2318],{"type":328,"tag":391,"props":2287,"children":2288},{"style":447},[2289],{"type":334,"value":2079},{"type":328,"tag":391,"props":2291,"children":2292},{"style":482},[2293],{"type":334,"value":485},{"type":328,"tag":391,"props":2295,"children":2296},{"style":404},[2297],{"type":334,"value":2088},{"type":328,"tag":391,"props":2299,"children":2300},{"style":410},[2301],{"type":334,"value":413},{"type":328,"tag":391,"props":2303,"children":2304},{"style":657},[2305],{"type":334,"value":660},{"type":328,"tag":391,"props":2307,"children":2308},{"style":422},[2309],{"type":334,"value":425},{"type":328,"tag":391,"props":2311,"children":2312},{"style":447},[2313],{"type":334,"value":2105},{"type":328,"tag":391,"props":2315,"children":2316},{"style":410},[2317],{"type":334,"value":573},{"type":328,"tag":391,"props":2319,"children":2320},{"style":422},[2321],{"type":334,"value":455},{"type":328,"tag":391,"props":2323,"children":2325},{"class":393,"line":2324},26,[2326,2330],{"type":328,"tag":391,"props":2327,"children":2328},{"style":410},[2329],{"type":334,"value":1333},{"type":328,"tag":391,"props":2331,"children":2332},{"style":422},[2333],{"type":334,"value":455},{"type":328,"tag":391,"props":2335,"children":2337},{"class":393,"line":2336},27,[2338,2343,2347,2351,2355,2359,2363,2367,2371,2375,2379,2383,2387],{"type":328,"tag":391,"props":2339,"children":2340},{"style":447},[2341],{"type":334,"value":2342},"    Object",{"type":328,"tag":391,"props":2344,"children":2345},{"style":482},[2346],{"type":334,"value":485},{"type":328,"tag":391,"props":2348,"children":2349},{"style":404},[2350],{"type":334,"value":2240},{"type":328,"tag":391,"props":2352,"children":2353},{"style":410},[2354],{"type":334,"value":413},{"type":328,"tag":391,"props":2356,"children":2357},{"style":447},[2358],{"type":334,"value":703},{"type":328,"tag":391,"props":2360,"children":2361},{"style":422},[2362],{"type":334,"value":425},{"type":328,"tag":391,"props":2364,"children":2365},{"style":404},[2366],{"type":334,"value":1264},{"type":328,"tag":391,"props":2368,"children":2369},{"style":410},[2370],{"type":334,"value":413},{"type":328,"tag":391,"props":2372,"children":2373},{"style":447},[2374],{"type":334,"value":2055},{"type":328,"tag":391,"props":2376,"children":2377},{"style":422},[2378],{"type":334,"value":425},{"type":328,"tag":391,"props":2380,"children":2381},{"style":447},[2382],{"type":334,"value":430},{"type":328,"tag":391,"props":2384,"children":2385},{"style":410},[2386],{"type":334,"value":2277},{"type":328,"tag":391,"props":2388,"children":2389},{"style":422},[2390],{"type":334,"value":455},{"type":328,"tag":391,"props":2392,"children":2394},{"class":393,"line":2393},28,[2395],{"type":328,"tag":391,"props":2396,"children":2397},{"style":410},[2398],{"type":334,"value":1839},{"type":328,"tag":391,"props":2400,"children":2402},{"class":393,"line":2401},29,[2403,2407,2411],{"type":328,"tag":391,"props":2404,"children":2405},{"style":584},[2406],{"type":334,"value":1127},{"type":328,"tag":391,"props":2408,"children":2409},{"style":447},[2410],{"type":334,"value":450},{"type":328,"tag":391,"props":2412,"children":2413},{"style":422},[2414],{"type":334,"value":455},{"type":328,"tag":391,"props":2416,"children":2418},{"class":393,"line":2417},30,[2419],{"type":328,"tag":391,"props":2420,"children":2421},{"style":410},[2422],{"type":334,"value":775},{"type":328,"tag":329,"props":2424,"children":2426},{"id":2425},"setinterval-模拟-settimeout",[2427],{"type":334,"value":2428},"setInterval 模拟 setTimeout",{"type":328,"tag":344,"props":2430,"children":2431},{},[2432],{"type":334,"value":2433},"思路：setTimeout 的特性是在指定的时间内只执行一次，我们只要在 setInterval 内部执行 callback 之后，把定时器关掉即可。",{"type":328,"tag":381,"props":2435,"children":2437},{"className":383,"code":2436,"language":385,"meta":323,"style":323},"const _setTimeout = (fn, timeout) => {\n  let timer = null;\n  timer = setInterval(() => {\n    // 关闭定时器，保证只执行一次fn，也就达到了setTimeout的效果了\n    clearInterval(timer);\n    fn();\n  }, timeout);\n  // 返回用于关闭定时器的方法\n  return () => clearInterval(timer);\n};\n\nlet cancelTimeout = _setTimeout(() => {\n  console.log(\"1s 后打印出 1\");\n}, 1000);\n",[2438],{"type":328,"tag":361,"props":2439,"children":2440},{"__ignoreMap":323},[2441,2484,2508,2536,2544,2568,2584,2607,2615,2651,2662,2669,2701,2733],{"type":328,"tag":391,"props":2442,"children":2443},{"class":393,"line":394},[2444,2448,2452,2456,2460,2464,2468,2472,2476,2480],{"type":328,"tag":391,"props":2445,"children":2446},{"style":398},[2447],{"type":334,"value":1169},{"type":328,"tag":391,"props":2449,"children":2450},{"style":404},[2451],{"type":334,"value":407},{"type":328,"tag":391,"props":2453,"children":2454},{"style":471},[2455],{"type":334,"value":474},{"type":328,"tag":391,"props":2457,"children":2458},{"style":410},[2459],{"type":334,"value":592},{"type":328,"tag":391,"props":2461,"children":2462},{"style":416},[2463],{"type":334,"value":419},{"type":328,"tag":391,"props":2465,"children":2466},{"style":422},[2467],{"type":334,"value":425},{"type":328,"tag":391,"props":2469,"children":2470},{"style":416},[2471],{"type":334,"value":430},{"type":328,"tag":391,"props":2473,"children":2474},{"style":410},[2475],{"type":334,"value":1198},{"type":328,"tag":391,"props":2477,"children":2478},{"style":398},[2479],{"type":334,"value":527},{"type":328,"tag":391,"props":2481,"children":2482},{"style":410},[2483],{"type":334,"value":532},{"type":328,"tag":391,"props":2485,"children":2486},{"class":393,"line":438},[2487,2491,2495,2499,2504],{"type":328,"tag":391,"props":2488,"children":2489},{"style":398},[2490],{"type":334,"value":444},{"type":328,"tag":391,"props":2492,"children":2493},{"style":447},[2494],{"type":334,"value":450},{"type":328,"tag":391,"props":2496,"children":2497},{"style":471},[2498],{"type":334,"value":474},{"type":328,"tag":391,"props":2500,"children":2501},{"style":1511},[2502],{"type":334,"value":2503}," null",{"type":328,"tag":391,"props":2505,"children":2506},{"style":422},[2507],{"type":334,"value":455},{"type":328,"tag":391,"props":2509,"children":2510},{"class":393,"line":458},[2511,2515,2519,2524,2528,2532],{"type":328,"tag":391,"props":2512,"children":2513},{"style":447},[2514],{"type":334,"value":1086},{"type":328,"tag":391,"props":2516,"children":2517},{"style":471},[2518],{"type":334,"value":474},{"type":328,"tag":391,"props":2520,"children":2521},{"style":404},[2522],{"type":334,"value":2523}," setInterval",{"type":328,"tag":391,"props":2525,"children":2526},{"style":410},[2527],{"type":334,"value":1269},{"type":328,"tag":391,"props":2529,"children":2530},{"style":398},[2531],{"type":334,"value":527},{"type":328,"tag":391,"props":2533,"children":2534},{"style":410},[2535],{"type":334,"value":532},{"type":328,"tag":391,"props":2537,"children":2538},{"class":393,"line":502},[2539],{"type":328,"tag":391,"props":2540,"children":2541},{"style":1283},[2542],{"type":334,"value":2543},"    // 关闭定时器，保证只执行一次fn，也就达到了setTimeout的效果了\n",{"type":328,"tag":391,"props":2545,"children":2546},{"class":393,"line":535},[2547,2552,2556,2560,2564],{"type":328,"tag":391,"props":2548,"children":2549},{"style":404},[2550],{"type":334,"value":2551},"    clearInterval",{"type":328,"tag":391,"props":2553,"children":2554},{"style":410},[2555],{"type":334,"value":413},{"type":328,"tag":391,"props":2557,"children":2558},{"style":447},[2559],{"type":334,"value":703},{"type":328,"tag":391,"props":2561,"children":2562},{"style":410},[2563],{"type":334,"value":573},{"type":328,"tag":391,"props":2565,"children":2566},{"style":422},[2567],{"type":334,"value":455},{"type":328,"tag":391,"props":2569,"children":2570},{"class":393,"line":580},[2571,2576,2580],{"type":328,"tag":391,"props":2572,"children":2573},{"style":404},[2574],{"type":334,"value":2575},"    fn",{"type":328,"tag":391,"props":2577,"children":2578},{"style":410},[2579],{"type":334,"value":495},{"type":328,"tag":391,"props":2581,"children":2582},{"style":422},[2583],{"type":334,"value":455},{"type":328,"tag":391,"props":2585,"children":2586},{"class":393,"line":635},[2587,2591,2595,2599,2603],{"type":328,"tag":391,"props":2588,"children":2589},{"style":410},[2590],{"type":334,"value":729},{"type":328,"tag":391,"props":2592,"children":2593},{"style":422},[2594],{"type":334,"value":425},{"type":328,"tag":391,"props":2596,"children":2597},{"style":447},[2598],{"type":334,"value":430},{"type":328,"tag":391,"props":2600,"children":2601},{"style":410},[2602],{"type":334,"value":573},{"type":328,"tag":391,"props":2604,"children":2605},{"style":422},[2606],{"type":334,"value":455},{"type":328,"tag":391,"props":2608,"children":2609},{"class":393,"line":679},[2610],{"type":328,"tag":391,"props":2611,"children":2612},{"style":1283},[2613],{"type":334,"value":2614},"  // 返回用于关闭定时器的方法\n",{"type":328,"tag":391,"props":2616,"children":2617},{"class":393,"line":714},[2618,2622,2626,2630,2635,2639,2643,2647],{"type":328,"tag":391,"props":2619,"children":2620},{"style":584},[2621],{"type":334,"value":1127},{"type":328,"tag":391,"props":2623,"children":2624},{"style":410},[2625],{"type":334,"value":522},{"type":328,"tag":391,"props":2627,"children":2628},{"style":398},[2629],{"type":334,"value":527},{"type":328,"tag":391,"props":2631,"children":2632},{"style":404},[2633],{"type":334,"value":2634}," clearInterval",{"type":328,"tag":391,"props":2636,"children":2637},{"style":410},[2638],{"type":334,"value":413},{"type":328,"tag":391,"props":2640,"children":2641},{"style":447},[2642],{"type":334,"value":703},{"type":328,"tag":391,"props":2644,"children":2645},{"style":410},[2646],{"type":334,"value":573},{"type":328,"tag":391,"props":2648,"children":2649},{"style":422},[2650],{"type":334,"value":455},{"type":328,"tag":391,"props":2652,"children":2653},{"class":393,"line":723},[2654,2658],{"type":328,"tag":391,"props":2655,"children":2656},{"style":410},[2657],{"type":334,"value":1438},{"type":328,"tag":391,"props":2659,"children":2660},{"style":422},[2661],{"type":334,"value":455},{"type":328,"tag":391,"props":2663,"children":2664},{"class":393,"line":736},[2665],{"type":328,"tag":391,"props":2666,"children":2667},{"emptyLinePlaceholder":1449},[2668],{"type":334,"value":1452},{"type":328,"tag":391,"props":2670,"children":2671},{"class":393,"line":769},[2672,2676,2681,2685,2689,2693,2697],{"type":328,"tag":391,"props":2673,"children":2674},{"style":398},[2675],{"type":334,"value":1461},{"type":328,"tag":391,"props":2677,"children":2678},{"style":447},[2679],{"type":334,"value":2680}," cancelTimeout",{"type":328,"tag":391,"props":2682,"children":2683},{"style":471},[2684],{"type":334,"value":474},{"type":328,"tag":391,"props":2686,"children":2687},{"style":404},[2688],{"type":334,"value":407},{"type":328,"tag":391,"props":2690,"children":2691},{"style":410},[2692],{"type":334,"value":1269},{"type":328,"tag":391,"props":2694,"children":2695},{"style":398},[2696],{"type":334,"value":527},{"type":328,"tag":391,"props":2698,"children":2699},{"style":410},[2700],{"type":334,"value":532},{"type":328,"tag":391,"props":2702,"children":2703},{"class":393,"line":1138},[2704,2708,2712,2716,2720,2725,2729],{"type":328,"tag":391,"props":2705,"children":2706},{"style":447},[2707],{"type":334,"value":1495},{"type":328,"tag":391,"props":2709,"children":2710},{"style":482},[2711],{"type":334,"value":485},{"type":328,"tag":391,"props":2713,"children":2714},{"style":404},[2715],{"type":334,"value":1504},{"type":328,"tag":391,"props":2717,"children":2718},{"style":410},[2719],{"type":334,"value":413},{"type":328,"tag":391,"props":2721,"children":2722},{"style":1616},[2723],{"type":334,"value":2724},"\"1s 后打印出 1\"",{"type":328,"tag":391,"props":2726,"children":2727},{"style":410},[2728],{"type":334,"value":573},{"type":328,"tag":391,"props":2730,"children":2731},{"style":422},[2732],{"type":334,"value":455},{"type":328,"tag":391,"props":2734,"children":2735},{"class":393,"line":1395},[2736,2740,2744,2748,2752],{"type":328,"tag":391,"props":2737,"children":2738},{"style":410},[2739],{"type":334,"value":1438},{"type":328,"tag":391,"props":2741,"children":2742},{"style":422},[2743],{"type":334,"value":425},{"type":328,"tag":391,"props":2745,"children":2746},{"style":1511},[2747],{"type":334,"value":1644},{"type":328,"tag":391,"props":2749,"children":2750},{"style":410},[2751],{"type":334,"value":573},{"type":328,"tag":391,"props":2753,"children":2754},{"style":422},[2755],{"type":334,"value":455},{"type":328,"tag":2757,"props":2758,"children":2759},"style",{},[2760],{"type":334,"value":2761},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":323,"searchDepth":535,"depth":535,"links":2763},[2764,2770,2771],{"id":331,"depth":438,"text":335,"children":2765},[2766,2767,2768,2769],{"id":339,"depth":458,"text":342},{"id":351,"depth":458,"text":354},{"id":371,"depth":458,"text":374},{"id":783,"depth":458,"text":786},{"id":1146,"depth":438,"text":1149},{"id":2425,"depth":438,"text":2428},"markdown","content:2.code:2.source:1.native-api:5.timer.md","content","2.code/2.source/1.native-api/5.timer.md","md",[2778,2779],{"_path":283,"title":282,"description":323},{"_path":289,"title":288,"description":2780},"JSON.stringify() 方法将一个 js 对象或值转换为 json 字符串，如果指定了一个 replacer 函数，则可以选择性地替换值，或者指定的 replacer 是数组，则可选择性地仅包含数组指定的属性。",1712112512471]