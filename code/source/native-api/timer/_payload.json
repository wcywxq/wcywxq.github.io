[{"data":1,"prerenderedAt":2775},["Reactive",2],{"navigation":3,"/code/source/native-api/timer":314,"/code/source/native-api/timer-surround":2771},[4,32],{"title":5,"_path":6,"children":7},"八股文","/endorsement",[8,19],{"title":9,"_path":10,"children":11},"构建工具","/endorsement/build-tools",[12],{"title":13,"_path":14,"children":15},"Webpack","/endorsement/build-tools/webpack",[16],{"title":17,"_path":18},"构建流程","/endorsement/build-tools/webpack/build-process",{"title":20,"_path":21,"children":22},"Html","/endorsement/html",[23,26,29],{"title":24,"_path":25},"Canvas 和 Svg","/endorsement/html/canvas-svg",{"title":27,"_path":28},"DOCTYPE 文档类型","/endorsement/html/doc-type",{"title":30,"_path":31},"离线存储","/endorsement/html/offline-storage",{"title":33,"_path":34,"children":35},"代码","/code",[36,258,307],{"title":37,"_path":38,"children":39},"算法","/code/algorithm",[40,47],{"title":41,"_path":42,"children":43},"剑指 offer","/code/algorithm/sword-ofter",[44],{"title":45,"_path":46},"LCR.140 训练计划 II","/code/algorithm/sword-ofter/lian-biao-zhong-dao-shu-di-kge-jie-dian-lcof",{"title":48,"_path":49,"children":50},"力扣 leetCode","/code/algorithm/leetcode",[51,54,57,60,63,66,69,72,75,78,81,84,87,90,93,96,99,102,105,108,111,114,117,120,123,126,129,132,135,138,141,144,147,150,153,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255],{"title":52,"_path":53},"No.1 两数相加","/code/algorithm/leetcode/two-sum",{"title":55,"_path":56},"No.2 两数相加","/code/algorithm/leetcode/add-two-numbers",{"title":58,"_path":59},"No.3 无重复字符的最长子串","/code/algorithm/leetcode/longest-substring-without-repeating-characters",{"title":61,"_path":62},"No.4 寻找两个正序数组的中位数","/code/algorithm/leetcode/median-of-two-sorted-arrays",{"title":64,"_path":65},"No.5 最长回文子串","/code/algorithm/leetcode/longest-palindromic-substring",{"title":67,"_path":68},"No.7 整数反转","/code/algorithm/leetcode/reverse-integer",{"title":70,"_path":71},"No.9 回文数","/code/algorithm/leetcode/palindrome-number",{"title":73,"_path":74},"No.14 最长公共前缀","/code/algorithm/leetcode/longest-common-prefix",{"title":76,"_path":77},"No.15 三数之和","/code/algorithm/leetcode/3sum",{"title":79,"_path":80},"No.20 有效的括号","/code/algorithm/leetcode/valid-parentheses",{"title":82,"_path":83},"No.21 合并两个有序链表","/code/algorithm/leetcode/merge-two-sorted-lists",{"title":85,"_path":86},"No.22 括号生成","/code/algorithm/leetcode/generate-parentheses",{"title":88,"_path":89},"No.23 合并 K 个升序链表","/code/algorithm/leetcode/merge-k-sorted-lists",{"title":91,"_path":92},"No.24 两两交换链表中的节点","/code/algorithm/leetcode/swap-nodes-in-pairs",{"title":94,"_path":95},"No.25 K 个一组翻转链表","/code/algorithm/leetcode/reverse-nodes-in-k-group",{"title":97,"_path":98},"No.31 下一个排列","/code/algorithm/leetcode/next-permutation",{"title":100,"_path":101},"No.32 最长有效括号","/code/algorithm/leetcode/longest-valid-parentheses",{"title":103,"_path":104},"No.33 搜索旋转排序数组","/code/algorithm/leetcode/search-in-rotated-sorted-array",{"title":106,"_path":107},"No.34 在排序数组中查找元素的第一个和最后一个位置","/code/algorithm/leetcode/find-first-and-last-position-of-element-in-sorted-array",{"title":109,"_path":110},"No.39 组合求和","/code/algorithm/leetcode/combination-sum",{"title":112,"_path":113},"No.42 接雨水","/code/algorithm/leetcode/trapping-rain-water",{"title":115,"_path":116},"No.46 全排列","/code/algorithm/leetcode/permutations",{"title":118,"_path":119},"No.53 最大子序和","/code/algorithm/leetcode/maximum-subarray",{"title":121,"_path":122},"No.56 合并区间","/code/algorithm/leetcode/merge-intervals",{"title":124,"_path":125},"No.67 二进制求和","/code/algorithm/leetcode/add-binary",{"title":127,"_path":128},"No.69 x 的平方根","/code/algorithm/leetcode/sqrtx",{"title":130,"_path":131},"No.70 爬楼梯","/code/algorithm/leetcode/climbing-stairs",{"title":133,"_path":134},"No.88 合并两个有序数组","/code/algorithm/leetcode/merge-sorted-array",{"title":136,"_path":137},"No.92 反转链表 II","/code/algorithm/leetcode/reverse-linked-list-ii",{"title":139,"_path":140},"No.94 二叉树的中序遍历","/code/algorithm/leetcode/binary-tree-inorder-traversal",{"title":142,"_path":143},"No.101 对称二叉树","/code/algorithm/leetcode/symmetric-tree",{"title":145,"_path":146},"No.102 二叉树的层序遍历","/code/algorithm/leetcode/binary-tree-level-order-traversal",{"title":148,"_path":149},"No.104 二叉树的最大深度","/code/algorithm/leetcode/maximum-depth-of-binary-tree",{"title":151,"_path":152},"No.111 二叉树的最小深度","/code/algorithm/leetcode/minimum-depth-of-binary-tree",{"title":154,"_path":155},"No.112 路径总和","/code/algorithm/leetcode/path-sum",{"title":157,"_path":158},"No.121 买股票的最佳时机","/code/algorithm/leetcode/best-time-to-buy-and-sell-stock",{"title":160,"_path":161},"No.129 求根到叶子节点数字之和","/code/algorithm/leetcode/sum-root-to-leaf-numbers",{"title":163,"_path":164},"No.136 只出现一次的数字","/code/algorithm/leetcode/single-number",{"title":166,"_path":167},"No.141 环型链表","/code/algorithm/leetcode/linked-list-cycle",{"title":169,"_path":170},"No.146 LRU 缓存","/code/algorithm/leetcode/lru-cache",{"title":172,"_path":173},"No.151 反转字符串中的单词","/code/algorithm/leetcode/reverse-words-in-a-string",{"title":175,"_path":176},"No.153 寻找旋转排序数组中的最小值","/code/algorithm/leetcode/find-minimum-in-rotated-sorted-array",{"title":178,"_path":179},"No.155 最小栈","/code/algorithm/leetcode/min-stack",{"title":181,"_path":182},"No.160 相交链表","/code/algorithm/leetcode/intersection-of-two-linked-lists",{"title":184,"_path":185},"No.162 寻找峰值","/code/algorithm/leetcode/find-peak-element",{"title":187,"_path":188},"No.169 多数元素","/code/algorithm/leetcode/majority-element",{"title":190,"_path":191},"No.200 岛屿数量","/code/algorithm/leetcode/number-of-islands",{"title":193,"_path":194},"No.206 反转链表","/code/algorithm/leetcode/reverse-linked-list",{"title":196,"_path":197},"No.209 长度最小的子数组","/code/algorithm/leetcode/minimum-size-subarray-sum",{"title":199,"_path":200},"No.215 数组中的第K个最大元素","/code/algorithm/leetcode/kth-largest-element-in-an-array",{"title":202,"_path":203},"No.226 翻转二叉树","/code/algorithm/leetcode/invert-binary-tree",{"title":205,"_path":206},"No.238 除自身以外数组的乘积","/code/algorithm/leetcode/product-of-array-except-self",{"title":208,"_path":209},"No.322 零钱兑换","/code/algorithm/leetcode/coin-change",{"title":211,"_path":212},"No.334 递增的三元子序列","/code/algorithm/leetcode/increasing-triplet-subsequence",{"title":214,"_path":215},"No.344 反转字符串","/code/algorithm/leetcode/reverse-string",{"title":217,"_path":218},"No.345 反转字符串中的元音字母","/code/algorithm/leetcode/reverse-vowels-of-a-string",{"title":220,"_path":221},"No.384 打乱数组","/code/algorithm/leetcode/shuffle-an-array",{"title":223,"_path":224},"No.415 字符串相加","/code/algorithm/leetcode/add-strings",{"title":226,"_path":227},"No.443 压缩字符串","/code/algorithm/leetcode/string-compression",{"title":229,"_path":230},"No.509 斐波那契数","/code/algorithm/leetcode/fibonacci-number",{"title":232,"_path":233},"No.605 种花问题","/code/algorithm/leetcode/can-place-flowers",{"title":235,"_path":236},"No.617 合并二叉树","/code/algorithm/leetcode/merge-two-binary-trees",{"title":238,"_path":239},"No.678 有效的括号字符串","/code/algorithm/leetcode/valid-parenthesis-string",{"title":241,"_path":242},"No.704 二分查找","/code/algorithm/leetcode/binary-search",{"title":244,"_path":245},"No.912 排序数组","/code/algorithm/leetcode/sort-an-array",{"title":247,"_path":248},"No.1071 字符串的最大公因子","/code/algorithm/leetcode/greatest-common-divisor-of-strings",{"title":250,"_path":251},"No.1143 最长公共子序列","/code/algorithm/leetcode/longest-common-subsequence",{"title":253,"_path":254},"No.1431 拥有最多糖果的孩子","/code/algorithm/leetcode/kids-with-the-greatest-number-of-candies",{"title":256,"_path":257},"No.1768 交替合并字符串","/code/algorithm/leetcode/merge-strings-alternately",{"title":259,"_path":260,"children":261},"源码实现","/code/source",[262,287,300],{"title":263,"_path":264,"children":265},"原生 api","/code/source/native-api",[266,269,272,275,278,281,284],{"title":267,"_path":268},"ajax","/code/source/native-api/ajax",{"title":270,"_path":271},"call & apply & bind","/code/source/native-api/call-apply-bind",{"title":273,"_path":274},"new 操作符","/code/source/native-api/new",{"title":276,"_path":277},"instanceof 关键字","/code/source/native-api/instanceof",{"title":279,"_path":280},"定时器","/code/source/native-api/timer",{"title":282,"_path":283},"JSON.stringify","/code/source/native-api/json-stringify",{"title":285,"_path":286},"Iterator 迭代器","/code/source/native-api/iterator",{"title":288,"_path":289,"children":290},"数组 Array","/code/source/array",[291,294,297],{"title":292,"_path":293},"数组去重","/code/source/array/remove-duplicate",{"title":295,"_path":296},"数组扁平化","/code/source/array/flat",{"title":298,"_path":299},"交集、差集、并集、补集","/code/source/array/intersect-minus-union-complement",{"title":301,"_path":302,"children":303},"字符串 String","/code/source/string",[304],{"title":305,"_path":306},"repeat()","/code/source/string/repeat",{"title":308,"_path":309,"children":310},"业务场景","/code/scene",[311],{"title":312,"_path":313},"顺序打印 url 并支持 retry","/code/scene/promise-url-retry",{"_path":280,"_dir":315,"_draft":316,"_partial":316,"_locale":317,"title":279,"description":317,"body":318,"_type":2766,"_id":2767,"_source":2768,"_file":2769,"_extension":2770},"native-api",false,"",{"type":319,"children":320,"toc":2756},"root",[321,330,337,343,349,363,369,374,770,775,781,1138,1144,1149,1647,1652,2417,2423,2428,2750],{"type":322,"tag":323,"props":324,"children":326},"element","h2",{"id":325},"使用-requestanimationframe-实现定时器",[327],{"type":328,"value":329},"text","使用 RequestAnimationFrame 实现定时器",{"type":322,"tag":331,"props":332,"children":334},"h3",{"id":333},"浏览器默认提供的-settimeout-和-setinterval-的问题",[335],{"type":328,"value":336},"浏览器默认提供的 setTimeout 和 setInterval 的问题",{"type":322,"tag":338,"props":339,"children":340},"p",{},[341],{"type":328,"value":342},"首先在针对浏览器端的默认实现中，setTimeout 和 setInterval 的定时是 不准确的，因为我们知道 js 是单线程的，如果前面的代码耗费了较长的时间，那么会导致后面的定时器不能按时执行。此外 setInterval 会带来性能上的问题，比如存在执行累积的问题等等。\n可以使用 requestAnimationFrame 来实现定时器的要求，首先 requestAnimationFrame 自带函数节流功能，基本可以保证在 16.6ms 内只执行一次（不掉帧的情况下），并且该函数的延时效果是精确的，没有其他定时器时间不准的问题。",{"type":322,"tag":331,"props":344,"children":346},{"id":345},"requestanimationframe-简单介绍",[347],{"type":328,"value":348},"requestAnimationFrame 简单介绍",{"type":322,"tag":338,"props":350,"children":351},{},[352,354,361],{"type":328,"value":353},"requestAnimationFrame 的语法很简单：",{"type":322,"tag":355,"props":356,"children":358},"code",{"className":357},[],[359],{"type":328,"value":360},"window.requestAnimationFrame(callback)",{"type":328,"value":362},"。callback 为一个指定函数的参数，该函数在下次重新绘制动画时调用",{"type":322,"tag":331,"props":364,"children":366},{"id":365},"settimeout-实现",[367],{"type":328,"value":368},"setTimeout 实现",{"type":322,"tag":338,"props":370,"children":371},{},[372],{"type":328,"value":373},"重新绘制的时间即 16.6ms 执行。我们可以通过递归调用来达到定时器的效果",{"type":322,"tag":375,"props":376,"children":380},"pre",{"className":377,"code":378,"language":379,"meta":317,"style":317},"language-js shiki shiki-themes slack-ochin slack-ochin ayu-dark","function _setTimeout(fn, timeout) {\n  let timer;\n  let startTime = Date.now();\n  const loop = () => {\n    timer = window.requestAnimationFrame(loop);\n    if (Date.now() - startTime >= timeout) {\n      fn.call(this, timer);\n      window.cancelAnimationFrame(timer);\n    }\n  };\n  window.requestAnimationFrame(loop);\n}\n","js",[381],{"type":322,"tag":355,"props":382,"children":383},{"__ignoreMap":317},[384,430,450,494,527,572,627,671,706,715,728,761],{"type":322,"tag":385,"props":386,"children":389},"span",{"class":387,"line":388},"line",1,[390,396,402,408,414,420,425],{"type":322,"tag":385,"props":391,"children":393},{"style":392},"--shiki-light:#0991B6;--shiki-default:#0991B6;--shiki-dark:#FF8F40",[394],{"type":328,"value":395},"function",{"type":322,"tag":385,"props":397,"children":399},{"style":398},"--shiki-light:#7EB233;--shiki-default:#7EB233;--shiki-dark:#FFB454",[400],{"type":328,"value":401}," _setTimeout",{"type":322,"tag":385,"props":403,"children":405},{"style":404},"--shiki-light:#002339;--shiki-default:#002339;--shiki-dark:#BFBDB6",[406],{"type":328,"value":407},"(",{"type":322,"tag":385,"props":409,"children":411},{"style":410},"--shiki-light:#B1108E;--shiki-default:#B1108E;--shiki-dark:#D2A6FF",[412],{"type":328,"value":413},"fn",{"type":322,"tag":385,"props":415,"children":417},{"style":416},"--shiki-light:#002339;--shiki-default:#002339;--shiki-dark:#BFBDB6B3",[418],{"type":328,"value":419},",",{"type":322,"tag":385,"props":421,"children":422},{"style":410},[423],{"type":328,"value":424}," timeout",{"type":322,"tag":385,"props":426,"children":427},{"style":404},[428],{"type":328,"value":429},") {\n",{"type":322,"tag":385,"props":431,"children":433},{"class":387,"line":432},2,[434,439,445],{"type":322,"tag":385,"props":435,"children":436},{"style":392},[437],{"type":328,"value":438},"  let",{"type":322,"tag":385,"props":440,"children":442},{"style":441},"--shiki-light:#2F86D2;--shiki-default:#2F86D2;--shiki-dark:#BFBDB6",[443],{"type":328,"value":444}," timer",{"type":322,"tag":385,"props":446,"children":447},{"style":416},[448],{"type":328,"value":449},";\n",{"type":322,"tag":385,"props":451,"children":453},{"class":387,"line":452},3,[454,458,463,469,474,480,485,490],{"type":322,"tag":385,"props":455,"children":456},{"style":392},[457],{"type":328,"value":438},{"type":322,"tag":385,"props":459,"children":460},{"style":441},[461],{"type":328,"value":462}," startTime",{"type":322,"tag":385,"props":464,"children":466},{"style":465},"--shiki-light:#7B30D0;--shiki-default:#7B30D0;--shiki-dark:#F29668",[467],{"type":328,"value":468}," =",{"type":322,"tag":385,"props":470,"children":471},{"style":441},[472],{"type":328,"value":473}," Date",{"type":322,"tag":385,"props":475,"children":477},{"style":476},"--shiki-light:#002339;--shiki-default:#002339;--shiki-dark:#F29668",[478],{"type":328,"value":479},".",{"type":322,"tag":385,"props":481,"children":482},{"style":398},[483],{"type":328,"value":484},"now",{"type":322,"tag":385,"props":486,"children":487},{"style":404},[488],{"type":328,"value":489},"()",{"type":322,"tag":385,"props":491,"children":492},{"style":416},[493],{"type":328,"value":449},{"type":322,"tag":385,"props":495,"children":497},{"class":387,"line":496},4,[498,503,508,512,517,522],{"type":322,"tag":385,"props":499,"children":500},{"style":392},[501],{"type":328,"value":502},"  const",{"type":322,"tag":385,"props":504,"children":505},{"style":398},[506],{"type":328,"value":507}," loop",{"type":322,"tag":385,"props":509,"children":510},{"style":465},[511],{"type":328,"value":468},{"type":322,"tag":385,"props":513,"children":514},{"style":404},[515],{"type":328,"value":516}," () ",{"type":322,"tag":385,"props":518,"children":519},{"style":392},[520],{"type":328,"value":521},"=>",{"type":322,"tag":385,"props":523,"children":524},{"style":404},[525],{"type":328,"value":526}," {\n",{"type":322,"tag":385,"props":528,"children":530},{"class":387,"line":529},5,[531,536,540,545,549,554,558,563,568],{"type":322,"tag":385,"props":532,"children":533},{"style":441},[534],{"type":328,"value":535},"    timer",{"type":322,"tag":385,"props":537,"children":538},{"style":465},[539],{"type":328,"value":468},{"type":322,"tag":385,"props":541,"children":542},{"style":441},[543],{"type":328,"value":544}," window",{"type":322,"tag":385,"props":546,"children":547},{"style":476},[548],{"type":328,"value":479},{"type":322,"tag":385,"props":550,"children":551},{"style":398},[552],{"type":328,"value":553},"requestAnimationFrame",{"type":322,"tag":385,"props":555,"children":556},{"style":404},[557],{"type":328,"value":407},{"type":322,"tag":385,"props":559,"children":560},{"style":441},[561],{"type":328,"value":562},"loop",{"type":322,"tag":385,"props":564,"children":565},{"style":404},[566],{"type":328,"value":567},")",{"type":322,"tag":385,"props":569,"children":570},{"style":416},[571],{"type":328,"value":449},{"type":322,"tag":385,"props":573,"children":575},{"class":387,"line":574},6,[576,582,587,592,596,600,605,610,614,619,623],{"type":322,"tag":385,"props":577,"children":579},{"style":578},"--shiki-light:#7B30D0;--shiki-default:#7B30D0;--shiki-dark:#FF8F40",[580],{"type":328,"value":581},"    if",{"type":322,"tag":385,"props":583,"children":584},{"style":404},[585],{"type":328,"value":586}," (",{"type":322,"tag":385,"props":588,"children":589},{"style":441},[590],{"type":328,"value":591},"Date",{"type":322,"tag":385,"props":593,"children":594},{"style":476},[595],{"type":328,"value":479},{"type":322,"tag":385,"props":597,"children":598},{"style":398},[599],{"type":328,"value":484},{"type":322,"tag":385,"props":601,"children":602},{"style":404},[603],{"type":328,"value":604},"() ",{"type":322,"tag":385,"props":606,"children":607},{"style":465},[608],{"type":328,"value":609},"-",{"type":322,"tag":385,"props":611,"children":612},{"style":441},[613],{"type":328,"value":462},{"type":322,"tag":385,"props":615,"children":616},{"style":465},[617],{"type":328,"value":618}," >=",{"type":322,"tag":385,"props":620,"children":621},{"style":441},[622],{"type":328,"value":424},{"type":322,"tag":385,"props":624,"children":625},{"style":404},[626],{"type":328,"value":429},{"type":322,"tag":385,"props":628,"children":630},{"class":387,"line":629},7,[631,636,640,645,649,655,659,663,667],{"type":322,"tag":385,"props":632,"children":633},{"style":441},[634],{"type":328,"value":635},"      fn",{"type":322,"tag":385,"props":637,"children":638},{"style":476},[639],{"type":328,"value":479},{"type":322,"tag":385,"props":641,"children":642},{"style":398},[643],{"type":328,"value":644},"call",{"type":322,"tag":385,"props":646,"children":647},{"style":404},[648],{"type":328,"value":407},{"type":322,"tag":385,"props":650,"children":652},{"style":651},"--shiki-light:#000000;--shiki-default:#000000;--shiki-dark:#39BAE6;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:italic",[653],{"type":328,"value":654},"this",{"type":322,"tag":385,"props":656,"children":657},{"style":416},[658],{"type":328,"value":419},{"type":322,"tag":385,"props":660,"children":661},{"style":441},[662],{"type":328,"value":444},{"type":322,"tag":385,"props":664,"children":665},{"style":404},[666],{"type":328,"value":567},{"type":322,"tag":385,"props":668,"children":669},{"style":416},[670],{"type":328,"value":449},{"type":322,"tag":385,"props":672,"children":674},{"class":387,"line":673},8,[675,680,684,689,693,698,702],{"type":322,"tag":385,"props":676,"children":677},{"style":441},[678],{"type":328,"value":679},"      window",{"type":322,"tag":385,"props":681,"children":682},{"style":476},[683],{"type":328,"value":479},{"type":322,"tag":385,"props":685,"children":686},{"style":398},[687],{"type":328,"value":688},"cancelAnimationFrame",{"type":322,"tag":385,"props":690,"children":691},{"style":404},[692],{"type":328,"value":407},{"type":322,"tag":385,"props":694,"children":695},{"style":441},[696],{"type":328,"value":697},"timer",{"type":322,"tag":385,"props":699,"children":700},{"style":404},[701],{"type":328,"value":567},{"type":322,"tag":385,"props":703,"children":704},{"style":416},[705],{"type":328,"value":449},{"type":322,"tag":385,"props":707,"children":709},{"class":387,"line":708},9,[710],{"type":322,"tag":385,"props":711,"children":712},{"style":404},[713],{"type":328,"value":714},"    }\n",{"type":322,"tag":385,"props":716,"children":718},{"class":387,"line":717},10,[719,724],{"type":322,"tag":385,"props":720,"children":721},{"style":404},[722],{"type":328,"value":723},"  }",{"type":322,"tag":385,"props":725,"children":726},{"style":416},[727],{"type":328,"value":449},{"type":322,"tag":385,"props":729,"children":731},{"class":387,"line":730},11,[732,737,741,745,749,753,757],{"type":322,"tag":385,"props":733,"children":734},{"style":441},[735],{"type":328,"value":736},"  window",{"type":322,"tag":385,"props":738,"children":739},{"style":476},[740],{"type":328,"value":479},{"type":322,"tag":385,"props":742,"children":743},{"style":398},[744],{"type":328,"value":553},{"type":322,"tag":385,"props":746,"children":747},{"style":404},[748],{"type":328,"value":407},{"type":322,"tag":385,"props":750,"children":751},{"style":441},[752],{"type":328,"value":562},{"type":322,"tag":385,"props":754,"children":755},{"style":404},[756],{"type":328,"value":567},{"type":322,"tag":385,"props":758,"children":759},{"style":416},[760],{"type":328,"value":449},{"type":322,"tag":385,"props":762,"children":764},{"class":387,"line":763},12,[765],{"type":322,"tag":385,"props":766,"children":767},{"style":404},[768],{"type":328,"value":769},"}\n",{"type":322,"tag":338,"props":771,"children":772},{},[773],{"type":328,"value":774},"这里需要先定义一个开始时间 startTime，然后定义一个递归函数 loop，每次先递归调用自己获取最新的 timer，这样才能够保证可以取消掉，然后判断当前时间减去开始时间是否大于自己设定的值，如果大则回调并取消定时器即可，否则因为我们已经在一开始回调自己了，所以会在 16.6ms 后再次执行并判断，直到满足条件为止。",{"type":322,"tag":331,"props":776,"children":778},{"id":777},"setinterval-实现",[779],{"type":328,"value":780},"setInterval 实现",{"type":322,"tag":375,"props":782,"children":784},{"className":377,"code":783,"language":379,"meta":317,"style":317},"function _setInterval(fn, interval) {\n  let timer;\n  let startTime = Date.now();\n  const loop = () => {\n    timer = window.requestAnimationFrame(loop);\n    if (Date.now() - startTime >= interval) {\n      fn.call(this, timer);\n      startTime = Date.now();\n    }\n  };\n  timer = window.RequestAnimationFrame(loop);\n  return timer;\n}\n",[785],{"type":322,"tag":355,"props":786,"children":787},{"__ignoreMap":317},[788,821,836,871,898,937,984,1023,1055,1062,1073,1114,1130],{"type":322,"tag":385,"props":789,"children":790},{"class":387,"line":388},[791,795,800,804,808,812,817],{"type":322,"tag":385,"props":792,"children":793},{"style":392},[794],{"type":328,"value":395},{"type":322,"tag":385,"props":796,"children":797},{"style":398},[798],{"type":328,"value":799}," _setInterval",{"type":322,"tag":385,"props":801,"children":802},{"style":404},[803],{"type":328,"value":407},{"type":322,"tag":385,"props":805,"children":806},{"style":410},[807],{"type":328,"value":413},{"type":322,"tag":385,"props":809,"children":810},{"style":416},[811],{"type":328,"value":419},{"type":322,"tag":385,"props":813,"children":814},{"style":410},[815],{"type":328,"value":816}," interval",{"type":322,"tag":385,"props":818,"children":819},{"style":404},[820],{"type":328,"value":429},{"type":322,"tag":385,"props":822,"children":823},{"class":387,"line":432},[824,828,832],{"type":322,"tag":385,"props":825,"children":826},{"style":392},[827],{"type":328,"value":438},{"type":322,"tag":385,"props":829,"children":830},{"style":441},[831],{"type":328,"value":444},{"type":322,"tag":385,"props":833,"children":834},{"style":416},[835],{"type":328,"value":449},{"type":322,"tag":385,"props":837,"children":838},{"class":387,"line":452},[839,843,847,851,855,859,863,867],{"type":322,"tag":385,"props":840,"children":841},{"style":392},[842],{"type":328,"value":438},{"type":322,"tag":385,"props":844,"children":845},{"style":441},[846],{"type":328,"value":462},{"type":322,"tag":385,"props":848,"children":849},{"style":465},[850],{"type":328,"value":468},{"type":322,"tag":385,"props":852,"children":853},{"style":441},[854],{"type":328,"value":473},{"type":322,"tag":385,"props":856,"children":857},{"style":476},[858],{"type":328,"value":479},{"type":322,"tag":385,"props":860,"children":861},{"style":398},[862],{"type":328,"value":484},{"type":322,"tag":385,"props":864,"children":865},{"style":404},[866],{"type":328,"value":489},{"type":322,"tag":385,"props":868,"children":869},{"style":416},[870],{"type":328,"value":449},{"type":322,"tag":385,"props":872,"children":873},{"class":387,"line":496},[874,878,882,886,890,894],{"type":322,"tag":385,"props":875,"children":876},{"style":392},[877],{"type":328,"value":502},{"type":322,"tag":385,"props":879,"children":880},{"style":398},[881],{"type":328,"value":507},{"type":322,"tag":385,"props":883,"children":884},{"style":465},[885],{"type":328,"value":468},{"type":322,"tag":385,"props":887,"children":888},{"style":404},[889],{"type":328,"value":516},{"type":322,"tag":385,"props":891,"children":892},{"style":392},[893],{"type":328,"value":521},{"type":322,"tag":385,"props":895,"children":896},{"style":404},[897],{"type":328,"value":526},{"type":322,"tag":385,"props":899,"children":900},{"class":387,"line":529},[901,905,909,913,917,921,925,929,933],{"type":322,"tag":385,"props":902,"children":903},{"style":441},[904],{"type":328,"value":535},{"type":322,"tag":385,"props":906,"children":907},{"style":465},[908],{"type":328,"value":468},{"type":322,"tag":385,"props":910,"children":911},{"style":441},[912],{"type":328,"value":544},{"type":322,"tag":385,"props":914,"children":915},{"style":476},[916],{"type":328,"value":479},{"type":322,"tag":385,"props":918,"children":919},{"style":398},[920],{"type":328,"value":553},{"type":322,"tag":385,"props":922,"children":923},{"style":404},[924],{"type":328,"value":407},{"type":322,"tag":385,"props":926,"children":927},{"style":441},[928],{"type":328,"value":562},{"type":322,"tag":385,"props":930,"children":931},{"style":404},[932],{"type":328,"value":567},{"type":322,"tag":385,"props":934,"children":935},{"style":416},[936],{"type":328,"value":449},{"type":322,"tag":385,"props":938,"children":939},{"class":387,"line":574},[940,944,948,952,956,960,964,968,972,976,980],{"type":322,"tag":385,"props":941,"children":942},{"style":578},[943],{"type":328,"value":581},{"type":322,"tag":385,"props":945,"children":946},{"style":404},[947],{"type":328,"value":586},{"type":322,"tag":385,"props":949,"children":950},{"style":441},[951],{"type":328,"value":591},{"type":322,"tag":385,"props":953,"children":954},{"style":476},[955],{"type":328,"value":479},{"type":322,"tag":385,"props":957,"children":958},{"style":398},[959],{"type":328,"value":484},{"type":322,"tag":385,"props":961,"children":962},{"style":404},[963],{"type":328,"value":604},{"type":322,"tag":385,"props":965,"children":966},{"style":465},[967],{"type":328,"value":609},{"type":322,"tag":385,"props":969,"children":970},{"style":441},[971],{"type":328,"value":462},{"type":322,"tag":385,"props":973,"children":974},{"style":465},[975],{"type":328,"value":618},{"type":322,"tag":385,"props":977,"children":978},{"style":441},[979],{"type":328,"value":816},{"type":322,"tag":385,"props":981,"children":982},{"style":404},[983],{"type":328,"value":429},{"type":322,"tag":385,"props":985,"children":986},{"class":387,"line":629},[987,991,995,999,1003,1007,1011,1015,1019],{"type":322,"tag":385,"props":988,"children":989},{"style":441},[990],{"type":328,"value":635},{"type":322,"tag":385,"props":992,"children":993},{"style":476},[994],{"type":328,"value":479},{"type":322,"tag":385,"props":996,"children":997},{"style":398},[998],{"type":328,"value":644},{"type":322,"tag":385,"props":1000,"children":1001},{"style":404},[1002],{"type":328,"value":407},{"type":322,"tag":385,"props":1004,"children":1005},{"style":651},[1006],{"type":328,"value":654},{"type":322,"tag":385,"props":1008,"children":1009},{"style":416},[1010],{"type":328,"value":419},{"type":322,"tag":385,"props":1012,"children":1013},{"style":441},[1014],{"type":328,"value":444},{"type":322,"tag":385,"props":1016,"children":1017},{"style":404},[1018],{"type":328,"value":567},{"type":322,"tag":385,"props":1020,"children":1021},{"style":416},[1022],{"type":328,"value":449},{"type":322,"tag":385,"props":1024,"children":1025},{"class":387,"line":673},[1026,1031,1035,1039,1043,1047,1051],{"type":322,"tag":385,"props":1027,"children":1028},{"style":441},[1029],{"type":328,"value":1030},"      startTime",{"type":322,"tag":385,"props":1032,"children":1033},{"style":465},[1034],{"type":328,"value":468},{"type":322,"tag":385,"props":1036,"children":1037},{"style":441},[1038],{"type":328,"value":473},{"type":322,"tag":385,"props":1040,"children":1041},{"style":476},[1042],{"type":328,"value":479},{"type":322,"tag":385,"props":1044,"children":1045},{"style":398},[1046],{"type":328,"value":484},{"type":322,"tag":385,"props":1048,"children":1049},{"style":404},[1050],{"type":328,"value":489},{"type":322,"tag":385,"props":1052,"children":1053},{"style":416},[1054],{"type":328,"value":449},{"type":322,"tag":385,"props":1056,"children":1057},{"class":387,"line":708},[1058],{"type":322,"tag":385,"props":1059,"children":1060},{"style":404},[1061],{"type":328,"value":714},{"type":322,"tag":385,"props":1063,"children":1064},{"class":387,"line":717},[1065,1069],{"type":322,"tag":385,"props":1066,"children":1067},{"style":404},[1068],{"type":328,"value":723},{"type":322,"tag":385,"props":1070,"children":1071},{"style":416},[1072],{"type":328,"value":449},{"type":322,"tag":385,"props":1074,"children":1075},{"class":387,"line":730},[1076,1081,1085,1089,1093,1098,1102,1106,1110],{"type":322,"tag":385,"props":1077,"children":1078},{"style":441},[1079],{"type":328,"value":1080},"  timer",{"type":322,"tag":385,"props":1082,"children":1083},{"style":465},[1084],{"type":328,"value":468},{"type":322,"tag":385,"props":1086,"children":1087},{"style":441},[1088],{"type":328,"value":544},{"type":322,"tag":385,"props":1090,"children":1091},{"style":476},[1092],{"type":328,"value":479},{"type":322,"tag":385,"props":1094,"children":1095},{"style":398},[1096],{"type":328,"value":1097},"RequestAnimationFrame",{"type":322,"tag":385,"props":1099,"children":1100},{"style":404},[1101],{"type":328,"value":407},{"type":322,"tag":385,"props":1103,"children":1104},{"style":441},[1105],{"type":328,"value":562},{"type":322,"tag":385,"props":1107,"children":1108},{"style":404},[1109],{"type":328,"value":567},{"type":322,"tag":385,"props":1111,"children":1112},{"style":416},[1113],{"type":328,"value":449},{"type":322,"tag":385,"props":1115,"children":1116},{"class":387,"line":763},[1117,1122,1126],{"type":322,"tag":385,"props":1118,"children":1119},{"style":578},[1120],{"type":328,"value":1121},"  return",{"type":322,"tag":385,"props":1123,"children":1124},{"style":441},[1125],{"type":328,"value":444},{"type":322,"tag":385,"props":1127,"children":1128},{"style":416},[1129],{"type":328,"value":449},{"type":322,"tag":385,"props":1131,"children":1133},{"class":387,"line":1132},13,[1134],{"type":322,"tag":385,"props":1135,"children":1136},{"style":404},[1137],{"type":328,"value":769},{"type":322,"tag":323,"props":1139,"children":1141},{"id":1140},"settimeout-实现-setinterval",[1142],{"type":328,"value":1143},"setTimeout 实现 setInterval",{"type":322,"tag":338,"props":1145,"children":1146},{},[1147],{"type":328,"value":1148},"不完整实现：",{"type":322,"tag":375,"props":1150,"children":1152},{"className":377,"code":1151,"language":379,"meta":317,"style":317},"const _setInterval = (fn, interval) => {\n  let timer;\n  const loop = () => {\n    timer = setTimeout(() => {\n      // timeout 时间之后会执行真正的函数 fn\n      fn();\n      // 同时再次调用 interval 本身\n      loop();\n    }, interval);\n  };\n  // 开始执行\n  loop();\n  // 返回用于关闭定时器的函数\n  return () => clearTimeout(timer);\n};\n\nlet cancelInterval = _setInterval(() => {\n  console.log(1);\n}, 300);\n\nsetTimeout(() => {\n  cancelInterval();\n  console.log(\"1s之后关闭定时器\");\n}, 1000);\n",[1153],{"type":322,"tag":355,"props":1154,"children":1155},{"__ignoreMap":317},[1156,1201,1216,1243,1272,1281,1296,1304,1320,1344,1355,1363,1379,1387,1424,1437,1447,1481,1517,1542,1550,1571,1588,1622],{"type":322,"tag":385,"props":1157,"children":1158},{"class":387,"line":388},[1159,1164,1168,1172,1176,1180,1184,1188,1193,1197],{"type":322,"tag":385,"props":1160,"children":1161},{"style":392},[1162],{"type":328,"value":1163},"const",{"type":322,"tag":385,"props":1165,"children":1166},{"style":398},[1167],{"type":328,"value":799},{"type":322,"tag":385,"props":1169,"children":1170},{"style":465},[1171],{"type":328,"value":468},{"type":322,"tag":385,"props":1173,"children":1174},{"style":404},[1175],{"type":328,"value":586},{"type":322,"tag":385,"props":1177,"children":1178},{"style":410},[1179],{"type":328,"value":413},{"type":322,"tag":385,"props":1181,"children":1182},{"style":416},[1183],{"type":328,"value":419},{"type":322,"tag":385,"props":1185,"children":1186},{"style":410},[1187],{"type":328,"value":816},{"type":322,"tag":385,"props":1189,"children":1190},{"style":404},[1191],{"type":328,"value":1192},") ",{"type":322,"tag":385,"props":1194,"children":1195},{"style":392},[1196],{"type":328,"value":521},{"type":322,"tag":385,"props":1198,"children":1199},{"style":404},[1200],{"type":328,"value":526},{"type":322,"tag":385,"props":1202,"children":1203},{"class":387,"line":432},[1204,1208,1212],{"type":322,"tag":385,"props":1205,"children":1206},{"style":392},[1207],{"type":328,"value":438},{"type":322,"tag":385,"props":1209,"children":1210},{"style":441},[1211],{"type":328,"value":444},{"type":322,"tag":385,"props":1213,"children":1214},{"style":416},[1215],{"type":328,"value":449},{"type":322,"tag":385,"props":1217,"children":1218},{"class":387,"line":452},[1219,1223,1227,1231,1235,1239],{"type":322,"tag":385,"props":1220,"children":1221},{"style":392},[1222],{"type":328,"value":502},{"type":322,"tag":385,"props":1224,"children":1225},{"style":398},[1226],{"type":328,"value":507},{"type":322,"tag":385,"props":1228,"children":1229},{"style":465},[1230],{"type":328,"value":468},{"type":322,"tag":385,"props":1232,"children":1233},{"style":404},[1234],{"type":328,"value":516},{"type":322,"tag":385,"props":1236,"children":1237},{"style":392},[1238],{"type":328,"value":521},{"type":322,"tag":385,"props":1240,"children":1241},{"style":404},[1242],{"type":328,"value":526},{"type":322,"tag":385,"props":1244,"children":1245},{"class":387,"line":496},[1246,1250,1254,1259,1264,1268],{"type":322,"tag":385,"props":1247,"children":1248},{"style":441},[1249],{"type":328,"value":535},{"type":322,"tag":385,"props":1251,"children":1252},{"style":465},[1253],{"type":328,"value":468},{"type":322,"tag":385,"props":1255,"children":1256},{"style":398},[1257],{"type":328,"value":1258}," setTimeout",{"type":322,"tag":385,"props":1260,"children":1261},{"style":404},[1262],{"type":328,"value":1263},"(() ",{"type":322,"tag":385,"props":1265,"children":1266},{"style":392},[1267],{"type":328,"value":521},{"type":322,"tag":385,"props":1269,"children":1270},{"style":404},[1271],{"type":328,"value":526},{"type":322,"tag":385,"props":1273,"children":1274},{"class":387,"line":529},[1275],{"type":322,"tag":385,"props":1276,"children":1278},{"style":1277},"--shiki-light:#357B42;--shiki-default:#357B42;--shiki-dark:#ACB6BF8C;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[1279],{"type":328,"value":1280},"      // timeout 时间之后会执行真正的函数 fn\n",{"type":322,"tag":385,"props":1282,"children":1283},{"class":387,"line":574},[1284,1288,1292],{"type":322,"tag":385,"props":1285,"children":1286},{"style":398},[1287],{"type":328,"value":635},{"type":322,"tag":385,"props":1289,"children":1290},{"style":404},[1291],{"type":328,"value":489},{"type":322,"tag":385,"props":1293,"children":1294},{"style":416},[1295],{"type":328,"value":449},{"type":322,"tag":385,"props":1297,"children":1298},{"class":387,"line":629},[1299],{"type":322,"tag":385,"props":1300,"children":1301},{"style":1277},[1302],{"type":328,"value":1303},"      // 同时再次调用 interval 本身\n",{"type":322,"tag":385,"props":1305,"children":1306},{"class":387,"line":673},[1307,1312,1316],{"type":322,"tag":385,"props":1308,"children":1309},{"style":398},[1310],{"type":328,"value":1311},"      loop",{"type":322,"tag":385,"props":1313,"children":1314},{"style":404},[1315],{"type":328,"value":489},{"type":322,"tag":385,"props":1317,"children":1318},{"style":416},[1319],{"type":328,"value":449},{"type":322,"tag":385,"props":1321,"children":1322},{"class":387,"line":708},[1323,1328,1332,1336,1340],{"type":322,"tag":385,"props":1324,"children":1325},{"style":404},[1326],{"type":328,"value":1327},"    }",{"type":322,"tag":385,"props":1329,"children":1330},{"style":416},[1331],{"type":328,"value":419},{"type":322,"tag":385,"props":1333,"children":1334},{"style":441},[1335],{"type":328,"value":816},{"type":322,"tag":385,"props":1337,"children":1338},{"style":404},[1339],{"type":328,"value":567},{"type":322,"tag":385,"props":1341,"children":1342},{"style":416},[1343],{"type":328,"value":449},{"type":322,"tag":385,"props":1345,"children":1346},{"class":387,"line":717},[1347,1351],{"type":322,"tag":385,"props":1348,"children":1349},{"style":404},[1350],{"type":328,"value":723},{"type":322,"tag":385,"props":1352,"children":1353},{"style":416},[1354],{"type":328,"value":449},{"type":322,"tag":385,"props":1356,"children":1357},{"class":387,"line":730},[1358],{"type":322,"tag":385,"props":1359,"children":1360},{"style":1277},[1361],{"type":328,"value":1362},"  // 开始执行\n",{"type":322,"tag":385,"props":1364,"children":1365},{"class":387,"line":763},[1366,1371,1375],{"type":322,"tag":385,"props":1367,"children":1368},{"style":398},[1369],{"type":328,"value":1370},"  loop",{"type":322,"tag":385,"props":1372,"children":1373},{"style":404},[1374],{"type":328,"value":489},{"type":322,"tag":385,"props":1376,"children":1377},{"style":416},[1378],{"type":328,"value":449},{"type":322,"tag":385,"props":1380,"children":1381},{"class":387,"line":1132},[1382],{"type":322,"tag":385,"props":1383,"children":1384},{"style":1277},[1385],{"type":328,"value":1386},"  // 返回用于关闭定时器的函数\n",{"type":322,"tag":385,"props":1388,"children":1390},{"class":387,"line":1389},14,[1391,1395,1399,1403,1408,1412,1416,1420],{"type":322,"tag":385,"props":1392,"children":1393},{"style":578},[1394],{"type":328,"value":1121},{"type":322,"tag":385,"props":1396,"children":1397},{"style":404},[1398],{"type":328,"value":516},{"type":322,"tag":385,"props":1400,"children":1401},{"style":392},[1402],{"type":328,"value":521},{"type":322,"tag":385,"props":1404,"children":1405},{"style":398},[1406],{"type":328,"value":1407}," clearTimeout",{"type":322,"tag":385,"props":1409,"children":1410},{"style":404},[1411],{"type":328,"value":407},{"type":322,"tag":385,"props":1413,"children":1414},{"style":441},[1415],{"type":328,"value":697},{"type":322,"tag":385,"props":1417,"children":1418},{"style":404},[1419],{"type":328,"value":567},{"type":322,"tag":385,"props":1421,"children":1422},{"style":416},[1423],{"type":328,"value":449},{"type":322,"tag":385,"props":1425,"children":1427},{"class":387,"line":1426},15,[1428,1433],{"type":322,"tag":385,"props":1429,"children":1430},{"style":404},[1431],{"type":328,"value":1432},"}",{"type":322,"tag":385,"props":1434,"children":1435},{"style":416},[1436],{"type":328,"value":449},{"type":322,"tag":385,"props":1438,"children":1440},{"class":387,"line":1439},16,[1441],{"type":322,"tag":385,"props":1442,"children":1444},{"emptyLinePlaceholder":1443},true,[1445],{"type":328,"value":1446},"\n",{"type":322,"tag":385,"props":1448,"children":1450},{"class":387,"line":1449},17,[1451,1456,1461,1465,1469,1473,1477],{"type":322,"tag":385,"props":1452,"children":1453},{"style":392},[1454],{"type":328,"value":1455},"let",{"type":322,"tag":385,"props":1457,"children":1458},{"style":441},[1459],{"type":328,"value":1460}," cancelInterval",{"type":322,"tag":385,"props":1462,"children":1463},{"style":465},[1464],{"type":328,"value":468},{"type":322,"tag":385,"props":1466,"children":1467},{"style":398},[1468],{"type":328,"value":799},{"type":322,"tag":385,"props":1470,"children":1471},{"style":404},[1472],{"type":328,"value":1263},{"type":322,"tag":385,"props":1474,"children":1475},{"style":392},[1476],{"type":328,"value":521},{"type":322,"tag":385,"props":1478,"children":1479},{"style":404},[1480],{"type":328,"value":526},{"type":322,"tag":385,"props":1482,"children":1484},{"class":387,"line":1483},18,[1485,1490,1494,1499,1503,1509,1513],{"type":322,"tag":385,"props":1486,"children":1487},{"style":441},[1488],{"type":328,"value":1489},"  console",{"type":322,"tag":385,"props":1491,"children":1492},{"style":476},[1493],{"type":328,"value":479},{"type":322,"tag":385,"props":1495,"children":1496},{"style":398},[1497],{"type":328,"value":1498},"log",{"type":322,"tag":385,"props":1500,"children":1501},{"style":404},[1502],{"type":328,"value":407},{"type":322,"tag":385,"props":1504,"children":1506},{"style":1505},"--shiki-light:#174781;--shiki-default:#174781;--shiki-dark:#D2A6FF",[1507],{"type":328,"value":1508},"1",{"type":322,"tag":385,"props":1510,"children":1511},{"style":404},[1512],{"type":328,"value":567},{"type":322,"tag":385,"props":1514,"children":1515},{"style":416},[1516],{"type":328,"value":449},{"type":322,"tag":385,"props":1518,"children":1520},{"class":387,"line":1519},19,[1521,1525,1529,1534,1538],{"type":322,"tag":385,"props":1522,"children":1523},{"style":404},[1524],{"type":328,"value":1432},{"type":322,"tag":385,"props":1526,"children":1527},{"style":416},[1528],{"type":328,"value":419},{"type":322,"tag":385,"props":1530,"children":1531},{"style":1505},[1532],{"type":328,"value":1533}," 300",{"type":322,"tag":385,"props":1535,"children":1536},{"style":404},[1537],{"type":328,"value":567},{"type":322,"tag":385,"props":1539,"children":1540},{"style":416},[1541],{"type":328,"value":449},{"type":322,"tag":385,"props":1543,"children":1545},{"class":387,"line":1544},20,[1546],{"type":322,"tag":385,"props":1547,"children":1548},{"emptyLinePlaceholder":1443},[1549],{"type":328,"value":1446},{"type":322,"tag":385,"props":1551,"children":1553},{"class":387,"line":1552},21,[1554,1559,1563,1567],{"type":322,"tag":385,"props":1555,"children":1556},{"style":398},[1557],{"type":328,"value":1558},"setTimeout",{"type":322,"tag":385,"props":1560,"children":1561},{"style":404},[1562],{"type":328,"value":1263},{"type":322,"tag":385,"props":1564,"children":1565},{"style":392},[1566],{"type":328,"value":521},{"type":322,"tag":385,"props":1568,"children":1569},{"style":404},[1570],{"type":328,"value":526},{"type":322,"tag":385,"props":1572,"children":1574},{"class":387,"line":1573},22,[1575,1580,1584],{"type":322,"tag":385,"props":1576,"children":1577},{"style":398},[1578],{"type":328,"value":1579},"  cancelInterval",{"type":322,"tag":385,"props":1581,"children":1582},{"style":404},[1583],{"type":328,"value":489},{"type":322,"tag":385,"props":1585,"children":1586},{"style":416},[1587],{"type":328,"value":449},{"type":322,"tag":385,"props":1589,"children":1591},{"class":387,"line":1590},23,[1592,1596,1600,1604,1608,1614,1618],{"type":322,"tag":385,"props":1593,"children":1594},{"style":441},[1595],{"type":328,"value":1489},{"type":322,"tag":385,"props":1597,"children":1598},{"style":476},[1599],{"type":328,"value":479},{"type":322,"tag":385,"props":1601,"children":1602},{"style":398},[1603],{"type":328,"value":1498},{"type":322,"tag":385,"props":1605,"children":1606},{"style":404},[1607],{"type":328,"value":407},{"type":322,"tag":385,"props":1609,"children":1611},{"style":1610},"--shiki-light:#A44185;--shiki-default:#A44185;--shiki-dark:#AAD94C",[1612],{"type":328,"value":1613},"\"1s之后关闭定时器\"",{"type":322,"tag":385,"props":1615,"children":1616},{"style":404},[1617],{"type":328,"value":567},{"type":322,"tag":385,"props":1619,"children":1620},{"style":416},[1621],{"type":328,"value":449},{"type":322,"tag":385,"props":1623,"children":1625},{"class":387,"line":1624},24,[1626,1630,1634,1639,1643],{"type":322,"tag":385,"props":1627,"children":1628},{"style":404},[1629],{"type":328,"value":1432},{"type":322,"tag":385,"props":1631,"children":1632},{"style":416},[1633],{"type":328,"value":419},{"type":322,"tag":385,"props":1635,"children":1636},{"style":1505},[1637],{"type":328,"value":1638}," 1000",{"type":322,"tag":385,"props":1640,"children":1641},{"style":404},[1642],{"type":328,"value":567},{"type":322,"tag":385,"props":1644,"children":1645},{"style":416},[1646],{"type":328,"value":449},{"type":322,"tag":338,"props":1648,"children":1649},{},[1650],{"type":328,"value":1651},"另一种方案：",{"type":322,"tag":375,"props":1653,"children":1655},{"className":377,"code":1654,"language":379,"meta":317,"style":317},"function _setInterval(handler, timeout, ...args) {\n  // 判断是否为浏览器环境\n  let isBrowser = typeof window !== \"undefined\";\n  if (isBrowser && this !== window) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  let timer = {};\n  if (isBrowser) {\n    // 浏览器上的处理\n    timer = {\n      value: -1,\n      valueOf() {\n        return this.value;\n      },\n    };\n    const callback = () => {\n      timer.value = setTimeout(callback, timeout);\n      handler.apply(this, args);\n    };\n    timer.value = setTimeout(callback, timeout);\n  } else {\n    // nodejs 的处理\n    const callback = () => {\n      Object.assign(timer, setTimeout(callback, timeout));\n      handler.apply(this, args);\n    };\n    Object.assign(timer, setTimeout(callback, timeout));\n  }\n  return timer;\n}\n",[1656],{"type":322,"tag":355,"props":1657,"children":1658},{"__ignoreMap":317},[1659,1705,1713,1752,1791,1826,1834,1858,1877,1885,1900,1927,1940,1965,1977,1988,2017,2066,2108,2119,2166,2183,2191,2218,2276,2316,2328,2385,2393,2409],{"type":322,"tag":385,"props":1660,"children":1661},{"class":387,"line":388},[1662,1666,1670,1674,1679,1683,1687,1691,1696,1701],{"type":322,"tag":385,"props":1663,"children":1664},{"style":392},[1665],{"type":328,"value":395},{"type":322,"tag":385,"props":1667,"children":1668},{"style":398},[1669],{"type":328,"value":799},{"type":322,"tag":385,"props":1671,"children":1672},{"style":404},[1673],{"type":328,"value":407},{"type":322,"tag":385,"props":1675,"children":1676},{"style":410},[1677],{"type":328,"value":1678},"handler",{"type":322,"tag":385,"props":1680,"children":1681},{"style":416},[1682],{"type":328,"value":419},{"type":322,"tag":385,"props":1684,"children":1685},{"style":410},[1686],{"type":328,"value":424},{"type":322,"tag":385,"props":1688,"children":1689},{"style":416},[1690],{"type":328,"value":419},{"type":322,"tag":385,"props":1692,"children":1693},{"style":465},[1694],{"type":328,"value":1695}," ...",{"type":322,"tag":385,"props":1697,"children":1698},{"style":410},[1699],{"type":328,"value":1700},"args",{"type":322,"tag":385,"props":1702,"children":1703},{"style":404},[1704],{"type":328,"value":429},{"type":322,"tag":385,"props":1706,"children":1707},{"class":387,"line":432},[1708],{"type":322,"tag":385,"props":1709,"children":1710},{"style":1277},[1711],{"type":328,"value":1712},"  // 判断是否为浏览器环境\n",{"type":322,"tag":385,"props":1714,"children":1715},{"class":387,"line":452},[1716,1720,1725,1729,1734,1738,1743,1748],{"type":322,"tag":385,"props":1717,"children":1718},{"style":392},[1719],{"type":328,"value":438},{"type":322,"tag":385,"props":1721,"children":1722},{"style":441},[1723],{"type":328,"value":1724}," isBrowser",{"type":322,"tag":385,"props":1726,"children":1727},{"style":465},[1728],{"type":328,"value":468},{"type":322,"tag":385,"props":1730,"children":1731},{"style":465},[1732],{"type":328,"value":1733}," typeof",{"type":322,"tag":385,"props":1735,"children":1736},{"style":441},[1737],{"type":328,"value":544},{"type":322,"tag":385,"props":1739,"children":1740},{"style":465},[1741],{"type":328,"value":1742}," !==",{"type":322,"tag":385,"props":1744,"children":1745},{"style":1610},[1746],{"type":328,"value":1747}," \"undefined\"",{"type":322,"tag":385,"props":1749,"children":1750},{"style":416},[1751],{"type":328,"value":449},{"type":322,"tag":385,"props":1753,"children":1754},{"class":387,"line":496},[1755,1760,1764,1769,1774,1779,1783,1787],{"type":322,"tag":385,"props":1756,"children":1757},{"style":578},[1758],{"type":328,"value":1759},"  if",{"type":322,"tag":385,"props":1761,"children":1762},{"style":404},[1763],{"type":328,"value":586},{"type":322,"tag":385,"props":1765,"children":1766},{"style":441},[1767],{"type":328,"value":1768},"isBrowser",{"type":322,"tag":385,"props":1770,"children":1771},{"style":465},[1772],{"type":328,"value":1773}," &&",{"type":322,"tag":385,"props":1775,"children":1776},{"style":651},[1777],{"type":328,"value":1778}," this",{"type":322,"tag":385,"props":1780,"children":1781},{"style":465},[1782],{"type":328,"value":1742},{"type":322,"tag":385,"props":1784,"children":1785},{"style":441},[1786],{"type":328,"value":544},{"type":322,"tag":385,"props":1788,"children":1789},{"style":404},[1790],{"type":328,"value":429},{"type":322,"tag":385,"props":1792,"children":1793},{"class":387,"line":529},[1794,1799,1804,1809,1813,1818,1822],{"type":322,"tag":385,"props":1795,"children":1796},{"style":578},[1797],{"type":328,"value":1798},"    throw",{"type":322,"tag":385,"props":1800,"children":1801},{"style":465},[1802],{"type":328,"value":1803}," new",{"type":322,"tag":385,"props":1805,"children":1806},{"style":398},[1807],{"type":328,"value":1808}," TypeError",{"type":322,"tag":385,"props":1810,"children":1811},{"style":404},[1812],{"type":328,"value":407},{"type":322,"tag":385,"props":1814,"children":1815},{"style":1610},[1816],{"type":328,"value":1817},"\"Illegal invocation\"",{"type":322,"tag":385,"props":1819,"children":1820},{"style":404},[1821],{"type":328,"value":567},{"type":322,"tag":385,"props":1823,"children":1824},{"style":416},[1825],{"type":328,"value":449},{"type":322,"tag":385,"props":1827,"children":1828},{"class":387,"line":574},[1829],{"type":322,"tag":385,"props":1830,"children":1831},{"style":404},[1832],{"type":328,"value":1833},"  }\n",{"type":322,"tag":385,"props":1835,"children":1836},{"class":387,"line":629},[1837,1841,1845,1849,1854],{"type":322,"tag":385,"props":1838,"children":1839},{"style":392},[1840],{"type":328,"value":438},{"type":322,"tag":385,"props":1842,"children":1843},{"style":441},[1844],{"type":328,"value":444},{"type":322,"tag":385,"props":1846,"children":1847},{"style":465},[1848],{"type":328,"value":468},{"type":322,"tag":385,"props":1850,"children":1851},{"style":404},[1852],{"type":328,"value":1853}," {}",{"type":322,"tag":385,"props":1855,"children":1856},{"style":416},[1857],{"type":328,"value":449},{"type":322,"tag":385,"props":1859,"children":1860},{"class":387,"line":673},[1861,1865,1869,1873],{"type":322,"tag":385,"props":1862,"children":1863},{"style":578},[1864],{"type":328,"value":1759},{"type":322,"tag":385,"props":1866,"children":1867},{"style":404},[1868],{"type":328,"value":586},{"type":322,"tag":385,"props":1870,"children":1871},{"style":441},[1872],{"type":328,"value":1768},{"type":322,"tag":385,"props":1874,"children":1875},{"style":404},[1876],{"type":328,"value":429},{"type":322,"tag":385,"props":1878,"children":1879},{"class":387,"line":708},[1880],{"type":322,"tag":385,"props":1881,"children":1882},{"style":1277},[1883],{"type":328,"value":1884},"    // 浏览器上的处理\n",{"type":322,"tag":385,"props":1886,"children":1887},{"class":387,"line":717},[1888,1892,1896],{"type":322,"tag":385,"props":1889,"children":1890},{"style":441},[1891],{"type":328,"value":535},{"type":322,"tag":385,"props":1893,"children":1894},{"style":465},[1895],{"type":328,"value":468},{"type":322,"tag":385,"props":1897,"children":1898},{"style":404},[1899],{"type":328,"value":526},{"type":322,"tag":385,"props":1901,"children":1902},{"class":387,"line":730},[1903,1908,1913,1918,1922],{"type":322,"tag":385,"props":1904,"children":1905},{"style":404},[1906],{"type":328,"value":1907},"      value",{"type":322,"tag":385,"props":1909,"children":1910},{"style":416},[1911],{"type":328,"value":1912},":",{"type":322,"tag":385,"props":1914,"children":1915},{"style":465},[1916],{"type":328,"value":1917}," -",{"type":322,"tag":385,"props":1919,"children":1920},{"style":1505},[1921],{"type":328,"value":1508},{"type":322,"tag":385,"props":1923,"children":1924},{"style":416},[1925],{"type":328,"value":1926},",\n",{"type":322,"tag":385,"props":1928,"children":1929},{"class":387,"line":763},[1930,1935],{"type":322,"tag":385,"props":1931,"children":1932},{"style":398},[1933],{"type":328,"value":1934},"      valueOf",{"type":322,"tag":385,"props":1936,"children":1937},{"style":404},[1938],{"type":328,"value":1939},"() {\n",{"type":322,"tag":385,"props":1941,"children":1942},{"class":387,"line":1132},[1943,1948,1952,1956,1961],{"type":322,"tag":385,"props":1944,"children":1945},{"style":578},[1946],{"type":328,"value":1947},"        return",{"type":322,"tag":385,"props":1949,"children":1950},{"style":651},[1951],{"type":328,"value":1778},{"type":322,"tag":385,"props":1953,"children":1954},{"style":476},[1955],{"type":328,"value":479},{"type":322,"tag":385,"props":1957,"children":1958},{"style":441},[1959],{"type":328,"value":1960},"value",{"type":322,"tag":385,"props":1962,"children":1963},{"style":416},[1964],{"type":328,"value":449},{"type":322,"tag":385,"props":1966,"children":1967},{"class":387,"line":1389},[1968,1973],{"type":322,"tag":385,"props":1969,"children":1970},{"style":404},[1971],{"type":328,"value":1972},"      }",{"type":322,"tag":385,"props":1974,"children":1975},{"style":416},[1976],{"type":328,"value":1926},{"type":322,"tag":385,"props":1978,"children":1979},{"class":387,"line":1426},[1980,1984],{"type":322,"tag":385,"props":1981,"children":1982},{"style":404},[1983],{"type":328,"value":1327},{"type":322,"tag":385,"props":1985,"children":1986},{"style":416},[1987],{"type":328,"value":449},{"type":322,"tag":385,"props":1989,"children":1990},{"class":387,"line":1439},[1991,1996,2001,2005,2009,2013],{"type":322,"tag":385,"props":1992,"children":1993},{"style":392},[1994],{"type":328,"value":1995},"    const",{"type":322,"tag":385,"props":1997,"children":1998},{"style":398},[1999],{"type":328,"value":2000}," callback",{"type":322,"tag":385,"props":2002,"children":2003},{"style":465},[2004],{"type":328,"value":468},{"type":322,"tag":385,"props":2006,"children":2007},{"style":404},[2008],{"type":328,"value":516},{"type":322,"tag":385,"props":2010,"children":2011},{"style":392},[2012],{"type":328,"value":521},{"type":322,"tag":385,"props":2014,"children":2015},{"style":404},[2016],{"type":328,"value":526},{"type":322,"tag":385,"props":2018,"children":2019},{"class":387,"line":1449},[2020,2025,2029,2033,2037,2041,2045,2050,2054,2058,2062],{"type":322,"tag":385,"props":2021,"children":2022},{"style":441},[2023],{"type":328,"value":2024},"      timer",{"type":322,"tag":385,"props":2026,"children":2027},{"style":476},[2028],{"type":328,"value":479},{"type":322,"tag":385,"props":2030,"children":2031},{"style":441},[2032],{"type":328,"value":1960},{"type":322,"tag":385,"props":2034,"children":2035},{"style":465},[2036],{"type":328,"value":468},{"type":322,"tag":385,"props":2038,"children":2039},{"style":398},[2040],{"type":328,"value":1258},{"type":322,"tag":385,"props":2042,"children":2043},{"style":404},[2044],{"type":328,"value":407},{"type":322,"tag":385,"props":2046,"children":2047},{"style":441},[2048],{"type":328,"value":2049},"callback",{"type":322,"tag":385,"props":2051,"children":2052},{"style":416},[2053],{"type":328,"value":419},{"type":322,"tag":385,"props":2055,"children":2056},{"style":441},[2057],{"type":328,"value":424},{"type":322,"tag":385,"props":2059,"children":2060},{"style":404},[2061],{"type":328,"value":567},{"type":322,"tag":385,"props":2063,"children":2064},{"style":416},[2065],{"type":328,"value":449},{"type":322,"tag":385,"props":2067,"children":2068},{"class":387,"line":1483},[2069,2074,2078,2083,2087,2091,2095,2100,2104],{"type":322,"tag":385,"props":2070,"children":2071},{"style":441},[2072],{"type":328,"value":2073},"      handler",{"type":322,"tag":385,"props":2075,"children":2076},{"style":476},[2077],{"type":328,"value":479},{"type":322,"tag":385,"props":2079,"children":2080},{"style":398},[2081],{"type":328,"value":2082},"apply",{"type":322,"tag":385,"props":2084,"children":2085},{"style":404},[2086],{"type":328,"value":407},{"type":322,"tag":385,"props":2088,"children":2089},{"style":651},[2090],{"type":328,"value":654},{"type":322,"tag":385,"props":2092,"children":2093},{"style":416},[2094],{"type":328,"value":419},{"type":322,"tag":385,"props":2096,"children":2097},{"style":441},[2098],{"type":328,"value":2099}," args",{"type":322,"tag":385,"props":2101,"children":2102},{"style":404},[2103],{"type":328,"value":567},{"type":322,"tag":385,"props":2105,"children":2106},{"style":416},[2107],{"type":328,"value":449},{"type":322,"tag":385,"props":2109,"children":2110},{"class":387,"line":1519},[2111,2115],{"type":322,"tag":385,"props":2112,"children":2113},{"style":404},[2114],{"type":328,"value":1327},{"type":322,"tag":385,"props":2116,"children":2117},{"style":416},[2118],{"type":328,"value":449},{"type":322,"tag":385,"props":2120,"children":2121},{"class":387,"line":1544},[2122,2126,2130,2134,2138,2142,2146,2150,2154,2158,2162],{"type":322,"tag":385,"props":2123,"children":2124},{"style":441},[2125],{"type":328,"value":535},{"type":322,"tag":385,"props":2127,"children":2128},{"style":476},[2129],{"type":328,"value":479},{"type":322,"tag":385,"props":2131,"children":2132},{"style":441},[2133],{"type":328,"value":1960},{"type":322,"tag":385,"props":2135,"children":2136},{"style":465},[2137],{"type":328,"value":468},{"type":322,"tag":385,"props":2139,"children":2140},{"style":398},[2141],{"type":328,"value":1258},{"type":322,"tag":385,"props":2143,"children":2144},{"style":404},[2145],{"type":328,"value":407},{"type":322,"tag":385,"props":2147,"children":2148},{"style":441},[2149],{"type":328,"value":2049},{"type":322,"tag":385,"props":2151,"children":2152},{"style":416},[2153],{"type":328,"value":419},{"type":322,"tag":385,"props":2155,"children":2156},{"style":441},[2157],{"type":328,"value":424},{"type":322,"tag":385,"props":2159,"children":2160},{"style":404},[2161],{"type":328,"value":567},{"type":322,"tag":385,"props":2163,"children":2164},{"style":416},[2165],{"type":328,"value":449},{"type":322,"tag":385,"props":2167,"children":2168},{"class":387,"line":1552},[2169,2174,2179],{"type":322,"tag":385,"props":2170,"children":2171},{"style":404},[2172],{"type":328,"value":2173},"  } ",{"type":322,"tag":385,"props":2175,"children":2176},{"style":578},[2177],{"type":328,"value":2178},"else",{"type":322,"tag":385,"props":2180,"children":2181},{"style":404},[2182],{"type":328,"value":526},{"type":322,"tag":385,"props":2184,"children":2185},{"class":387,"line":1573},[2186],{"type":322,"tag":385,"props":2187,"children":2188},{"style":1277},[2189],{"type":328,"value":2190},"    // nodejs 的处理\n",{"type":322,"tag":385,"props":2192,"children":2193},{"class":387,"line":1590},[2194,2198,2202,2206,2210,2214],{"type":322,"tag":385,"props":2195,"children":2196},{"style":392},[2197],{"type":328,"value":1995},{"type":322,"tag":385,"props":2199,"children":2200},{"style":398},[2201],{"type":328,"value":2000},{"type":322,"tag":385,"props":2203,"children":2204},{"style":465},[2205],{"type":328,"value":468},{"type":322,"tag":385,"props":2207,"children":2208},{"style":404},[2209],{"type":328,"value":516},{"type":322,"tag":385,"props":2211,"children":2212},{"style":392},[2213],{"type":328,"value":521},{"type":322,"tag":385,"props":2215,"children":2216},{"style":404},[2217],{"type":328,"value":526},{"type":322,"tag":385,"props":2219,"children":2220},{"class":387,"line":1624},[2221,2226,2230,2235,2239,2243,2247,2251,2255,2259,2263,2267,2272],{"type":322,"tag":385,"props":2222,"children":2223},{"style":441},[2224],{"type":328,"value":2225},"      Object",{"type":322,"tag":385,"props":2227,"children":2228},{"style":476},[2229],{"type":328,"value":479},{"type":322,"tag":385,"props":2231,"children":2232},{"style":398},[2233],{"type":328,"value":2234},"assign",{"type":322,"tag":385,"props":2236,"children":2237},{"style":404},[2238],{"type":328,"value":407},{"type":322,"tag":385,"props":2240,"children":2241},{"style":441},[2242],{"type":328,"value":697},{"type":322,"tag":385,"props":2244,"children":2245},{"style":416},[2246],{"type":328,"value":419},{"type":322,"tag":385,"props":2248,"children":2249},{"style":398},[2250],{"type":328,"value":1258},{"type":322,"tag":385,"props":2252,"children":2253},{"style":404},[2254],{"type":328,"value":407},{"type":322,"tag":385,"props":2256,"children":2257},{"style":441},[2258],{"type":328,"value":2049},{"type":322,"tag":385,"props":2260,"children":2261},{"style":416},[2262],{"type":328,"value":419},{"type":322,"tag":385,"props":2264,"children":2265},{"style":441},[2266],{"type":328,"value":424},{"type":322,"tag":385,"props":2268,"children":2269},{"style":404},[2270],{"type":328,"value":2271},"))",{"type":322,"tag":385,"props":2273,"children":2274},{"style":416},[2275],{"type":328,"value":449},{"type":322,"tag":385,"props":2277,"children":2279},{"class":387,"line":2278},25,[2280,2284,2288,2292,2296,2300,2304,2308,2312],{"type":322,"tag":385,"props":2281,"children":2282},{"style":441},[2283],{"type":328,"value":2073},{"type":322,"tag":385,"props":2285,"children":2286},{"style":476},[2287],{"type":328,"value":479},{"type":322,"tag":385,"props":2289,"children":2290},{"style":398},[2291],{"type":328,"value":2082},{"type":322,"tag":385,"props":2293,"children":2294},{"style":404},[2295],{"type":328,"value":407},{"type":322,"tag":385,"props":2297,"children":2298},{"style":651},[2299],{"type":328,"value":654},{"type":322,"tag":385,"props":2301,"children":2302},{"style":416},[2303],{"type":328,"value":419},{"type":322,"tag":385,"props":2305,"children":2306},{"style":441},[2307],{"type":328,"value":2099},{"type":322,"tag":385,"props":2309,"children":2310},{"style":404},[2311],{"type":328,"value":567},{"type":322,"tag":385,"props":2313,"children":2314},{"style":416},[2315],{"type":328,"value":449},{"type":322,"tag":385,"props":2317,"children":2319},{"class":387,"line":2318},26,[2320,2324],{"type":322,"tag":385,"props":2321,"children":2322},{"style":404},[2323],{"type":328,"value":1327},{"type":322,"tag":385,"props":2325,"children":2326},{"style":416},[2327],{"type":328,"value":449},{"type":322,"tag":385,"props":2329,"children":2331},{"class":387,"line":2330},27,[2332,2337,2341,2345,2349,2353,2357,2361,2365,2369,2373,2377,2381],{"type":322,"tag":385,"props":2333,"children":2334},{"style":441},[2335],{"type":328,"value":2336},"    Object",{"type":322,"tag":385,"props":2338,"children":2339},{"style":476},[2340],{"type":328,"value":479},{"type":322,"tag":385,"props":2342,"children":2343},{"style":398},[2344],{"type":328,"value":2234},{"type":322,"tag":385,"props":2346,"children":2347},{"style":404},[2348],{"type":328,"value":407},{"type":322,"tag":385,"props":2350,"children":2351},{"style":441},[2352],{"type":328,"value":697},{"type":322,"tag":385,"props":2354,"children":2355},{"style":416},[2356],{"type":328,"value":419},{"type":322,"tag":385,"props":2358,"children":2359},{"style":398},[2360],{"type":328,"value":1258},{"type":322,"tag":385,"props":2362,"children":2363},{"style":404},[2364],{"type":328,"value":407},{"type":322,"tag":385,"props":2366,"children":2367},{"style":441},[2368],{"type":328,"value":2049},{"type":322,"tag":385,"props":2370,"children":2371},{"style":416},[2372],{"type":328,"value":419},{"type":322,"tag":385,"props":2374,"children":2375},{"style":441},[2376],{"type":328,"value":424},{"type":322,"tag":385,"props":2378,"children":2379},{"style":404},[2380],{"type":328,"value":2271},{"type":322,"tag":385,"props":2382,"children":2383},{"style":416},[2384],{"type":328,"value":449},{"type":322,"tag":385,"props":2386,"children":2388},{"class":387,"line":2387},28,[2389],{"type":322,"tag":385,"props":2390,"children":2391},{"style":404},[2392],{"type":328,"value":1833},{"type":322,"tag":385,"props":2394,"children":2396},{"class":387,"line":2395},29,[2397,2401,2405],{"type":322,"tag":385,"props":2398,"children":2399},{"style":578},[2400],{"type":328,"value":1121},{"type":322,"tag":385,"props":2402,"children":2403},{"style":441},[2404],{"type":328,"value":444},{"type":322,"tag":385,"props":2406,"children":2407},{"style":416},[2408],{"type":328,"value":449},{"type":322,"tag":385,"props":2410,"children":2412},{"class":387,"line":2411},30,[2413],{"type":322,"tag":385,"props":2414,"children":2415},{"style":404},[2416],{"type":328,"value":769},{"type":322,"tag":323,"props":2418,"children":2420},{"id":2419},"setinterval-模拟-settimeout",[2421],{"type":328,"value":2422},"setInterval 模拟 setTimeout",{"type":322,"tag":338,"props":2424,"children":2425},{},[2426],{"type":328,"value":2427},"思路：setTimeout 的特性是在指定的时间内只执行一次，我们只要在 setInterval 内部执行 callback 之后，把定时器关掉即可。",{"type":322,"tag":375,"props":2429,"children":2431},{"className":377,"code":2430,"language":379,"meta":317,"style":317},"const _setTimeout = (fn, timeout) => {\n  let timer = null;\n  timer = setInterval(() => {\n    // 关闭定时器，保证只执行一次fn，也就达到了setTimeout的效果了\n    clearInterval(timer);\n    fn();\n  }, timeout);\n  // 返回用于关闭定时器的方法\n  return () => clearInterval(timer);\n};\n\nlet cancelTimeout = _setTimeout(() => {\n  console.log(\"1s 后打印出 1\");\n}, 1000);\n",[2432],{"type":322,"tag":355,"props":2433,"children":2434},{"__ignoreMap":317},[2435,2478,2502,2530,2538,2562,2578,2601,2609,2645,2656,2663,2695,2727],{"type":322,"tag":385,"props":2436,"children":2437},{"class":387,"line":388},[2438,2442,2446,2450,2454,2458,2462,2466,2470,2474],{"type":322,"tag":385,"props":2439,"children":2440},{"style":392},[2441],{"type":328,"value":1163},{"type":322,"tag":385,"props":2443,"children":2444},{"style":398},[2445],{"type":328,"value":401},{"type":322,"tag":385,"props":2447,"children":2448},{"style":465},[2449],{"type":328,"value":468},{"type":322,"tag":385,"props":2451,"children":2452},{"style":404},[2453],{"type":328,"value":586},{"type":322,"tag":385,"props":2455,"children":2456},{"style":410},[2457],{"type":328,"value":413},{"type":322,"tag":385,"props":2459,"children":2460},{"style":416},[2461],{"type":328,"value":419},{"type":322,"tag":385,"props":2463,"children":2464},{"style":410},[2465],{"type":328,"value":424},{"type":322,"tag":385,"props":2467,"children":2468},{"style":404},[2469],{"type":328,"value":1192},{"type":322,"tag":385,"props":2471,"children":2472},{"style":392},[2473],{"type":328,"value":521},{"type":322,"tag":385,"props":2475,"children":2476},{"style":404},[2477],{"type":328,"value":526},{"type":322,"tag":385,"props":2479,"children":2480},{"class":387,"line":432},[2481,2485,2489,2493,2498],{"type":322,"tag":385,"props":2482,"children":2483},{"style":392},[2484],{"type":328,"value":438},{"type":322,"tag":385,"props":2486,"children":2487},{"style":441},[2488],{"type":328,"value":444},{"type":322,"tag":385,"props":2490,"children":2491},{"style":465},[2492],{"type":328,"value":468},{"type":322,"tag":385,"props":2494,"children":2495},{"style":1505},[2496],{"type":328,"value":2497}," null",{"type":322,"tag":385,"props":2499,"children":2500},{"style":416},[2501],{"type":328,"value":449},{"type":322,"tag":385,"props":2503,"children":2504},{"class":387,"line":452},[2505,2509,2513,2518,2522,2526],{"type":322,"tag":385,"props":2506,"children":2507},{"style":441},[2508],{"type":328,"value":1080},{"type":322,"tag":385,"props":2510,"children":2511},{"style":465},[2512],{"type":328,"value":468},{"type":322,"tag":385,"props":2514,"children":2515},{"style":398},[2516],{"type":328,"value":2517}," setInterval",{"type":322,"tag":385,"props":2519,"children":2520},{"style":404},[2521],{"type":328,"value":1263},{"type":322,"tag":385,"props":2523,"children":2524},{"style":392},[2525],{"type":328,"value":521},{"type":322,"tag":385,"props":2527,"children":2528},{"style":404},[2529],{"type":328,"value":526},{"type":322,"tag":385,"props":2531,"children":2532},{"class":387,"line":496},[2533],{"type":322,"tag":385,"props":2534,"children":2535},{"style":1277},[2536],{"type":328,"value":2537},"    // 关闭定时器，保证只执行一次fn，也就达到了setTimeout的效果了\n",{"type":322,"tag":385,"props":2539,"children":2540},{"class":387,"line":529},[2541,2546,2550,2554,2558],{"type":322,"tag":385,"props":2542,"children":2543},{"style":398},[2544],{"type":328,"value":2545},"    clearInterval",{"type":322,"tag":385,"props":2547,"children":2548},{"style":404},[2549],{"type":328,"value":407},{"type":322,"tag":385,"props":2551,"children":2552},{"style":441},[2553],{"type":328,"value":697},{"type":322,"tag":385,"props":2555,"children":2556},{"style":404},[2557],{"type":328,"value":567},{"type":322,"tag":385,"props":2559,"children":2560},{"style":416},[2561],{"type":328,"value":449},{"type":322,"tag":385,"props":2563,"children":2564},{"class":387,"line":574},[2565,2570,2574],{"type":322,"tag":385,"props":2566,"children":2567},{"style":398},[2568],{"type":328,"value":2569},"    fn",{"type":322,"tag":385,"props":2571,"children":2572},{"style":404},[2573],{"type":328,"value":489},{"type":322,"tag":385,"props":2575,"children":2576},{"style":416},[2577],{"type":328,"value":449},{"type":322,"tag":385,"props":2579,"children":2580},{"class":387,"line":629},[2581,2585,2589,2593,2597],{"type":322,"tag":385,"props":2582,"children":2583},{"style":404},[2584],{"type":328,"value":723},{"type":322,"tag":385,"props":2586,"children":2587},{"style":416},[2588],{"type":328,"value":419},{"type":322,"tag":385,"props":2590,"children":2591},{"style":441},[2592],{"type":328,"value":424},{"type":322,"tag":385,"props":2594,"children":2595},{"style":404},[2596],{"type":328,"value":567},{"type":322,"tag":385,"props":2598,"children":2599},{"style":416},[2600],{"type":328,"value":449},{"type":322,"tag":385,"props":2602,"children":2603},{"class":387,"line":673},[2604],{"type":322,"tag":385,"props":2605,"children":2606},{"style":1277},[2607],{"type":328,"value":2608},"  // 返回用于关闭定时器的方法\n",{"type":322,"tag":385,"props":2610,"children":2611},{"class":387,"line":708},[2612,2616,2620,2624,2629,2633,2637,2641],{"type":322,"tag":385,"props":2613,"children":2614},{"style":578},[2615],{"type":328,"value":1121},{"type":322,"tag":385,"props":2617,"children":2618},{"style":404},[2619],{"type":328,"value":516},{"type":322,"tag":385,"props":2621,"children":2622},{"style":392},[2623],{"type":328,"value":521},{"type":322,"tag":385,"props":2625,"children":2626},{"style":398},[2627],{"type":328,"value":2628}," clearInterval",{"type":322,"tag":385,"props":2630,"children":2631},{"style":404},[2632],{"type":328,"value":407},{"type":322,"tag":385,"props":2634,"children":2635},{"style":441},[2636],{"type":328,"value":697},{"type":322,"tag":385,"props":2638,"children":2639},{"style":404},[2640],{"type":328,"value":567},{"type":322,"tag":385,"props":2642,"children":2643},{"style":416},[2644],{"type":328,"value":449},{"type":322,"tag":385,"props":2646,"children":2647},{"class":387,"line":717},[2648,2652],{"type":322,"tag":385,"props":2649,"children":2650},{"style":404},[2651],{"type":328,"value":1432},{"type":322,"tag":385,"props":2653,"children":2654},{"style":416},[2655],{"type":328,"value":449},{"type":322,"tag":385,"props":2657,"children":2658},{"class":387,"line":730},[2659],{"type":322,"tag":385,"props":2660,"children":2661},{"emptyLinePlaceholder":1443},[2662],{"type":328,"value":1446},{"type":322,"tag":385,"props":2664,"children":2665},{"class":387,"line":763},[2666,2670,2675,2679,2683,2687,2691],{"type":322,"tag":385,"props":2667,"children":2668},{"style":392},[2669],{"type":328,"value":1455},{"type":322,"tag":385,"props":2671,"children":2672},{"style":441},[2673],{"type":328,"value":2674}," cancelTimeout",{"type":322,"tag":385,"props":2676,"children":2677},{"style":465},[2678],{"type":328,"value":468},{"type":322,"tag":385,"props":2680,"children":2681},{"style":398},[2682],{"type":328,"value":401},{"type":322,"tag":385,"props":2684,"children":2685},{"style":404},[2686],{"type":328,"value":1263},{"type":322,"tag":385,"props":2688,"children":2689},{"style":392},[2690],{"type":328,"value":521},{"type":322,"tag":385,"props":2692,"children":2693},{"style":404},[2694],{"type":328,"value":526},{"type":322,"tag":385,"props":2696,"children":2697},{"class":387,"line":1132},[2698,2702,2706,2710,2714,2719,2723],{"type":322,"tag":385,"props":2699,"children":2700},{"style":441},[2701],{"type":328,"value":1489},{"type":322,"tag":385,"props":2703,"children":2704},{"style":476},[2705],{"type":328,"value":479},{"type":322,"tag":385,"props":2707,"children":2708},{"style":398},[2709],{"type":328,"value":1498},{"type":322,"tag":385,"props":2711,"children":2712},{"style":404},[2713],{"type":328,"value":407},{"type":322,"tag":385,"props":2715,"children":2716},{"style":1610},[2717],{"type":328,"value":2718},"\"1s 后打印出 1\"",{"type":322,"tag":385,"props":2720,"children":2721},{"style":404},[2722],{"type":328,"value":567},{"type":322,"tag":385,"props":2724,"children":2725},{"style":416},[2726],{"type":328,"value":449},{"type":322,"tag":385,"props":2728,"children":2729},{"class":387,"line":1389},[2730,2734,2738,2742,2746],{"type":322,"tag":385,"props":2731,"children":2732},{"style":404},[2733],{"type":328,"value":1432},{"type":322,"tag":385,"props":2735,"children":2736},{"style":416},[2737],{"type":328,"value":419},{"type":322,"tag":385,"props":2739,"children":2740},{"style":1505},[2741],{"type":328,"value":1638},{"type":322,"tag":385,"props":2743,"children":2744},{"style":404},[2745],{"type":328,"value":567},{"type":322,"tag":385,"props":2747,"children":2748},{"style":416},[2749],{"type":328,"value":449},{"type":322,"tag":2751,"props":2752,"children":2753},"style",{},[2754],{"type":328,"value":2755},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":317,"searchDepth":529,"depth":529,"links":2757},[2758,2764,2765],{"id":325,"depth":432,"text":329,"children":2759},[2760,2761,2762,2763],{"id":333,"depth":452,"text":336},{"id":345,"depth":452,"text":348},{"id":365,"depth":452,"text":368},{"id":777,"depth":452,"text":780},{"id":1140,"depth":432,"text":1143},{"id":2419,"depth":432,"text":2422},"markdown","content:2.code:2.source:1.native-api:5.timer.md","content","2.code/2.source/1.native-api/5.timer.md","md",[2772,2773],{"_path":277,"title":276,"description":317},{"_path":283,"title":282,"description":2774},"JSON.stringify() 方法将一个 js 对象或值转换为 json 字符串，如果指定了一个 replacer 函数，则可以选择性地替换值，或者指定的 replacer 是数组，则可选择性地仅包含数组指定的属性。",1712076274218]