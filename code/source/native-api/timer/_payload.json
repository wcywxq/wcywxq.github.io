[{"data":1,"prerenderedAt":2783},["Reactive",2],{"navigation":3,"/code/source/native-api/timer":322,"/code/source/native-api/timer-surround":2779},[4,32],{"title":5,"_path":6,"children":7},"八股文","/endorsement",[8,19],{"title":9,"_path":10,"children":11},"构建工具","/endorsement/build-tools",[12],{"title":13,"_path":14,"children":15},"Webpack","/endorsement/build-tools/webpack",[16],{"title":17,"_path":18},"构建流程","/endorsement/build-tools/webpack/build-process",{"title":20,"_path":21,"children":22},"Html","/endorsement/html",[23,26,29],{"title":24,"_path":25},"Canvas 和 Svg","/endorsement/html/canvas-svg",{"title":27,"_path":28},"DOCTYPE 文档类型","/endorsement/html/doc-type",{"title":30,"_path":31},"离线存储","/endorsement/html/offline-storage",{"title":33,"_path":34,"children":35},"代码","/code",[36,266,315],{"title":37,"_path":38,"children":39},"算法","/code/algorithm",[40,42,55],{"title":41,"_path":38},"刷题索引",{"title":43,"_path":44,"children":45},"剑指 offer","/code/algorithm/sword-ofter",[46,49,52],{"title":47,"_path":48},"LCR.140 训练计划 II","/code/algorithm/sword-ofter/lian-biao-zhong-dao-shu-di-kge-jie-dian-lcof",{"title":50,"_path":51},"LCR 169. 招式拆解 II","/code/algorithm/sword-ofter/di-yi-ge-zhi-chu-xian-yi-ci-de-zi-fu-lcof",{"title":53,"_path":54},"LCR 187. 破冰游戏","/code/algorithm/sword-ofter/yuan-quan-zhong-zui-hou-sheng-xia-de-shu-zi-lcof",{"title":56,"_path":57,"children":58},"力扣 leetCode","/code/algorithm/leetcode",[59,62,65,68,71,74,77,80,83,86,89,92,95,98,101,104,107,110,113,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,176,179,182,185,188,191,194,197,200,203,206,209,212,215,218,221,224,227,230,233,236,239,242,245,248,251,254,257,260,263],{"title":60,"_path":61},"No.1 两数相加","/code/algorithm/leetcode/two-sum",{"title":63,"_path":64},"No.2 两数相加","/code/algorithm/leetcode/add-two-numbers",{"title":66,"_path":67},"No.3 无重复字符的最长子串","/code/algorithm/leetcode/longest-substring-without-repeating-characters",{"title":69,"_path":70},"No.4 寻找两个正序数组的中位数","/code/algorithm/leetcode/median-of-two-sorted-arrays",{"title":72,"_path":73},"No.5 最长回文子串","/code/algorithm/leetcode/longest-palindromic-substring",{"title":75,"_path":76},"No.7 整数反转","/code/algorithm/leetcode/reverse-integer",{"title":78,"_path":79},"No.9 回文数","/code/algorithm/leetcode/palindrome-number",{"title":81,"_path":82},"No.14 最长公共前缀","/code/algorithm/leetcode/longest-common-prefix",{"title":84,"_path":85},"No.15 三数之和","/code/algorithm/leetcode/3sum",{"title":87,"_path":88},"No.20 有效的括号","/code/algorithm/leetcode/valid-parentheses",{"title":90,"_path":91},"No.21 合并两个有序链表","/code/algorithm/leetcode/merge-two-sorted-lists",{"title":93,"_path":94},"No.22 括号生成","/code/algorithm/leetcode/generate-parentheses",{"title":96,"_path":97},"No.23 合并 K 个升序链表","/code/algorithm/leetcode/merge-k-sorted-lists",{"title":99,"_path":100},"No.24 两两交换链表中的节点","/code/algorithm/leetcode/swap-nodes-in-pairs",{"title":102,"_path":103},"No.25 K 个一组翻转链表","/code/algorithm/leetcode/reverse-nodes-in-k-group",{"title":105,"_path":106},"No.31 下一个排列","/code/algorithm/leetcode/next-permutation",{"title":108,"_path":109},"No.32 最长有效括号","/code/algorithm/leetcode/longest-valid-parentheses",{"title":111,"_path":112},"No.33 搜索旋转排序数组","/code/algorithm/leetcode/search-in-rotated-sorted-array",{"title":114,"_path":115},"No.34 在排序数组中查找元素的第一个和最后一个位置","/code/algorithm/leetcode/find-first-and-last-position-of-element-in-sorted-array",{"title":117,"_path":118},"No.39 组合求和","/code/algorithm/leetcode/combination-sum",{"title":120,"_path":121},"No.42 接雨水","/code/algorithm/leetcode/trapping-rain-water",{"title":123,"_path":124},"No.46 全排列","/code/algorithm/leetcode/permutations",{"title":126,"_path":127},"No.53 最大子序和","/code/algorithm/leetcode/maximum-subarray",{"title":129,"_path":130},"No.56 合并区间","/code/algorithm/leetcode/merge-intervals",{"title":132,"_path":133},"No.67 二进制求和","/code/algorithm/leetcode/add-binary",{"title":135,"_path":136},"No.69 x 的平方根","/code/algorithm/leetcode/sqrtx",{"title":138,"_path":139},"No.70 爬楼梯","/code/algorithm/leetcode/climbing-stairs",{"title":141,"_path":142},"No.88 合并两个有序数组","/code/algorithm/leetcode/merge-sorted-array",{"title":144,"_path":145},"No.92 反转链表 II","/code/algorithm/leetcode/reverse-linked-list-ii",{"title":147,"_path":148},"No.94 二叉树的中序遍历","/code/algorithm/leetcode/binary-tree-inorder-traversal",{"title":150,"_path":151},"No.101 对称二叉树","/code/algorithm/leetcode/symmetric-tree",{"title":153,"_path":154},"No.102 二叉树的层序遍历","/code/algorithm/leetcode/binary-tree-level-order-traversal",{"title":156,"_path":157},"No.104 二叉树的最大深度","/code/algorithm/leetcode/maximum-depth-of-binary-tree",{"title":159,"_path":160},"No.111 二叉树的最小深度","/code/algorithm/leetcode/minimum-depth-of-binary-tree",{"title":162,"_path":163},"No.112 路径总和","/code/algorithm/leetcode/path-sum",{"title":165,"_path":166},"No.121 买股票的最佳时机","/code/algorithm/leetcode/best-time-to-buy-and-sell-stock",{"title":168,"_path":169},"No.129 求根到叶子节点数字之和","/code/algorithm/leetcode/sum-root-to-leaf-numbers",{"title":171,"_path":172},"No.136 只出现一次的数字","/code/algorithm/leetcode/single-number",{"title":174,"_path":175},"No.141 环型链表","/code/algorithm/leetcode/linked-list-cycle",{"title":177,"_path":178},"No.146 LRU 缓存","/code/algorithm/leetcode/lru-cache",{"title":180,"_path":181},"No.151 反转字符串中的单词","/code/algorithm/leetcode/reverse-words-in-a-string",{"title":183,"_path":184},"No.153 寻找旋转排序数组中的最小值","/code/algorithm/leetcode/find-minimum-in-rotated-sorted-array",{"title":186,"_path":187},"No.155 最小栈","/code/algorithm/leetcode/min-stack",{"title":189,"_path":190},"No.160 相交链表","/code/algorithm/leetcode/intersection-of-two-linked-lists",{"title":192,"_path":193},"No.162 寻找峰值","/code/algorithm/leetcode/find-peak-element",{"title":195,"_path":196},"No.169 多数元素","/code/algorithm/leetcode/majority-element",{"title":198,"_path":199},"No.200 岛屿数量","/code/algorithm/leetcode/number-of-islands",{"title":201,"_path":202},"No.206 反转链表","/code/algorithm/leetcode/reverse-linked-list",{"title":204,"_path":205},"No.209 长度最小的子数组","/code/algorithm/leetcode/minimum-size-subarray-sum",{"title":207,"_path":208},"No.215 数组中的第K个最大元素","/code/algorithm/leetcode/kth-largest-element-in-an-array",{"title":210,"_path":211},"No.226 翻转二叉树","/code/algorithm/leetcode/invert-binary-tree",{"title":213,"_path":214},"No.238 除自身以外数组的乘积","/code/algorithm/leetcode/product-of-array-except-self",{"title":216,"_path":217},"No.322 零钱兑换","/code/algorithm/leetcode/coin-change",{"title":219,"_path":220},"No.334 递增的三元子序列","/code/algorithm/leetcode/increasing-triplet-subsequence",{"title":222,"_path":223},"No.344 反转字符串","/code/algorithm/leetcode/reverse-string",{"title":225,"_path":226},"No.345 反转字符串中的元音字母","/code/algorithm/leetcode/reverse-vowels-of-a-string",{"title":228,"_path":229},"No.384 打乱数组","/code/algorithm/leetcode/shuffle-an-array",{"title":231,"_path":232},"No.415 字符串相加","/code/algorithm/leetcode/add-strings",{"title":234,"_path":235},"No.443 压缩字符串","/code/algorithm/leetcode/string-compression",{"title":237,"_path":238},"No.509 斐波那契数","/code/algorithm/leetcode/fibonacci-number",{"title":240,"_path":241},"No.605 种花问题","/code/algorithm/leetcode/can-place-flowers",{"title":243,"_path":244},"No.617 合并二叉树","/code/algorithm/leetcode/merge-two-binary-trees",{"title":246,"_path":247},"No.678 有效的括号字符串","/code/algorithm/leetcode/valid-parenthesis-string",{"title":249,"_path":250},"No.704 二分查找","/code/algorithm/leetcode/binary-search",{"title":252,"_path":253},"No.912 排序数组","/code/algorithm/leetcode/sort-an-array",{"title":255,"_path":256},"No.1071 字符串的最大公因子","/code/algorithm/leetcode/greatest-common-divisor-of-strings",{"title":258,"_path":259},"No.1143 最长公共子序列","/code/algorithm/leetcode/longest-common-subsequence",{"title":261,"_path":262},"No.1431 拥有最多糖果的孩子","/code/algorithm/leetcode/kids-with-the-greatest-number-of-candies",{"title":264,"_path":265},"No.1768 交替合并字符串","/code/algorithm/leetcode/merge-strings-alternately",{"title":267,"_path":268,"children":269},"源码实现","/code/source",[270,295,308],{"title":271,"_path":272,"children":273},"原生 api","/code/source/native-api",[274,277,280,283,286,289,292],{"title":275,"_path":276},"ajax","/code/source/native-api/ajax",{"title":278,"_path":279},"call & apply & bind","/code/source/native-api/call-apply-bind",{"title":281,"_path":282},"new 操作符","/code/source/native-api/new",{"title":284,"_path":285},"instanceof 关键字","/code/source/native-api/instanceof",{"title":287,"_path":288},"定时器","/code/source/native-api/timer",{"title":290,"_path":291},"JSON.stringify","/code/source/native-api/json-stringify",{"title":293,"_path":294},"Iterator 迭代器","/code/source/native-api/iterator",{"title":296,"_path":297,"children":298},"数组 Array","/code/source/array",[299,302,305],{"title":300,"_path":301},"数组去重","/code/source/array/remove-duplicate",{"title":303,"_path":304},"数组扁平化","/code/source/array/flat",{"title":306,"_path":307},"交集、差集、并集、补集","/code/source/array/intersect-minus-union-complement",{"title":309,"_path":310,"children":311},"字符串 String","/code/source/string",[312],{"title":313,"_path":314},"repeat()","/code/source/string/repeat",{"title":316,"_path":317,"children":318},"业务场景","/code/scene",[319],{"title":320,"_path":321},"顺序打印 url 并支持 retry","/code/scene/promise-url-retry",{"_path":288,"_dir":323,"_draft":324,"_partial":324,"_locale":325,"title":287,"description":325,"body":326,"_type":2774,"_id":2775,"_source":2776,"_file":2777,"_extension":2778},"native-api",false,"",{"type":327,"children":328,"toc":2764},"root",[329,338,345,351,357,371,377,382,778,783,789,1146,1152,1157,1655,1660,2425,2431,2436,2758],{"type":330,"tag":331,"props":332,"children":334},"element","h2",{"id":333},"使用-requestanimationframe-实现定时器",[335],{"type":336,"value":337},"text","使用 RequestAnimationFrame 实现定时器",{"type":330,"tag":339,"props":340,"children":342},"h3",{"id":341},"浏览器默认提供的-settimeout-和-setinterval-的问题",[343],{"type":336,"value":344},"浏览器默认提供的 setTimeout 和 setInterval 的问题",{"type":330,"tag":346,"props":347,"children":348},"p",{},[349],{"type":336,"value":350},"首先在针对浏览器端的默认实现中，setTimeout 和 setInterval 的定时是 不准确的，因为我们知道 js 是单线程的，如果前面的代码耗费了较长的时间，那么会导致后面的定时器不能按时执行。此外 setInterval 会带来性能上的问题，比如存在执行累积的问题等等。\n可以使用 requestAnimationFrame 来实现定时器的要求，首先 requestAnimationFrame 自带函数节流功能，基本可以保证在 16.6ms 内只执行一次（不掉帧的情况下），并且该函数的延时效果是精确的，没有其他定时器时间不准的问题。",{"type":330,"tag":339,"props":352,"children":354},{"id":353},"requestanimationframe-简单介绍",[355],{"type":336,"value":356},"requestAnimationFrame 简单介绍",{"type":330,"tag":346,"props":358,"children":359},{},[360,362,369],{"type":336,"value":361},"requestAnimationFrame 的语法很简单：",{"type":330,"tag":363,"props":364,"children":366},"code",{"className":365},[],[367],{"type":336,"value":368},"window.requestAnimationFrame(callback)",{"type":336,"value":370},"。callback 为一个指定函数的参数，该函数在下次重新绘制动画时调用",{"type":330,"tag":339,"props":372,"children":374},{"id":373},"settimeout-实现",[375],{"type":336,"value":376},"setTimeout 实现",{"type":330,"tag":346,"props":378,"children":379},{},[380],{"type":336,"value":381},"重新绘制的时间即 16.6ms 执行。我们可以通过递归调用来达到定时器的效果",{"type":330,"tag":383,"props":384,"children":388},"pre",{"className":385,"code":386,"language":387,"meta":325,"style":325},"language-js shiki shiki-themes slack-ochin slack-ochin ayu-dark","function _setTimeout(fn, timeout) {\n  let timer;\n  let startTime = Date.now();\n  const loop = () => {\n    timer = window.requestAnimationFrame(loop);\n    if (Date.now() - startTime >= timeout) {\n      fn.call(this, timer);\n      window.cancelAnimationFrame(timer);\n    }\n  };\n  window.requestAnimationFrame(loop);\n}\n","js",[389],{"type":330,"tag":363,"props":390,"children":391},{"__ignoreMap":325},[392,438,458,502,535,580,635,679,714,723,736,769],{"type":330,"tag":393,"props":394,"children":397},"span",{"class":395,"line":396},"line",1,[398,404,410,416,422,428,433],{"type":330,"tag":393,"props":399,"children":401},{"style":400},"--shiki-light:#0991B6;--shiki-default:#0991B6;--shiki-dark:#FF8F40",[402],{"type":336,"value":403},"function",{"type":330,"tag":393,"props":405,"children":407},{"style":406},"--shiki-light:#7EB233;--shiki-default:#7EB233;--shiki-dark:#FFB454",[408],{"type":336,"value":409}," _setTimeout",{"type":330,"tag":393,"props":411,"children":413},{"style":412},"--shiki-light:#002339;--shiki-default:#002339;--shiki-dark:#BFBDB6",[414],{"type":336,"value":415},"(",{"type":330,"tag":393,"props":417,"children":419},{"style":418},"--shiki-light:#B1108E;--shiki-default:#B1108E;--shiki-dark:#D2A6FF",[420],{"type":336,"value":421},"fn",{"type":330,"tag":393,"props":423,"children":425},{"style":424},"--shiki-light:#002339;--shiki-default:#002339;--shiki-dark:#BFBDB6B3",[426],{"type":336,"value":427},",",{"type":330,"tag":393,"props":429,"children":430},{"style":418},[431],{"type":336,"value":432}," timeout",{"type":330,"tag":393,"props":434,"children":435},{"style":412},[436],{"type":336,"value":437},") {\n",{"type":330,"tag":393,"props":439,"children":441},{"class":395,"line":440},2,[442,447,453],{"type":330,"tag":393,"props":443,"children":444},{"style":400},[445],{"type":336,"value":446},"  let",{"type":330,"tag":393,"props":448,"children":450},{"style":449},"--shiki-light:#2F86D2;--shiki-default:#2F86D2;--shiki-dark:#BFBDB6",[451],{"type":336,"value":452}," timer",{"type":330,"tag":393,"props":454,"children":455},{"style":424},[456],{"type":336,"value":457},";\n",{"type":330,"tag":393,"props":459,"children":461},{"class":395,"line":460},3,[462,466,471,477,482,488,493,498],{"type":330,"tag":393,"props":463,"children":464},{"style":400},[465],{"type":336,"value":446},{"type":330,"tag":393,"props":467,"children":468},{"style":449},[469],{"type":336,"value":470}," startTime",{"type":330,"tag":393,"props":472,"children":474},{"style":473},"--shiki-light:#7B30D0;--shiki-default:#7B30D0;--shiki-dark:#F29668",[475],{"type":336,"value":476}," =",{"type":330,"tag":393,"props":478,"children":479},{"style":449},[480],{"type":336,"value":481}," Date",{"type":330,"tag":393,"props":483,"children":485},{"style":484},"--shiki-light:#002339;--shiki-default:#002339;--shiki-dark:#F29668",[486],{"type":336,"value":487},".",{"type":330,"tag":393,"props":489,"children":490},{"style":406},[491],{"type":336,"value":492},"now",{"type":330,"tag":393,"props":494,"children":495},{"style":412},[496],{"type":336,"value":497},"()",{"type":330,"tag":393,"props":499,"children":500},{"style":424},[501],{"type":336,"value":457},{"type":330,"tag":393,"props":503,"children":505},{"class":395,"line":504},4,[506,511,516,520,525,530],{"type":330,"tag":393,"props":507,"children":508},{"style":400},[509],{"type":336,"value":510},"  const",{"type":330,"tag":393,"props":512,"children":513},{"style":406},[514],{"type":336,"value":515}," loop",{"type":330,"tag":393,"props":517,"children":518},{"style":473},[519],{"type":336,"value":476},{"type":330,"tag":393,"props":521,"children":522},{"style":412},[523],{"type":336,"value":524}," () ",{"type":330,"tag":393,"props":526,"children":527},{"style":400},[528],{"type":336,"value":529},"=>",{"type":330,"tag":393,"props":531,"children":532},{"style":412},[533],{"type":336,"value":534}," {\n",{"type":330,"tag":393,"props":536,"children":538},{"class":395,"line":537},5,[539,544,548,553,557,562,566,571,576],{"type":330,"tag":393,"props":540,"children":541},{"style":449},[542],{"type":336,"value":543},"    timer",{"type":330,"tag":393,"props":545,"children":546},{"style":473},[547],{"type":336,"value":476},{"type":330,"tag":393,"props":549,"children":550},{"style":449},[551],{"type":336,"value":552}," window",{"type":330,"tag":393,"props":554,"children":555},{"style":484},[556],{"type":336,"value":487},{"type":330,"tag":393,"props":558,"children":559},{"style":406},[560],{"type":336,"value":561},"requestAnimationFrame",{"type":330,"tag":393,"props":563,"children":564},{"style":412},[565],{"type":336,"value":415},{"type":330,"tag":393,"props":567,"children":568},{"style":449},[569],{"type":336,"value":570},"loop",{"type":330,"tag":393,"props":572,"children":573},{"style":412},[574],{"type":336,"value":575},")",{"type":330,"tag":393,"props":577,"children":578},{"style":424},[579],{"type":336,"value":457},{"type":330,"tag":393,"props":581,"children":583},{"class":395,"line":582},6,[584,590,595,600,604,608,613,618,622,627,631],{"type":330,"tag":393,"props":585,"children":587},{"style":586},"--shiki-light:#7B30D0;--shiki-default:#7B30D0;--shiki-dark:#FF8F40",[588],{"type":336,"value":589},"    if",{"type":330,"tag":393,"props":591,"children":592},{"style":412},[593],{"type":336,"value":594}," (",{"type":330,"tag":393,"props":596,"children":597},{"style":449},[598],{"type":336,"value":599},"Date",{"type":330,"tag":393,"props":601,"children":602},{"style":484},[603],{"type":336,"value":487},{"type":330,"tag":393,"props":605,"children":606},{"style":406},[607],{"type":336,"value":492},{"type":330,"tag":393,"props":609,"children":610},{"style":412},[611],{"type":336,"value":612},"() ",{"type":330,"tag":393,"props":614,"children":615},{"style":473},[616],{"type":336,"value":617},"-",{"type":330,"tag":393,"props":619,"children":620},{"style":449},[621],{"type":336,"value":470},{"type":330,"tag":393,"props":623,"children":624},{"style":473},[625],{"type":336,"value":626}," >=",{"type":330,"tag":393,"props":628,"children":629},{"style":449},[630],{"type":336,"value":432},{"type":330,"tag":393,"props":632,"children":633},{"style":412},[634],{"type":336,"value":437},{"type":330,"tag":393,"props":636,"children":638},{"class":395,"line":637},7,[639,644,648,653,657,663,667,671,675],{"type":330,"tag":393,"props":640,"children":641},{"style":449},[642],{"type":336,"value":643},"      fn",{"type":330,"tag":393,"props":645,"children":646},{"style":484},[647],{"type":336,"value":487},{"type":330,"tag":393,"props":649,"children":650},{"style":406},[651],{"type":336,"value":652},"call",{"type":330,"tag":393,"props":654,"children":655},{"style":412},[656],{"type":336,"value":415},{"type":330,"tag":393,"props":658,"children":660},{"style":659},"--shiki-light:#000000;--shiki-default:#000000;--shiki-dark:#39BAE6;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:italic",[661],{"type":336,"value":662},"this",{"type":330,"tag":393,"props":664,"children":665},{"style":424},[666],{"type":336,"value":427},{"type":330,"tag":393,"props":668,"children":669},{"style":449},[670],{"type":336,"value":452},{"type":330,"tag":393,"props":672,"children":673},{"style":412},[674],{"type":336,"value":575},{"type":330,"tag":393,"props":676,"children":677},{"style":424},[678],{"type":336,"value":457},{"type":330,"tag":393,"props":680,"children":682},{"class":395,"line":681},8,[683,688,692,697,701,706,710],{"type":330,"tag":393,"props":684,"children":685},{"style":449},[686],{"type":336,"value":687},"      window",{"type":330,"tag":393,"props":689,"children":690},{"style":484},[691],{"type":336,"value":487},{"type":330,"tag":393,"props":693,"children":694},{"style":406},[695],{"type":336,"value":696},"cancelAnimationFrame",{"type":330,"tag":393,"props":698,"children":699},{"style":412},[700],{"type":336,"value":415},{"type":330,"tag":393,"props":702,"children":703},{"style":449},[704],{"type":336,"value":705},"timer",{"type":330,"tag":393,"props":707,"children":708},{"style":412},[709],{"type":336,"value":575},{"type":330,"tag":393,"props":711,"children":712},{"style":424},[713],{"type":336,"value":457},{"type":330,"tag":393,"props":715,"children":717},{"class":395,"line":716},9,[718],{"type":330,"tag":393,"props":719,"children":720},{"style":412},[721],{"type":336,"value":722},"    }\n",{"type":330,"tag":393,"props":724,"children":726},{"class":395,"line":725},10,[727,732],{"type":330,"tag":393,"props":728,"children":729},{"style":412},[730],{"type":336,"value":731},"  }",{"type":330,"tag":393,"props":733,"children":734},{"style":424},[735],{"type":336,"value":457},{"type":330,"tag":393,"props":737,"children":739},{"class":395,"line":738},11,[740,745,749,753,757,761,765],{"type":330,"tag":393,"props":741,"children":742},{"style":449},[743],{"type":336,"value":744},"  window",{"type":330,"tag":393,"props":746,"children":747},{"style":484},[748],{"type":336,"value":487},{"type":330,"tag":393,"props":750,"children":751},{"style":406},[752],{"type":336,"value":561},{"type":330,"tag":393,"props":754,"children":755},{"style":412},[756],{"type":336,"value":415},{"type":330,"tag":393,"props":758,"children":759},{"style":449},[760],{"type":336,"value":570},{"type":330,"tag":393,"props":762,"children":763},{"style":412},[764],{"type":336,"value":575},{"type":330,"tag":393,"props":766,"children":767},{"style":424},[768],{"type":336,"value":457},{"type":330,"tag":393,"props":770,"children":772},{"class":395,"line":771},12,[773],{"type":330,"tag":393,"props":774,"children":775},{"style":412},[776],{"type":336,"value":777},"}\n",{"type":330,"tag":346,"props":779,"children":780},{},[781],{"type":336,"value":782},"这里需要先定义一个开始时间 startTime，然后定义一个递归函数 loop，每次先递归调用自己获取最新的 timer，这样才能够保证可以取消掉，然后判断当前时间减去开始时间是否大于自己设定的值，如果大则回调并取消定时器即可，否则因为我们已经在一开始回调自己了，所以会在 16.6ms 后再次执行并判断，直到满足条件为止。",{"type":330,"tag":339,"props":784,"children":786},{"id":785},"setinterval-实现",[787],{"type":336,"value":788},"setInterval 实现",{"type":330,"tag":383,"props":790,"children":792},{"className":385,"code":791,"language":387,"meta":325,"style":325},"function _setInterval(fn, interval) {\n  let timer;\n  let startTime = Date.now();\n  const loop = () => {\n    timer = window.requestAnimationFrame(loop);\n    if (Date.now() - startTime >= interval) {\n      fn.call(this, timer);\n      startTime = Date.now();\n    }\n  };\n  timer = window.RequestAnimationFrame(loop);\n  return timer;\n}\n",[793],{"type":330,"tag":363,"props":794,"children":795},{"__ignoreMap":325},[796,829,844,879,906,945,992,1031,1063,1070,1081,1122,1138],{"type":330,"tag":393,"props":797,"children":798},{"class":395,"line":396},[799,803,808,812,816,820,825],{"type":330,"tag":393,"props":800,"children":801},{"style":400},[802],{"type":336,"value":403},{"type":330,"tag":393,"props":804,"children":805},{"style":406},[806],{"type":336,"value":807}," _setInterval",{"type":330,"tag":393,"props":809,"children":810},{"style":412},[811],{"type":336,"value":415},{"type":330,"tag":393,"props":813,"children":814},{"style":418},[815],{"type":336,"value":421},{"type":330,"tag":393,"props":817,"children":818},{"style":424},[819],{"type":336,"value":427},{"type":330,"tag":393,"props":821,"children":822},{"style":418},[823],{"type":336,"value":824}," interval",{"type":330,"tag":393,"props":826,"children":827},{"style":412},[828],{"type":336,"value":437},{"type":330,"tag":393,"props":830,"children":831},{"class":395,"line":440},[832,836,840],{"type":330,"tag":393,"props":833,"children":834},{"style":400},[835],{"type":336,"value":446},{"type":330,"tag":393,"props":837,"children":838},{"style":449},[839],{"type":336,"value":452},{"type":330,"tag":393,"props":841,"children":842},{"style":424},[843],{"type":336,"value":457},{"type":330,"tag":393,"props":845,"children":846},{"class":395,"line":460},[847,851,855,859,863,867,871,875],{"type":330,"tag":393,"props":848,"children":849},{"style":400},[850],{"type":336,"value":446},{"type":330,"tag":393,"props":852,"children":853},{"style":449},[854],{"type":336,"value":470},{"type":330,"tag":393,"props":856,"children":857},{"style":473},[858],{"type":336,"value":476},{"type":330,"tag":393,"props":860,"children":861},{"style":449},[862],{"type":336,"value":481},{"type":330,"tag":393,"props":864,"children":865},{"style":484},[866],{"type":336,"value":487},{"type":330,"tag":393,"props":868,"children":869},{"style":406},[870],{"type":336,"value":492},{"type":330,"tag":393,"props":872,"children":873},{"style":412},[874],{"type":336,"value":497},{"type":330,"tag":393,"props":876,"children":877},{"style":424},[878],{"type":336,"value":457},{"type":330,"tag":393,"props":880,"children":881},{"class":395,"line":504},[882,886,890,894,898,902],{"type":330,"tag":393,"props":883,"children":884},{"style":400},[885],{"type":336,"value":510},{"type":330,"tag":393,"props":887,"children":888},{"style":406},[889],{"type":336,"value":515},{"type":330,"tag":393,"props":891,"children":892},{"style":473},[893],{"type":336,"value":476},{"type":330,"tag":393,"props":895,"children":896},{"style":412},[897],{"type":336,"value":524},{"type":330,"tag":393,"props":899,"children":900},{"style":400},[901],{"type":336,"value":529},{"type":330,"tag":393,"props":903,"children":904},{"style":412},[905],{"type":336,"value":534},{"type":330,"tag":393,"props":907,"children":908},{"class":395,"line":537},[909,913,917,921,925,929,933,937,941],{"type":330,"tag":393,"props":910,"children":911},{"style":449},[912],{"type":336,"value":543},{"type":330,"tag":393,"props":914,"children":915},{"style":473},[916],{"type":336,"value":476},{"type":330,"tag":393,"props":918,"children":919},{"style":449},[920],{"type":336,"value":552},{"type":330,"tag":393,"props":922,"children":923},{"style":484},[924],{"type":336,"value":487},{"type":330,"tag":393,"props":926,"children":927},{"style":406},[928],{"type":336,"value":561},{"type":330,"tag":393,"props":930,"children":931},{"style":412},[932],{"type":336,"value":415},{"type":330,"tag":393,"props":934,"children":935},{"style":449},[936],{"type":336,"value":570},{"type":330,"tag":393,"props":938,"children":939},{"style":412},[940],{"type":336,"value":575},{"type":330,"tag":393,"props":942,"children":943},{"style":424},[944],{"type":336,"value":457},{"type":330,"tag":393,"props":946,"children":947},{"class":395,"line":582},[948,952,956,960,964,968,972,976,980,984,988],{"type":330,"tag":393,"props":949,"children":950},{"style":586},[951],{"type":336,"value":589},{"type":330,"tag":393,"props":953,"children":954},{"style":412},[955],{"type":336,"value":594},{"type":330,"tag":393,"props":957,"children":958},{"style":449},[959],{"type":336,"value":599},{"type":330,"tag":393,"props":961,"children":962},{"style":484},[963],{"type":336,"value":487},{"type":330,"tag":393,"props":965,"children":966},{"style":406},[967],{"type":336,"value":492},{"type":330,"tag":393,"props":969,"children":970},{"style":412},[971],{"type":336,"value":612},{"type":330,"tag":393,"props":973,"children":974},{"style":473},[975],{"type":336,"value":617},{"type":330,"tag":393,"props":977,"children":978},{"style":449},[979],{"type":336,"value":470},{"type":330,"tag":393,"props":981,"children":982},{"style":473},[983],{"type":336,"value":626},{"type":330,"tag":393,"props":985,"children":986},{"style":449},[987],{"type":336,"value":824},{"type":330,"tag":393,"props":989,"children":990},{"style":412},[991],{"type":336,"value":437},{"type":330,"tag":393,"props":993,"children":994},{"class":395,"line":637},[995,999,1003,1007,1011,1015,1019,1023,1027],{"type":330,"tag":393,"props":996,"children":997},{"style":449},[998],{"type":336,"value":643},{"type":330,"tag":393,"props":1000,"children":1001},{"style":484},[1002],{"type":336,"value":487},{"type":330,"tag":393,"props":1004,"children":1005},{"style":406},[1006],{"type":336,"value":652},{"type":330,"tag":393,"props":1008,"children":1009},{"style":412},[1010],{"type":336,"value":415},{"type":330,"tag":393,"props":1012,"children":1013},{"style":659},[1014],{"type":336,"value":662},{"type":330,"tag":393,"props":1016,"children":1017},{"style":424},[1018],{"type":336,"value":427},{"type":330,"tag":393,"props":1020,"children":1021},{"style":449},[1022],{"type":336,"value":452},{"type":330,"tag":393,"props":1024,"children":1025},{"style":412},[1026],{"type":336,"value":575},{"type":330,"tag":393,"props":1028,"children":1029},{"style":424},[1030],{"type":336,"value":457},{"type":330,"tag":393,"props":1032,"children":1033},{"class":395,"line":681},[1034,1039,1043,1047,1051,1055,1059],{"type":330,"tag":393,"props":1035,"children":1036},{"style":449},[1037],{"type":336,"value":1038},"      startTime",{"type":330,"tag":393,"props":1040,"children":1041},{"style":473},[1042],{"type":336,"value":476},{"type":330,"tag":393,"props":1044,"children":1045},{"style":449},[1046],{"type":336,"value":481},{"type":330,"tag":393,"props":1048,"children":1049},{"style":484},[1050],{"type":336,"value":487},{"type":330,"tag":393,"props":1052,"children":1053},{"style":406},[1054],{"type":336,"value":492},{"type":330,"tag":393,"props":1056,"children":1057},{"style":412},[1058],{"type":336,"value":497},{"type":330,"tag":393,"props":1060,"children":1061},{"style":424},[1062],{"type":336,"value":457},{"type":330,"tag":393,"props":1064,"children":1065},{"class":395,"line":716},[1066],{"type":330,"tag":393,"props":1067,"children":1068},{"style":412},[1069],{"type":336,"value":722},{"type":330,"tag":393,"props":1071,"children":1072},{"class":395,"line":725},[1073,1077],{"type":330,"tag":393,"props":1074,"children":1075},{"style":412},[1076],{"type":336,"value":731},{"type":330,"tag":393,"props":1078,"children":1079},{"style":424},[1080],{"type":336,"value":457},{"type":330,"tag":393,"props":1082,"children":1083},{"class":395,"line":738},[1084,1089,1093,1097,1101,1106,1110,1114,1118],{"type":330,"tag":393,"props":1085,"children":1086},{"style":449},[1087],{"type":336,"value":1088},"  timer",{"type":330,"tag":393,"props":1090,"children":1091},{"style":473},[1092],{"type":336,"value":476},{"type":330,"tag":393,"props":1094,"children":1095},{"style":449},[1096],{"type":336,"value":552},{"type":330,"tag":393,"props":1098,"children":1099},{"style":484},[1100],{"type":336,"value":487},{"type":330,"tag":393,"props":1102,"children":1103},{"style":406},[1104],{"type":336,"value":1105},"RequestAnimationFrame",{"type":330,"tag":393,"props":1107,"children":1108},{"style":412},[1109],{"type":336,"value":415},{"type":330,"tag":393,"props":1111,"children":1112},{"style":449},[1113],{"type":336,"value":570},{"type":330,"tag":393,"props":1115,"children":1116},{"style":412},[1117],{"type":336,"value":575},{"type":330,"tag":393,"props":1119,"children":1120},{"style":424},[1121],{"type":336,"value":457},{"type":330,"tag":393,"props":1123,"children":1124},{"class":395,"line":771},[1125,1130,1134],{"type":330,"tag":393,"props":1126,"children":1127},{"style":586},[1128],{"type":336,"value":1129},"  return",{"type":330,"tag":393,"props":1131,"children":1132},{"style":449},[1133],{"type":336,"value":452},{"type":330,"tag":393,"props":1135,"children":1136},{"style":424},[1137],{"type":336,"value":457},{"type":330,"tag":393,"props":1139,"children":1141},{"class":395,"line":1140},13,[1142],{"type":330,"tag":393,"props":1143,"children":1144},{"style":412},[1145],{"type":336,"value":777},{"type":330,"tag":331,"props":1147,"children":1149},{"id":1148},"settimeout-实现-setinterval",[1150],{"type":336,"value":1151},"setTimeout 实现 setInterval",{"type":330,"tag":346,"props":1153,"children":1154},{},[1155],{"type":336,"value":1156},"不完整实现：",{"type":330,"tag":383,"props":1158,"children":1160},{"className":385,"code":1159,"language":387,"meta":325,"style":325},"const _setInterval = (fn, interval) => {\n  let timer;\n  const loop = () => {\n    timer = setTimeout(() => {\n      // timeout 时间之后会执行真正的函数 fn\n      fn();\n      // 同时再次调用 interval 本身\n      loop();\n    }, interval);\n  };\n  // 开始执行\n  loop();\n  // 返回用于关闭定时器的函数\n  return () => clearTimeout(timer);\n};\n\nlet cancelInterval = _setInterval(() => {\n  console.log(1);\n}, 300);\n\nsetTimeout(() => {\n  cancelInterval();\n  console.log(\"1s之后关闭定时器\");\n}, 1000);\n",[1161],{"type":330,"tag":363,"props":1162,"children":1163},{"__ignoreMap":325},[1164,1209,1224,1251,1280,1289,1304,1312,1328,1352,1363,1371,1387,1395,1432,1445,1455,1489,1525,1550,1558,1579,1596,1630],{"type":330,"tag":393,"props":1165,"children":1166},{"class":395,"line":396},[1167,1172,1176,1180,1184,1188,1192,1196,1201,1205],{"type":330,"tag":393,"props":1168,"children":1169},{"style":400},[1170],{"type":336,"value":1171},"const",{"type":330,"tag":393,"props":1173,"children":1174},{"style":406},[1175],{"type":336,"value":807},{"type":330,"tag":393,"props":1177,"children":1178},{"style":473},[1179],{"type":336,"value":476},{"type":330,"tag":393,"props":1181,"children":1182},{"style":412},[1183],{"type":336,"value":594},{"type":330,"tag":393,"props":1185,"children":1186},{"style":418},[1187],{"type":336,"value":421},{"type":330,"tag":393,"props":1189,"children":1190},{"style":424},[1191],{"type":336,"value":427},{"type":330,"tag":393,"props":1193,"children":1194},{"style":418},[1195],{"type":336,"value":824},{"type":330,"tag":393,"props":1197,"children":1198},{"style":412},[1199],{"type":336,"value":1200},") ",{"type":330,"tag":393,"props":1202,"children":1203},{"style":400},[1204],{"type":336,"value":529},{"type":330,"tag":393,"props":1206,"children":1207},{"style":412},[1208],{"type":336,"value":534},{"type":330,"tag":393,"props":1210,"children":1211},{"class":395,"line":440},[1212,1216,1220],{"type":330,"tag":393,"props":1213,"children":1214},{"style":400},[1215],{"type":336,"value":446},{"type":330,"tag":393,"props":1217,"children":1218},{"style":449},[1219],{"type":336,"value":452},{"type":330,"tag":393,"props":1221,"children":1222},{"style":424},[1223],{"type":336,"value":457},{"type":330,"tag":393,"props":1225,"children":1226},{"class":395,"line":460},[1227,1231,1235,1239,1243,1247],{"type":330,"tag":393,"props":1228,"children":1229},{"style":400},[1230],{"type":336,"value":510},{"type":330,"tag":393,"props":1232,"children":1233},{"style":406},[1234],{"type":336,"value":515},{"type":330,"tag":393,"props":1236,"children":1237},{"style":473},[1238],{"type":336,"value":476},{"type":330,"tag":393,"props":1240,"children":1241},{"style":412},[1242],{"type":336,"value":524},{"type":330,"tag":393,"props":1244,"children":1245},{"style":400},[1246],{"type":336,"value":529},{"type":330,"tag":393,"props":1248,"children":1249},{"style":412},[1250],{"type":336,"value":534},{"type":330,"tag":393,"props":1252,"children":1253},{"class":395,"line":504},[1254,1258,1262,1267,1272,1276],{"type":330,"tag":393,"props":1255,"children":1256},{"style":449},[1257],{"type":336,"value":543},{"type":330,"tag":393,"props":1259,"children":1260},{"style":473},[1261],{"type":336,"value":476},{"type":330,"tag":393,"props":1263,"children":1264},{"style":406},[1265],{"type":336,"value":1266}," setTimeout",{"type":330,"tag":393,"props":1268,"children":1269},{"style":412},[1270],{"type":336,"value":1271},"(() ",{"type":330,"tag":393,"props":1273,"children":1274},{"style":400},[1275],{"type":336,"value":529},{"type":330,"tag":393,"props":1277,"children":1278},{"style":412},[1279],{"type":336,"value":534},{"type":330,"tag":393,"props":1281,"children":1282},{"class":395,"line":537},[1283],{"type":330,"tag":393,"props":1284,"children":1286},{"style":1285},"--shiki-light:#357B42;--shiki-default:#357B42;--shiki-dark:#ACB6BF8C;--shiki-light-font-style:italic;--shiki-default-font-style:italic;--shiki-dark-font-style:italic",[1287],{"type":336,"value":1288},"      // timeout 时间之后会执行真正的函数 fn\n",{"type":330,"tag":393,"props":1290,"children":1291},{"class":395,"line":582},[1292,1296,1300],{"type":330,"tag":393,"props":1293,"children":1294},{"style":406},[1295],{"type":336,"value":643},{"type":330,"tag":393,"props":1297,"children":1298},{"style":412},[1299],{"type":336,"value":497},{"type":330,"tag":393,"props":1301,"children":1302},{"style":424},[1303],{"type":336,"value":457},{"type":330,"tag":393,"props":1305,"children":1306},{"class":395,"line":637},[1307],{"type":330,"tag":393,"props":1308,"children":1309},{"style":1285},[1310],{"type":336,"value":1311},"      // 同时再次调用 interval 本身\n",{"type":330,"tag":393,"props":1313,"children":1314},{"class":395,"line":681},[1315,1320,1324],{"type":330,"tag":393,"props":1316,"children":1317},{"style":406},[1318],{"type":336,"value":1319},"      loop",{"type":330,"tag":393,"props":1321,"children":1322},{"style":412},[1323],{"type":336,"value":497},{"type":330,"tag":393,"props":1325,"children":1326},{"style":424},[1327],{"type":336,"value":457},{"type":330,"tag":393,"props":1329,"children":1330},{"class":395,"line":716},[1331,1336,1340,1344,1348],{"type":330,"tag":393,"props":1332,"children":1333},{"style":412},[1334],{"type":336,"value":1335},"    }",{"type":330,"tag":393,"props":1337,"children":1338},{"style":424},[1339],{"type":336,"value":427},{"type":330,"tag":393,"props":1341,"children":1342},{"style":449},[1343],{"type":336,"value":824},{"type":330,"tag":393,"props":1345,"children":1346},{"style":412},[1347],{"type":336,"value":575},{"type":330,"tag":393,"props":1349,"children":1350},{"style":424},[1351],{"type":336,"value":457},{"type":330,"tag":393,"props":1353,"children":1354},{"class":395,"line":725},[1355,1359],{"type":330,"tag":393,"props":1356,"children":1357},{"style":412},[1358],{"type":336,"value":731},{"type":330,"tag":393,"props":1360,"children":1361},{"style":424},[1362],{"type":336,"value":457},{"type":330,"tag":393,"props":1364,"children":1365},{"class":395,"line":738},[1366],{"type":330,"tag":393,"props":1367,"children":1368},{"style":1285},[1369],{"type":336,"value":1370},"  // 开始执行\n",{"type":330,"tag":393,"props":1372,"children":1373},{"class":395,"line":771},[1374,1379,1383],{"type":330,"tag":393,"props":1375,"children":1376},{"style":406},[1377],{"type":336,"value":1378},"  loop",{"type":330,"tag":393,"props":1380,"children":1381},{"style":412},[1382],{"type":336,"value":497},{"type":330,"tag":393,"props":1384,"children":1385},{"style":424},[1386],{"type":336,"value":457},{"type":330,"tag":393,"props":1388,"children":1389},{"class":395,"line":1140},[1390],{"type":330,"tag":393,"props":1391,"children":1392},{"style":1285},[1393],{"type":336,"value":1394},"  // 返回用于关闭定时器的函数\n",{"type":330,"tag":393,"props":1396,"children":1398},{"class":395,"line":1397},14,[1399,1403,1407,1411,1416,1420,1424,1428],{"type":330,"tag":393,"props":1400,"children":1401},{"style":586},[1402],{"type":336,"value":1129},{"type":330,"tag":393,"props":1404,"children":1405},{"style":412},[1406],{"type":336,"value":524},{"type":330,"tag":393,"props":1408,"children":1409},{"style":400},[1410],{"type":336,"value":529},{"type":330,"tag":393,"props":1412,"children":1413},{"style":406},[1414],{"type":336,"value":1415}," clearTimeout",{"type":330,"tag":393,"props":1417,"children":1418},{"style":412},[1419],{"type":336,"value":415},{"type":330,"tag":393,"props":1421,"children":1422},{"style":449},[1423],{"type":336,"value":705},{"type":330,"tag":393,"props":1425,"children":1426},{"style":412},[1427],{"type":336,"value":575},{"type":330,"tag":393,"props":1429,"children":1430},{"style":424},[1431],{"type":336,"value":457},{"type":330,"tag":393,"props":1433,"children":1435},{"class":395,"line":1434},15,[1436,1441],{"type":330,"tag":393,"props":1437,"children":1438},{"style":412},[1439],{"type":336,"value":1440},"}",{"type":330,"tag":393,"props":1442,"children":1443},{"style":424},[1444],{"type":336,"value":457},{"type":330,"tag":393,"props":1446,"children":1448},{"class":395,"line":1447},16,[1449],{"type":330,"tag":393,"props":1450,"children":1452},{"emptyLinePlaceholder":1451},true,[1453],{"type":336,"value":1454},"\n",{"type":330,"tag":393,"props":1456,"children":1458},{"class":395,"line":1457},17,[1459,1464,1469,1473,1477,1481,1485],{"type":330,"tag":393,"props":1460,"children":1461},{"style":400},[1462],{"type":336,"value":1463},"let",{"type":330,"tag":393,"props":1465,"children":1466},{"style":449},[1467],{"type":336,"value":1468}," cancelInterval",{"type":330,"tag":393,"props":1470,"children":1471},{"style":473},[1472],{"type":336,"value":476},{"type":330,"tag":393,"props":1474,"children":1475},{"style":406},[1476],{"type":336,"value":807},{"type":330,"tag":393,"props":1478,"children":1479},{"style":412},[1480],{"type":336,"value":1271},{"type":330,"tag":393,"props":1482,"children":1483},{"style":400},[1484],{"type":336,"value":529},{"type":330,"tag":393,"props":1486,"children":1487},{"style":412},[1488],{"type":336,"value":534},{"type":330,"tag":393,"props":1490,"children":1492},{"class":395,"line":1491},18,[1493,1498,1502,1507,1511,1517,1521],{"type":330,"tag":393,"props":1494,"children":1495},{"style":449},[1496],{"type":336,"value":1497},"  console",{"type":330,"tag":393,"props":1499,"children":1500},{"style":484},[1501],{"type":336,"value":487},{"type":330,"tag":393,"props":1503,"children":1504},{"style":406},[1505],{"type":336,"value":1506},"log",{"type":330,"tag":393,"props":1508,"children":1509},{"style":412},[1510],{"type":336,"value":415},{"type":330,"tag":393,"props":1512,"children":1514},{"style":1513},"--shiki-light:#174781;--shiki-default:#174781;--shiki-dark:#D2A6FF",[1515],{"type":336,"value":1516},"1",{"type":330,"tag":393,"props":1518,"children":1519},{"style":412},[1520],{"type":336,"value":575},{"type":330,"tag":393,"props":1522,"children":1523},{"style":424},[1524],{"type":336,"value":457},{"type":330,"tag":393,"props":1526,"children":1528},{"class":395,"line":1527},19,[1529,1533,1537,1542,1546],{"type":330,"tag":393,"props":1530,"children":1531},{"style":412},[1532],{"type":336,"value":1440},{"type":330,"tag":393,"props":1534,"children":1535},{"style":424},[1536],{"type":336,"value":427},{"type":330,"tag":393,"props":1538,"children":1539},{"style":1513},[1540],{"type":336,"value":1541}," 300",{"type":330,"tag":393,"props":1543,"children":1544},{"style":412},[1545],{"type":336,"value":575},{"type":330,"tag":393,"props":1547,"children":1548},{"style":424},[1549],{"type":336,"value":457},{"type":330,"tag":393,"props":1551,"children":1553},{"class":395,"line":1552},20,[1554],{"type":330,"tag":393,"props":1555,"children":1556},{"emptyLinePlaceholder":1451},[1557],{"type":336,"value":1454},{"type":330,"tag":393,"props":1559,"children":1561},{"class":395,"line":1560},21,[1562,1567,1571,1575],{"type":330,"tag":393,"props":1563,"children":1564},{"style":406},[1565],{"type":336,"value":1566},"setTimeout",{"type":330,"tag":393,"props":1568,"children":1569},{"style":412},[1570],{"type":336,"value":1271},{"type":330,"tag":393,"props":1572,"children":1573},{"style":400},[1574],{"type":336,"value":529},{"type":330,"tag":393,"props":1576,"children":1577},{"style":412},[1578],{"type":336,"value":534},{"type":330,"tag":393,"props":1580,"children":1582},{"class":395,"line":1581},22,[1583,1588,1592],{"type":330,"tag":393,"props":1584,"children":1585},{"style":406},[1586],{"type":336,"value":1587},"  cancelInterval",{"type":330,"tag":393,"props":1589,"children":1590},{"style":412},[1591],{"type":336,"value":497},{"type":330,"tag":393,"props":1593,"children":1594},{"style":424},[1595],{"type":336,"value":457},{"type":330,"tag":393,"props":1597,"children":1599},{"class":395,"line":1598},23,[1600,1604,1608,1612,1616,1622,1626],{"type":330,"tag":393,"props":1601,"children":1602},{"style":449},[1603],{"type":336,"value":1497},{"type":330,"tag":393,"props":1605,"children":1606},{"style":484},[1607],{"type":336,"value":487},{"type":330,"tag":393,"props":1609,"children":1610},{"style":406},[1611],{"type":336,"value":1506},{"type":330,"tag":393,"props":1613,"children":1614},{"style":412},[1615],{"type":336,"value":415},{"type":330,"tag":393,"props":1617,"children":1619},{"style":1618},"--shiki-light:#A44185;--shiki-default:#A44185;--shiki-dark:#AAD94C",[1620],{"type":336,"value":1621},"\"1s之后关闭定时器\"",{"type":330,"tag":393,"props":1623,"children":1624},{"style":412},[1625],{"type":336,"value":575},{"type":330,"tag":393,"props":1627,"children":1628},{"style":424},[1629],{"type":336,"value":457},{"type":330,"tag":393,"props":1631,"children":1633},{"class":395,"line":1632},24,[1634,1638,1642,1647,1651],{"type":330,"tag":393,"props":1635,"children":1636},{"style":412},[1637],{"type":336,"value":1440},{"type":330,"tag":393,"props":1639,"children":1640},{"style":424},[1641],{"type":336,"value":427},{"type":330,"tag":393,"props":1643,"children":1644},{"style":1513},[1645],{"type":336,"value":1646}," 1000",{"type":330,"tag":393,"props":1648,"children":1649},{"style":412},[1650],{"type":336,"value":575},{"type":330,"tag":393,"props":1652,"children":1653},{"style":424},[1654],{"type":336,"value":457},{"type":330,"tag":346,"props":1656,"children":1657},{},[1658],{"type":336,"value":1659},"另一种方案：",{"type":330,"tag":383,"props":1661,"children":1663},{"className":385,"code":1662,"language":387,"meta":325,"style":325},"function _setInterval(handler, timeout, ...args) {\n  // 判断是否为浏览器环境\n  let isBrowser = typeof window !== \"undefined\";\n  if (isBrowser && this !== window) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  let timer = {};\n  if (isBrowser) {\n    // 浏览器上的处理\n    timer = {\n      value: -1,\n      valueOf() {\n        return this.value;\n      },\n    };\n    const callback = () => {\n      timer.value = setTimeout(callback, timeout);\n      handler.apply(this, args);\n    };\n    timer.value = setTimeout(callback, timeout);\n  } else {\n    // nodejs 的处理\n    const callback = () => {\n      Object.assign(timer, setTimeout(callback, timeout));\n      handler.apply(this, args);\n    };\n    Object.assign(timer, setTimeout(callback, timeout));\n  }\n  return timer;\n}\n",[1664],{"type":330,"tag":363,"props":1665,"children":1666},{"__ignoreMap":325},[1667,1713,1721,1760,1799,1834,1842,1866,1885,1893,1908,1935,1948,1973,1985,1996,2025,2074,2116,2127,2174,2191,2199,2226,2284,2324,2336,2393,2401,2417],{"type":330,"tag":393,"props":1668,"children":1669},{"class":395,"line":396},[1670,1674,1678,1682,1687,1691,1695,1699,1704,1709],{"type":330,"tag":393,"props":1671,"children":1672},{"style":400},[1673],{"type":336,"value":403},{"type":330,"tag":393,"props":1675,"children":1676},{"style":406},[1677],{"type":336,"value":807},{"type":330,"tag":393,"props":1679,"children":1680},{"style":412},[1681],{"type":336,"value":415},{"type":330,"tag":393,"props":1683,"children":1684},{"style":418},[1685],{"type":336,"value":1686},"handler",{"type":330,"tag":393,"props":1688,"children":1689},{"style":424},[1690],{"type":336,"value":427},{"type":330,"tag":393,"props":1692,"children":1693},{"style":418},[1694],{"type":336,"value":432},{"type":330,"tag":393,"props":1696,"children":1697},{"style":424},[1698],{"type":336,"value":427},{"type":330,"tag":393,"props":1700,"children":1701},{"style":473},[1702],{"type":336,"value":1703}," ...",{"type":330,"tag":393,"props":1705,"children":1706},{"style":418},[1707],{"type":336,"value":1708},"args",{"type":330,"tag":393,"props":1710,"children":1711},{"style":412},[1712],{"type":336,"value":437},{"type":330,"tag":393,"props":1714,"children":1715},{"class":395,"line":440},[1716],{"type":330,"tag":393,"props":1717,"children":1718},{"style":1285},[1719],{"type":336,"value":1720},"  // 判断是否为浏览器环境\n",{"type":330,"tag":393,"props":1722,"children":1723},{"class":395,"line":460},[1724,1728,1733,1737,1742,1746,1751,1756],{"type":330,"tag":393,"props":1725,"children":1726},{"style":400},[1727],{"type":336,"value":446},{"type":330,"tag":393,"props":1729,"children":1730},{"style":449},[1731],{"type":336,"value":1732}," isBrowser",{"type":330,"tag":393,"props":1734,"children":1735},{"style":473},[1736],{"type":336,"value":476},{"type":330,"tag":393,"props":1738,"children":1739},{"style":473},[1740],{"type":336,"value":1741}," typeof",{"type":330,"tag":393,"props":1743,"children":1744},{"style":449},[1745],{"type":336,"value":552},{"type":330,"tag":393,"props":1747,"children":1748},{"style":473},[1749],{"type":336,"value":1750}," !==",{"type":330,"tag":393,"props":1752,"children":1753},{"style":1618},[1754],{"type":336,"value":1755}," \"undefined\"",{"type":330,"tag":393,"props":1757,"children":1758},{"style":424},[1759],{"type":336,"value":457},{"type":330,"tag":393,"props":1761,"children":1762},{"class":395,"line":504},[1763,1768,1772,1777,1782,1787,1791,1795],{"type":330,"tag":393,"props":1764,"children":1765},{"style":586},[1766],{"type":336,"value":1767},"  if",{"type":330,"tag":393,"props":1769,"children":1770},{"style":412},[1771],{"type":336,"value":594},{"type":330,"tag":393,"props":1773,"children":1774},{"style":449},[1775],{"type":336,"value":1776},"isBrowser",{"type":330,"tag":393,"props":1778,"children":1779},{"style":473},[1780],{"type":336,"value":1781}," &&",{"type":330,"tag":393,"props":1783,"children":1784},{"style":659},[1785],{"type":336,"value":1786}," this",{"type":330,"tag":393,"props":1788,"children":1789},{"style":473},[1790],{"type":336,"value":1750},{"type":330,"tag":393,"props":1792,"children":1793},{"style":449},[1794],{"type":336,"value":552},{"type":330,"tag":393,"props":1796,"children":1797},{"style":412},[1798],{"type":336,"value":437},{"type":330,"tag":393,"props":1800,"children":1801},{"class":395,"line":537},[1802,1807,1812,1817,1821,1826,1830],{"type":330,"tag":393,"props":1803,"children":1804},{"style":586},[1805],{"type":336,"value":1806},"    throw",{"type":330,"tag":393,"props":1808,"children":1809},{"style":473},[1810],{"type":336,"value":1811}," new",{"type":330,"tag":393,"props":1813,"children":1814},{"style":406},[1815],{"type":336,"value":1816}," TypeError",{"type":330,"tag":393,"props":1818,"children":1819},{"style":412},[1820],{"type":336,"value":415},{"type":330,"tag":393,"props":1822,"children":1823},{"style":1618},[1824],{"type":336,"value":1825},"\"Illegal invocation\"",{"type":330,"tag":393,"props":1827,"children":1828},{"style":412},[1829],{"type":336,"value":575},{"type":330,"tag":393,"props":1831,"children":1832},{"style":424},[1833],{"type":336,"value":457},{"type":330,"tag":393,"props":1835,"children":1836},{"class":395,"line":582},[1837],{"type":330,"tag":393,"props":1838,"children":1839},{"style":412},[1840],{"type":336,"value":1841},"  }\n",{"type":330,"tag":393,"props":1843,"children":1844},{"class":395,"line":637},[1845,1849,1853,1857,1862],{"type":330,"tag":393,"props":1846,"children":1847},{"style":400},[1848],{"type":336,"value":446},{"type":330,"tag":393,"props":1850,"children":1851},{"style":449},[1852],{"type":336,"value":452},{"type":330,"tag":393,"props":1854,"children":1855},{"style":473},[1856],{"type":336,"value":476},{"type":330,"tag":393,"props":1858,"children":1859},{"style":412},[1860],{"type":336,"value":1861}," {}",{"type":330,"tag":393,"props":1863,"children":1864},{"style":424},[1865],{"type":336,"value":457},{"type":330,"tag":393,"props":1867,"children":1868},{"class":395,"line":681},[1869,1873,1877,1881],{"type":330,"tag":393,"props":1870,"children":1871},{"style":586},[1872],{"type":336,"value":1767},{"type":330,"tag":393,"props":1874,"children":1875},{"style":412},[1876],{"type":336,"value":594},{"type":330,"tag":393,"props":1878,"children":1879},{"style":449},[1880],{"type":336,"value":1776},{"type":330,"tag":393,"props":1882,"children":1883},{"style":412},[1884],{"type":336,"value":437},{"type":330,"tag":393,"props":1886,"children":1887},{"class":395,"line":716},[1888],{"type":330,"tag":393,"props":1889,"children":1890},{"style":1285},[1891],{"type":336,"value":1892},"    // 浏览器上的处理\n",{"type":330,"tag":393,"props":1894,"children":1895},{"class":395,"line":725},[1896,1900,1904],{"type":330,"tag":393,"props":1897,"children":1898},{"style":449},[1899],{"type":336,"value":543},{"type":330,"tag":393,"props":1901,"children":1902},{"style":473},[1903],{"type":336,"value":476},{"type":330,"tag":393,"props":1905,"children":1906},{"style":412},[1907],{"type":336,"value":534},{"type":330,"tag":393,"props":1909,"children":1910},{"class":395,"line":738},[1911,1916,1921,1926,1930],{"type":330,"tag":393,"props":1912,"children":1913},{"style":412},[1914],{"type":336,"value":1915},"      value",{"type":330,"tag":393,"props":1917,"children":1918},{"style":424},[1919],{"type":336,"value":1920},":",{"type":330,"tag":393,"props":1922,"children":1923},{"style":473},[1924],{"type":336,"value":1925}," -",{"type":330,"tag":393,"props":1927,"children":1928},{"style":1513},[1929],{"type":336,"value":1516},{"type":330,"tag":393,"props":1931,"children":1932},{"style":424},[1933],{"type":336,"value":1934},",\n",{"type":330,"tag":393,"props":1936,"children":1937},{"class":395,"line":771},[1938,1943],{"type":330,"tag":393,"props":1939,"children":1940},{"style":406},[1941],{"type":336,"value":1942},"      valueOf",{"type":330,"tag":393,"props":1944,"children":1945},{"style":412},[1946],{"type":336,"value":1947},"() {\n",{"type":330,"tag":393,"props":1949,"children":1950},{"class":395,"line":1140},[1951,1956,1960,1964,1969],{"type":330,"tag":393,"props":1952,"children":1953},{"style":586},[1954],{"type":336,"value":1955},"        return",{"type":330,"tag":393,"props":1957,"children":1958},{"style":659},[1959],{"type":336,"value":1786},{"type":330,"tag":393,"props":1961,"children":1962},{"style":484},[1963],{"type":336,"value":487},{"type":330,"tag":393,"props":1965,"children":1966},{"style":449},[1967],{"type":336,"value":1968},"value",{"type":330,"tag":393,"props":1970,"children":1971},{"style":424},[1972],{"type":336,"value":457},{"type":330,"tag":393,"props":1974,"children":1975},{"class":395,"line":1397},[1976,1981],{"type":330,"tag":393,"props":1977,"children":1978},{"style":412},[1979],{"type":336,"value":1980},"      }",{"type":330,"tag":393,"props":1982,"children":1983},{"style":424},[1984],{"type":336,"value":1934},{"type":330,"tag":393,"props":1986,"children":1987},{"class":395,"line":1434},[1988,1992],{"type":330,"tag":393,"props":1989,"children":1990},{"style":412},[1991],{"type":336,"value":1335},{"type":330,"tag":393,"props":1993,"children":1994},{"style":424},[1995],{"type":336,"value":457},{"type":330,"tag":393,"props":1997,"children":1998},{"class":395,"line":1447},[1999,2004,2009,2013,2017,2021],{"type":330,"tag":393,"props":2000,"children":2001},{"style":400},[2002],{"type":336,"value":2003},"    const",{"type":330,"tag":393,"props":2005,"children":2006},{"style":406},[2007],{"type":336,"value":2008}," callback",{"type":330,"tag":393,"props":2010,"children":2011},{"style":473},[2012],{"type":336,"value":476},{"type":330,"tag":393,"props":2014,"children":2015},{"style":412},[2016],{"type":336,"value":524},{"type":330,"tag":393,"props":2018,"children":2019},{"style":400},[2020],{"type":336,"value":529},{"type":330,"tag":393,"props":2022,"children":2023},{"style":412},[2024],{"type":336,"value":534},{"type":330,"tag":393,"props":2026,"children":2027},{"class":395,"line":1457},[2028,2033,2037,2041,2045,2049,2053,2058,2062,2066,2070],{"type":330,"tag":393,"props":2029,"children":2030},{"style":449},[2031],{"type":336,"value":2032},"      timer",{"type":330,"tag":393,"props":2034,"children":2035},{"style":484},[2036],{"type":336,"value":487},{"type":330,"tag":393,"props":2038,"children":2039},{"style":449},[2040],{"type":336,"value":1968},{"type":330,"tag":393,"props":2042,"children":2043},{"style":473},[2044],{"type":336,"value":476},{"type":330,"tag":393,"props":2046,"children":2047},{"style":406},[2048],{"type":336,"value":1266},{"type":330,"tag":393,"props":2050,"children":2051},{"style":412},[2052],{"type":336,"value":415},{"type":330,"tag":393,"props":2054,"children":2055},{"style":449},[2056],{"type":336,"value":2057},"callback",{"type":330,"tag":393,"props":2059,"children":2060},{"style":424},[2061],{"type":336,"value":427},{"type":330,"tag":393,"props":2063,"children":2064},{"style":449},[2065],{"type":336,"value":432},{"type":330,"tag":393,"props":2067,"children":2068},{"style":412},[2069],{"type":336,"value":575},{"type":330,"tag":393,"props":2071,"children":2072},{"style":424},[2073],{"type":336,"value":457},{"type":330,"tag":393,"props":2075,"children":2076},{"class":395,"line":1491},[2077,2082,2086,2091,2095,2099,2103,2108,2112],{"type":330,"tag":393,"props":2078,"children":2079},{"style":449},[2080],{"type":336,"value":2081},"      handler",{"type":330,"tag":393,"props":2083,"children":2084},{"style":484},[2085],{"type":336,"value":487},{"type":330,"tag":393,"props":2087,"children":2088},{"style":406},[2089],{"type":336,"value":2090},"apply",{"type":330,"tag":393,"props":2092,"children":2093},{"style":412},[2094],{"type":336,"value":415},{"type":330,"tag":393,"props":2096,"children":2097},{"style":659},[2098],{"type":336,"value":662},{"type":330,"tag":393,"props":2100,"children":2101},{"style":424},[2102],{"type":336,"value":427},{"type":330,"tag":393,"props":2104,"children":2105},{"style":449},[2106],{"type":336,"value":2107}," args",{"type":330,"tag":393,"props":2109,"children":2110},{"style":412},[2111],{"type":336,"value":575},{"type":330,"tag":393,"props":2113,"children":2114},{"style":424},[2115],{"type":336,"value":457},{"type":330,"tag":393,"props":2117,"children":2118},{"class":395,"line":1527},[2119,2123],{"type":330,"tag":393,"props":2120,"children":2121},{"style":412},[2122],{"type":336,"value":1335},{"type":330,"tag":393,"props":2124,"children":2125},{"style":424},[2126],{"type":336,"value":457},{"type":330,"tag":393,"props":2128,"children":2129},{"class":395,"line":1552},[2130,2134,2138,2142,2146,2150,2154,2158,2162,2166,2170],{"type":330,"tag":393,"props":2131,"children":2132},{"style":449},[2133],{"type":336,"value":543},{"type":330,"tag":393,"props":2135,"children":2136},{"style":484},[2137],{"type":336,"value":487},{"type":330,"tag":393,"props":2139,"children":2140},{"style":449},[2141],{"type":336,"value":1968},{"type":330,"tag":393,"props":2143,"children":2144},{"style":473},[2145],{"type":336,"value":476},{"type":330,"tag":393,"props":2147,"children":2148},{"style":406},[2149],{"type":336,"value":1266},{"type":330,"tag":393,"props":2151,"children":2152},{"style":412},[2153],{"type":336,"value":415},{"type":330,"tag":393,"props":2155,"children":2156},{"style":449},[2157],{"type":336,"value":2057},{"type":330,"tag":393,"props":2159,"children":2160},{"style":424},[2161],{"type":336,"value":427},{"type":330,"tag":393,"props":2163,"children":2164},{"style":449},[2165],{"type":336,"value":432},{"type":330,"tag":393,"props":2167,"children":2168},{"style":412},[2169],{"type":336,"value":575},{"type":330,"tag":393,"props":2171,"children":2172},{"style":424},[2173],{"type":336,"value":457},{"type":330,"tag":393,"props":2175,"children":2176},{"class":395,"line":1560},[2177,2182,2187],{"type":330,"tag":393,"props":2178,"children":2179},{"style":412},[2180],{"type":336,"value":2181},"  } ",{"type":330,"tag":393,"props":2183,"children":2184},{"style":586},[2185],{"type":336,"value":2186},"else",{"type":330,"tag":393,"props":2188,"children":2189},{"style":412},[2190],{"type":336,"value":534},{"type":330,"tag":393,"props":2192,"children":2193},{"class":395,"line":1581},[2194],{"type":330,"tag":393,"props":2195,"children":2196},{"style":1285},[2197],{"type":336,"value":2198},"    // nodejs 的处理\n",{"type":330,"tag":393,"props":2200,"children":2201},{"class":395,"line":1598},[2202,2206,2210,2214,2218,2222],{"type":330,"tag":393,"props":2203,"children":2204},{"style":400},[2205],{"type":336,"value":2003},{"type":330,"tag":393,"props":2207,"children":2208},{"style":406},[2209],{"type":336,"value":2008},{"type":330,"tag":393,"props":2211,"children":2212},{"style":473},[2213],{"type":336,"value":476},{"type":330,"tag":393,"props":2215,"children":2216},{"style":412},[2217],{"type":336,"value":524},{"type":330,"tag":393,"props":2219,"children":2220},{"style":400},[2221],{"type":336,"value":529},{"type":330,"tag":393,"props":2223,"children":2224},{"style":412},[2225],{"type":336,"value":534},{"type":330,"tag":393,"props":2227,"children":2228},{"class":395,"line":1632},[2229,2234,2238,2243,2247,2251,2255,2259,2263,2267,2271,2275,2280],{"type":330,"tag":393,"props":2230,"children":2231},{"style":449},[2232],{"type":336,"value":2233},"      Object",{"type":330,"tag":393,"props":2235,"children":2236},{"style":484},[2237],{"type":336,"value":487},{"type":330,"tag":393,"props":2239,"children":2240},{"style":406},[2241],{"type":336,"value":2242},"assign",{"type":330,"tag":393,"props":2244,"children":2245},{"style":412},[2246],{"type":336,"value":415},{"type":330,"tag":393,"props":2248,"children":2249},{"style":449},[2250],{"type":336,"value":705},{"type":330,"tag":393,"props":2252,"children":2253},{"style":424},[2254],{"type":336,"value":427},{"type":330,"tag":393,"props":2256,"children":2257},{"style":406},[2258],{"type":336,"value":1266},{"type":330,"tag":393,"props":2260,"children":2261},{"style":412},[2262],{"type":336,"value":415},{"type":330,"tag":393,"props":2264,"children":2265},{"style":449},[2266],{"type":336,"value":2057},{"type":330,"tag":393,"props":2268,"children":2269},{"style":424},[2270],{"type":336,"value":427},{"type":330,"tag":393,"props":2272,"children":2273},{"style":449},[2274],{"type":336,"value":432},{"type":330,"tag":393,"props":2276,"children":2277},{"style":412},[2278],{"type":336,"value":2279},"))",{"type":330,"tag":393,"props":2281,"children":2282},{"style":424},[2283],{"type":336,"value":457},{"type":330,"tag":393,"props":2285,"children":2287},{"class":395,"line":2286},25,[2288,2292,2296,2300,2304,2308,2312,2316,2320],{"type":330,"tag":393,"props":2289,"children":2290},{"style":449},[2291],{"type":336,"value":2081},{"type":330,"tag":393,"props":2293,"children":2294},{"style":484},[2295],{"type":336,"value":487},{"type":330,"tag":393,"props":2297,"children":2298},{"style":406},[2299],{"type":336,"value":2090},{"type":330,"tag":393,"props":2301,"children":2302},{"style":412},[2303],{"type":336,"value":415},{"type":330,"tag":393,"props":2305,"children":2306},{"style":659},[2307],{"type":336,"value":662},{"type":330,"tag":393,"props":2309,"children":2310},{"style":424},[2311],{"type":336,"value":427},{"type":330,"tag":393,"props":2313,"children":2314},{"style":449},[2315],{"type":336,"value":2107},{"type":330,"tag":393,"props":2317,"children":2318},{"style":412},[2319],{"type":336,"value":575},{"type":330,"tag":393,"props":2321,"children":2322},{"style":424},[2323],{"type":336,"value":457},{"type":330,"tag":393,"props":2325,"children":2327},{"class":395,"line":2326},26,[2328,2332],{"type":330,"tag":393,"props":2329,"children":2330},{"style":412},[2331],{"type":336,"value":1335},{"type":330,"tag":393,"props":2333,"children":2334},{"style":424},[2335],{"type":336,"value":457},{"type":330,"tag":393,"props":2337,"children":2339},{"class":395,"line":2338},27,[2340,2345,2349,2353,2357,2361,2365,2369,2373,2377,2381,2385,2389],{"type":330,"tag":393,"props":2341,"children":2342},{"style":449},[2343],{"type":336,"value":2344},"    Object",{"type":330,"tag":393,"props":2346,"children":2347},{"style":484},[2348],{"type":336,"value":487},{"type":330,"tag":393,"props":2350,"children":2351},{"style":406},[2352],{"type":336,"value":2242},{"type":330,"tag":393,"props":2354,"children":2355},{"style":412},[2356],{"type":336,"value":415},{"type":330,"tag":393,"props":2358,"children":2359},{"style":449},[2360],{"type":336,"value":705},{"type":330,"tag":393,"props":2362,"children":2363},{"style":424},[2364],{"type":336,"value":427},{"type":330,"tag":393,"props":2366,"children":2367},{"style":406},[2368],{"type":336,"value":1266},{"type":330,"tag":393,"props":2370,"children":2371},{"style":412},[2372],{"type":336,"value":415},{"type":330,"tag":393,"props":2374,"children":2375},{"style":449},[2376],{"type":336,"value":2057},{"type":330,"tag":393,"props":2378,"children":2379},{"style":424},[2380],{"type":336,"value":427},{"type":330,"tag":393,"props":2382,"children":2383},{"style":449},[2384],{"type":336,"value":432},{"type":330,"tag":393,"props":2386,"children":2387},{"style":412},[2388],{"type":336,"value":2279},{"type":330,"tag":393,"props":2390,"children":2391},{"style":424},[2392],{"type":336,"value":457},{"type":330,"tag":393,"props":2394,"children":2396},{"class":395,"line":2395},28,[2397],{"type":330,"tag":393,"props":2398,"children":2399},{"style":412},[2400],{"type":336,"value":1841},{"type":330,"tag":393,"props":2402,"children":2404},{"class":395,"line":2403},29,[2405,2409,2413],{"type":330,"tag":393,"props":2406,"children":2407},{"style":586},[2408],{"type":336,"value":1129},{"type":330,"tag":393,"props":2410,"children":2411},{"style":449},[2412],{"type":336,"value":452},{"type":330,"tag":393,"props":2414,"children":2415},{"style":424},[2416],{"type":336,"value":457},{"type":330,"tag":393,"props":2418,"children":2420},{"class":395,"line":2419},30,[2421],{"type":330,"tag":393,"props":2422,"children":2423},{"style":412},[2424],{"type":336,"value":777},{"type":330,"tag":331,"props":2426,"children":2428},{"id":2427},"setinterval-模拟-settimeout",[2429],{"type":336,"value":2430},"setInterval 模拟 setTimeout",{"type":330,"tag":346,"props":2432,"children":2433},{},[2434],{"type":336,"value":2435},"思路：setTimeout 的特性是在指定的时间内只执行一次，我们只要在 setInterval 内部执行 callback 之后，把定时器关掉即可。",{"type":330,"tag":383,"props":2437,"children":2439},{"className":385,"code":2438,"language":387,"meta":325,"style":325},"const _setTimeout = (fn, timeout) => {\n  let timer = null;\n  timer = setInterval(() => {\n    // 关闭定时器，保证只执行一次fn，也就达到了setTimeout的效果了\n    clearInterval(timer);\n    fn();\n  }, timeout);\n  // 返回用于关闭定时器的方法\n  return () => clearInterval(timer);\n};\n\nlet cancelTimeout = _setTimeout(() => {\n  console.log(\"1s 后打印出 1\");\n}, 1000);\n",[2440],{"type":330,"tag":363,"props":2441,"children":2442},{"__ignoreMap":325},[2443,2486,2510,2538,2546,2570,2586,2609,2617,2653,2664,2671,2703,2735],{"type":330,"tag":393,"props":2444,"children":2445},{"class":395,"line":396},[2446,2450,2454,2458,2462,2466,2470,2474,2478,2482],{"type":330,"tag":393,"props":2447,"children":2448},{"style":400},[2449],{"type":336,"value":1171},{"type":330,"tag":393,"props":2451,"children":2452},{"style":406},[2453],{"type":336,"value":409},{"type":330,"tag":393,"props":2455,"children":2456},{"style":473},[2457],{"type":336,"value":476},{"type":330,"tag":393,"props":2459,"children":2460},{"style":412},[2461],{"type":336,"value":594},{"type":330,"tag":393,"props":2463,"children":2464},{"style":418},[2465],{"type":336,"value":421},{"type":330,"tag":393,"props":2467,"children":2468},{"style":424},[2469],{"type":336,"value":427},{"type":330,"tag":393,"props":2471,"children":2472},{"style":418},[2473],{"type":336,"value":432},{"type":330,"tag":393,"props":2475,"children":2476},{"style":412},[2477],{"type":336,"value":1200},{"type":330,"tag":393,"props":2479,"children":2480},{"style":400},[2481],{"type":336,"value":529},{"type":330,"tag":393,"props":2483,"children":2484},{"style":412},[2485],{"type":336,"value":534},{"type":330,"tag":393,"props":2487,"children":2488},{"class":395,"line":440},[2489,2493,2497,2501,2506],{"type":330,"tag":393,"props":2490,"children":2491},{"style":400},[2492],{"type":336,"value":446},{"type":330,"tag":393,"props":2494,"children":2495},{"style":449},[2496],{"type":336,"value":452},{"type":330,"tag":393,"props":2498,"children":2499},{"style":473},[2500],{"type":336,"value":476},{"type":330,"tag":393,"props":2502,"children":2503},{"style":1513},[2504],{"type":336,"value":2505}," null",{"type":330,"tag":393,"props":2507,"children":2508},{"style":424},[2509],{"type":336,"value":457},{"type":330,"tag":393,"props":2511,"children":2512},{"class":395,"line":460},[2513,2517,2521,2526,2530,2534],{"type":330,"tag":393,"props":2514,"children":2515},{"style":449},[2516],{"type":336,"value":1088},{"type":330,"tag":393,"props":2518,"children":2519},{"style":473},[2520],{"type":336,"value":476},{"type":330,"tag":393,"props":2522,"children":2523},{"style":406},[2524],{"type":336,"value":2525}," setInterval",{"type":330,"tag":393,"props":2527,"children":2528},{"style":412},[2529],{"type":336,"value":1271},{"type":330,"tag":393,"props":2531,"children":2532},{"style":400},[2533],{"type":336,"value":529},{"type":330,"tag":393,"props":2535,"children":2536},{"style":412},[2537],{"type":336,"value":534},{"type":330,"tag":393,"props":2539,"children":2540},{"class":395,"line":504},[2541],{"type":330,"tag":393,"props":2542,"children":2543},{"style":1285},[2544],{"type":336,"value":2545},"    // 关闭定时器，保证只执行一次fn，也就达到了setTimeout的效果了\n",{"type":330,"tag":393,"props":2547,"children":2548},{"class":395,"line":537},[2549,2554,2558,2562,2566],{"type":330,"tag":393,"props":2550,"children":2551},{"style":406},[2552],{"type":336,"value":2553},"    clearInterval",{"type":330,"tag":393,"props":2555,"children":2556},{"style":412},[2557],{"type":336,"value":415},{"type":330,"tag":393,"props":2559,"children":2560},{"style":449},[2561],{"type":336,"value":705},{"type":330,"tag":393,"props":2563,"children":2564},{"style":412},[2565],{"type":336,"value":575},{"type":330,"tag":393,"props":2567,"children":2568},{"style":424},[2569],{"type":336,"value":457},{"type":330,"tag":393,"props":2571,"children":2572},{"class":395,"line":582},[2573,2578,2582],{"type":330,"tag":393,"props":2574,"children":2575},{"style":406},[2576],{"type":336,"value":2577},"    fn",{"type":330,"tag":393,"props":2579,"children":2580},{"style":412},[2581],{"type":336,"value":497},{"type":330,"tag":393,"props":2583,"children":2584},{"style":424},[2585],{"type":336,"value":457},{"type":330,"tag":393,"props":2587,"children":2588},{"class":395,"line":637},[2589,2593,2597,2601,2605],{"type":330,"tag":393,"props":2590,"children":2591},{"style":412},[2592],{"type":336,"value":731},{"type":330,"tag":393,"props":2594,"children":2595},{"style":424},[2596],{"type":336,"value":427},{"type":330,"tag":393,"props":2598,"children":2599},{"style":449},[2600],{"type":336,"value":432},{"type":330,"tag":393,"props":2602,"children":2603},{"style":412},[2604],{"type":336,"value":575},{"type":330,"tag":393,"props":2606,"children":2607},{"style":424},[2608],{"type":336,"value":457},{"type":330,"tag":393,"props":2610,"children":2611},{"class":395,"line":681},[2612],{"type":330,"tag":393,"props":2613,"children":2614},{"style":1285},[2615],{"type":336,"value":2616},"  // 返回用于关闭定时器的方法\n",{"type":330,"tag":393,"props":2618,"children":2619},{"class":395,"line":716},[2620,2624,2628,2632,2637,2641,2645,2649],{"type":330,"tag":393,"props":2621,"children":2622},{"style":586},[2623],{"type":336,"value":1129},{"type":330,"tag":393,"props":2625,"children":2626},{"style":412},[2627],{"type":336,"value":524},{"type":330,"tag":393,"props":2629,"children":2630},{"style":400},[2631],{"type":336,"value":529},{"type":330,"tag":393,"props":2633,"children":2634},{"style":406},[2635],{"type":336,"value":2636}," clearInterval",{"type":330,"tag":393,"props":2638,"children":2639},{"style":412},[2640],{"type":336,"value":415},{"type":330,"tag":393,"props":2642,"children":2643},{"style":449},[2644],{"type":336,"value":705},{"type":330,"tag":393,"props":2646,"children":2647},{"style":412},[2648],{"type":336,"value":575},{"type":330,"tag":393,"props":2650,"children":2651},{"style":424},[2652],{"type":336,"value":457},{"type":330,"tag":393,"props":2654,"children":2655},{"class":395,"line":725},[2656,2660],{"type":330,"tag":393,"props":2657,"children":2658},{"style":412},[2659],{"type":336,"value":1440},{"type":330,"tag":393,"props":2661,"children":2662},{"style":424},[2663],{"type":336,"value":457},{"type":330,"tag":393,"props":2665,"children":2666},{"class":395,"line":738},[2667],{"type":330,"tag":393,"props":2668,"children":2669},{"emptyLinePlaceholder":1451},[2670],{"type":336,"value":1454},{"type":330,"tag":393,"props":2672,"children":2673},{"class":395,"line":771},[2674,2678,2683,2687,2691,2695,2699],{"type":330,"tag":393,"props":2675,"children":2676},{"style":400},[2677],{"type":336,"value":1463},{"type":330,"tag":393,"props":2679,"children":2680},{"style":449},[2681],{"type":336,"value":2682}," cancelTimeout",{"type":330,"tag":393,"props":2684,"children":2685},{"style":473},[2686],{"type":336,"value":476},{"type":330,"tag":393,"props":2688,"children":2689},{"style":406},[2690],{"type":336,"value":409},{"type":330,"tag":393,"props":2692,"children":2693},{"style":412},[2694],{"type":336,"value":1271},{"type":330,"tag":393,"props":2696,"children":2697},{"style":400},[2698],{"type":336,"value":529},{"type":330,"tag":393,"props":2700,"children":2701},{"style":412},[2702],{"type":336,"value":534},{"type":330,"tag":393,"props":2704,"children":2705},{"class":395,"line":1140},[2706,2710,2714,2718,2722,2727,2731],{"type":330,"tag":393,"props":2707,"children":2708},{"style":449},[2709],{"type":336,"value":1497},{"type":330,"tag":393,"props":2711,"children":2712},{"style":484},[2713],{"type":336,"value":487},{"type":330,"tag":393,"props":2715,"children":2716},{"style":406},[2717],{"type":336,"value":1506},{"type":330,"tag":393,"props":2719,"children":2720},{"style":412},[2721],{"type":336,"value":415},{"type":330,"tag":393,"props":2723,"children":2724},{"style":1618},[2725],{"type":336,"value":2726},"\"1s 后打印出 1\"",{"type":330,"tag":393,"props":2728,"children":2729},{"style":412},[2730],{"type":336,"value":575},{"type":330,"tag":393,"props":2732,"children":2733},{"style":424},[2734],{"type":336,"value":457},{"type":330,"tag":393,"props":2736,"children":2737},{"class":395,"line":1397},[2738,2742,2746,2750,2754],{"type":330,"tag":393,"props":2739,"children":2740},{"style":412},[2741],{"type":336,"value":1440},{"type":330,"tag":393,"props":2743,"children":2744},{"style":424},[2745],{"type":336,"value":427},{"type":330,"tag":393,"props":2747,"children":2748},{"style":1513},[2749],{"type":336,"value":1646},{"type":330,"tag":393,"props":2751,"children":2752},{"style":412},[2753],{"type":336,"value":575},{"type":330,"tag":393,"props":2755,"children":2756},{"style":424},[2757],{"type":336,"value":457},{"type":330,"tag":2759,"props":2760,"children":2761},"style",{},[2762],{"type":336,"value":2763},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":325,"searchDepth":537,"depth":537,"links":2765},[2766,2772,2773],{"id":333,"depth":440,"text":337,"children":2767},[2768,2769,2770,2771],{"id":341,"depth":460,"text":344},{"id":353,"depth":460,"text":356},{"id":373,"depth":460,"text":376},{"id":785,"depth":460,"text":788},{"id":1148,"depth":440,"text":1151},{"id":2427,"depth":440,"text":2430},"markdown","content:2.code:2.source:1.native-api:5.timer.md","content","2.code/2.source/1.native-api/5.timer.md","md",[2780,2781],{"_path":285,"title":284,"description":325},{"_path":291,"title":290,"description":2782},"JSON.stringify() 方法将一个 js 对象或值转换为 json 字符串，如果指定了一个 replacer 函数，则可以选择性地替换值，或者指定的 replacer 是数组，则可选择性地仅包含数组指定的属性。",1712123935514]