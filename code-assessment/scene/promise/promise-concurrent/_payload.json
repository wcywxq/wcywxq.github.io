[{"data":1,"prerenderedAt":3938},["Reactive",2],{"navigation":3,"/code-assessment/scene/promise/promise-concurrent":551,"/code-assessment/scene/promise/promise-concurrent-surround":3935},[4,272,301,519,527,536],{"title":5,"_path":6,"children":7,"icon":271},"算法","/algorithm",[8,31],{"title":9,"_path":10,"children":11},"解题方法","/algorithm/solution-methods",[12],{"title":13,"_path":14,"children":15},"排序","/algorithm/solution-methods/sort",[16,19,22,25,28],{"title":17,"_path":18},"选择排序","/algorithm/solution-methods/sort/selection-sort",{"title":20,"_path":21},"冒泡排序","/algorithm/solution-methods/sort/bubble-sort",{"title":23,"_path":24},"插入排序","/algorithm/solution-methods/sort/insertion-sort",{"title":26,"_path":27},"归并排序","/algorithm/solution-methods/sort/merge-sort",{"title":29,"_path":30},"桶排序","/algorithm/solution-methods/sort/bucket-sort",{"title":32,"_path":33,"children":34},"Leetcode 力扣","/algorithm/leetcode",[35,41,54],{"title":36,"_path":37,"children":38},"题单和标签","/algorithm/leetcode/question-lists-and-labels",[39],{"title":40,"_path":37},"刷题索引",{"title":42,"_path":43,"children":44},"剑指 offer","/algorithm/leetcode/sword-ofter",[45,48,51],{"title":46,"_path":47},"LCR.140 训练计划 II","/algorithm/leetcode/sword-ofter/lian-biao-zhong-dao-shu-di-kge-jie-dian-lcof",{"title":49,"_path":50},"LCR.169 招式拆解 II","/algorithm/leetcode/sword-ofter/di-yi-ge-zhi-chu-xian-yi-ci-de-zi-fu-lcof",{"title":52,"_path":53},"LCR.187 破冰游戏","/algorithm/leetcode/sword-ofter/yuan-quan-zhong-zui-hou-sheng-xia-de-shu-zi-lcof",{"title":55,"_path":56,"children":57},"主题单","/algorithm/leetcode/major",[58,61,64,67,70,73,76,79,82,85,88,91,94,97,100,103,106,109,112,115,118,121,124,127,130,133,136,139,142,145,148,151,154,157,160,163,166,169,172,175,178,181,184,187,190,193,196,199,202,205,208,211,214,217,220,223,226,229,232,235,238,241,244,247,250,253,256,259,262,265,268],{"title":59,"_path":60},"No.1 两数之和","/algorithm/leetcode/major/two-sum",{"title":62,"_path":63},"No.2 两数相加","/algorithm/leetcode/major/add-two-numbers",{"title":65,"_path":66},"No.3 无重复字符的最长子串","/algorithm/leetcode/major/longest-substring-without-repeating-characters",{"title":68,"_path":69},"No.4 寻找两个正序数组的中位数","/algorithm/leetcode/major/median-of-two-sorted-arrays",{"title":71,"_path":72},"No.5 最长回文子串","/algorithm/leetcode/major/longest-palindromic-substring",{"title":74,"_path":75},"No.7 整数反转","/algorithm/leetcode/major/reverse-integer",{"title":77,"_path":78},"No.9 回文数","/algorithm/leetcode/major/palindrome-number",{"title":80,"_path":81},"No.14 最长公共前缀","/algorithm/leetcode/major/longest-common-prefix",{"title":83,"_path":84},"No.15 三数之和","/algorithm/leetcode/major/3sum",{"title":86,"_path":87},"No.20 有效的括号","/algorithm/leetcode/major/valid-parentheses",{"title":89,"_path":90},"No.21 合并两个有序链表","/algorithm/leetcode/major/merge-two-sorted-lists",{"title":92,"_path":93},"No.22 括号生成","/algorithm/leetcode/major/generate-parentheses",{"title":95,"_path":96},"No.23 合并 K 个升序链表","/algorithm/leetcode/major/merge-k-sorted-lists",{"title":98,"_path":99},"No.24 两两交换链表中的节点","/algorithm/leetcode/major/swap-nodes-in-pairs",{"title":101,"_path":102},"No.25 K 个一组翻转链表","/algorithm/leetcode/major/reverse-nodes-in-k-group",{"title":104,"_path":105},"No.31 下一个排列","/algorithm/leetcode/major/next-permutation",{"title":107,"_path":108},"No.32 最长有效括号","/algorithm/leetcode/major/longest-valid-parentheses",{"title":110,"_path":111},"No.33 搜索旋转排序数组","/algorithm/leetcode/major/search-in-rotated-sorted-array",{"title":113,"_path":114},"No.34 在排序数组中查找元素的第一个和最后一个位置","/algorithm/leetcode/major/find-first-and-last-position-of-element-in-sorted-array",{"title":116,"_path":117},"No.39 组合求和","/algorithm/leetcode/major/combination-sum",{"title":119,"_path":120},"No.42 接雨水","/algorithm/leetcode/major/trapping-rain-water",{"title":122,"_path":123},"No.46 全排列","/algorithm/leetcode/major/permutations",{"title":125,"_path":126},"No.53 最大子序和","/algorithm/leetcode/major/maximum-subarray",{"title":128,"_path":129},"No.56 合并区间","/algorithm/leetcode/major/merge-intervals",{"title":131,"_path":132},"No.67 二进制求和","/algorithm/leetcode/major/add-binary",{"title":134,"_path":135},"No.69 x 的平方根","/algorithm/leetcode/major/sqrtx",{"title":137,"_path":138},"No.70 爬楼梯","/algorithm/leetcode/major/climbing-stairs",{"title":140,"_path":141},"No.88 合并两个有序数组","/algorithm/leetcode/major/merge-sorted-array",{"title":143,"_path":144},"No.92 反转链表 II","/algorithm/leetcode/major/reverse-linked-list-ii",{"title":146,"_path":147},"No.94 二叉树的中序遍历","/algorithm/leetcode/major/binary-tree-inorder-traversal",{"title":149,"_path":150},"No.101 对称二叉树","/algorithm/leetcode/major/symmetric-tree",{"title":152,"_path":153},"No.102 二叉树的层序遍历","/algorithm/leetcode/major/binary-tree-level-order-traversal",{"title":155,"_path":156},"No.104 二叉树的最大深度","/algorithm/leetcode/major/maximum-depth-of-binary-tree",{"title":158,"_path":159},"No.111 二叉树的最小深度","/algorithm/leetcode/major/minimum-depth-of-binary-tree",{"title":161,"_path":162},"No.112 路径总和","/algorithm/leetcode/major/path-sum",{"title":164,"_path":165},"No.121 买股票的最佳时机","/algorithm/leetcode/major/best-time-to-buy-and-sell-stock",{"title":167,"_path":168},"No.129 求根到叶子节点数字之和","/algorithm/leetcode/major/sum-root-to-leaf-numbers",{"title":170,"_path":171},"No.136 只出现一次的数字","/algorithm/leetcode/major/single-number",{"title":173,"_path":174},"No.141 环型链表","/algorithm/leetcode/major/linked-list-cycle",{"title":176,"_path":177},"No.146 LRU 缓存","/algorithm/leetcode/major/lru-cache",{"title":179,"_path":180},"No.151 反转字符串中的单词","/algorithm/leetcode/major/reverse-words-in-a-string",{"title":182,"_path":183},"No.153 寻找旋转排序数组中的最小值","/algorithm/leetcode/major/find-minimum-in-rotated-sorted-array",{"title":185,"_path":186},"No.155 最小栈","/algorithm/leetcode/major/min-stack",{"title":188,"_path":189},"No.160 相交链表","/algorithm/leetcode/major/intersection-of-two-linked-lists",{"title":191,"_path":192},"No.162 寻找峰值","/algorithm/leetcode/major/find-peak-element",{"title":194,"_path":195},"No.165 比较版本号","/algorithm/leetcode/major/compare-version-numbers",{"title":197,"_path":198},"No.169 多数元素","/algorithm/leetcode/major/majority-element",{"title":200,"_path":201},"No.200 岛屿数量","/algorithm/leetcode/major/number-of-islands",{"title":203,"_path":204},"No.206 反转链表","/algorithm/leetcode/major/reverse-linked-list",{"title":206,"_path":207},"No.209 长度最小的子数组","/algorithm/leetcode/major/minimum-size-subarray-sum",{"title":209,"_path":210},"No.215 数组中的第K个最大元素","/algorithm/leetcode/major/kth-largest-element-in-an-array",{"title":212,"_path":213},"No.226 翻转二叉树","/algorithm/leetcode/major/invert-binary-tree",{"title":215,"_path":216},"No.238 除自身以外数组的乘积","/algorithm/leetcode/major/product-of-array-except-self",{"title":218,"_path":219},"No.300 最长递增子序列","/algorithm/leetcode/major/longest-increasing-subsequence",{"title":221,"_path":222},"No.322 零钱兑换","/algorithm/leetcode/major/coin-change",{"title":224,"_path":225},"No.334 递增的三元子序列","/algorithm/leetcode/major/increasing-triplet-subsequence",{"title":227,"_path":228},"No.344 反转字符串","/algorithm/leetcode/major/reverse-string",{"title":230,"_path":231},"No.345 反转字符串中的元音字母","/algorithm/leetcode/major/reverse-vowels-of-a-string",{"title":233,"_path":234},"No.384 打乱数组","/algorithm/leetcode/major/shuffle-an-array",{"title":236,"_path":237},"No.415 字符串相加","/algorithm/leetcode/major/add-strings",{"title":239,"_path":240},"No.443 压缩字符串","/algorithm/leetcode/major/string-compression",{"title":242,"_path":243},"No.509 斐波那契数","/algorithm/leetcode/major/fibonacci-number",{"title":245,"_path":246},"No.605 种花问题","/algorithm/leetcode/major/can-place-flowers",{"title":248,"_path":249},"No.617 合并二叉树","/algorithm/leetcode/major/merge-two-binary-trees",{"title":251,"_path":252},"No.678 有效的括号字符串","/algorithm/leetcode/major/valid-parenthesis-string",{"title":254,"_path":255},"No.704 二分查找","/algorithm/leetcode/major/binary-search",{"title":257,"_path":258},"No.912 排序数组","/algorithm/leetcode/major/sort-an-array",{"title":260,"_path":261},"No.1071 字符串的最大公因子","/algorithm/leetcode/major/greatest-common-divisor-of-strings",{"title":263,"_path":264},"No.1143 最长公共子序列","/algorithm/leetcode/major/longest-common-subsequence",{"title":266,"_path":267},"No.1431 拥有最多糖果的孩子","/algorithm/leetcode/major/kids-with-the-greatest-number-of-candies",{"title":269,"_path":270},"No.1768 交替合并字符串","/algorithm/leetcode/major/merge-strings-alternately","i-carbon-calculation",{"title":273,"_path":274,"children":275,"icon":300},"八股文","/endorsement",[276,287],{"title":277,"_path":278,"children":279},"构建工具","/endorsement/build-tools",[280],{"title":281,"_path":282,"children":283},"Webpack","/endorsement/build-tools/webpack",[284],{"title":285,"_path":286},"构建流程","/endorsement/build-tools/webpack/build-process",{"title":288,"_path":289,"children":290},"Html","/endorsement/html",[291,294,297],{"title":292,"_path":293},"Canvas 和 Svg","/endorsement/html/canvas-svg",{"title":295,"_path":296},"DOCTYPE 文档类型","/endorsement/html/doc-type",{"title":298,"_path":299},"离线存储","/endorsement/html/offline-storage","i-heroicons-newspaper",{"title":302,"_path":303,"children":304,"icon":518},"代码考核","/code-assessment",[305,410,511],{"title":306,"_path":307,"children":308},"源码实现","/code-assessment/source",[309,343,359,387,394,401,404,407],{"title":310,"_path":311,"children":312},"原生 api","/code-assessment/source/native-api",[313,316,319,322,325,328,331,334,337,340],{"title":314,"_path":315},"polyfill","/code-assessment/source/native-api/polyfill",{"title":317,"_path":318},"ajax","/code-assessment/source/native-api/ajax",{"title":320,"_path":321},"call & apply & bind","/code-assessment/source/native-api/call-apply-bind",{"title":323,"_path":324},"new 操作符","/code-assessment/source/native-api/new",{"title":326,"_path":327},"instanceof 关键字","/code-assessment/source/native-api/instanceof",{"title":329,"_path":330},"定时器","/code-assessment/source/native-api/timer",{"title":332,"_path":333},"JSON.stringify","/code-assessment/source/native-api/json-stringify",{"title":335,"_path":336},"Iterator 迭代器","/code-assessment/source/native-api/iterator",{"title":338,"_path":339},"extends","/code-assessment/source/native-api/extends",{"title":341,"_path":342},"Promise","/code-assessment/source/native-api/promise",{"title":344,"_path":345,"children":346},"函数 Function","/code-assessment/source/function",[347,350,353,356],{"title":348,"_path":349},"函数防抖","/code-assessment/source/function/debounce",{"title":351,"_path":352},"函数节流","/code-assessment/source/function/throttle",{"title":354,"_path":355},"函数柯理化","/code-assessment/source/function/curry",{"title":357,"_path":358},"函数睡眠","/code-assessment/source/function/sleep",{"title":360,"_path":361,"children":362},"数组 Array","/code-assessment/source/array",[363,366,369,372,375,378,381,384],{"title":364,"_path":365},"数组去重","/code-assessment/source/array/remove-duplicate",{"title":367,"_path":368},"数组扁平化","/code-assessment/source/array/flat",{"title":370,"_path":371},"原型方法","/code-assessment/source/array/prototype-method",{"title":373,"_path":374},"交集、差集、并集、补集","/code-assessment/source/array/intersect-minus-union-complement",{"title":376,"_path":377},"数组和树互转","/code-assessment/source/array/arrays-and-trees-swap-each-other",{"title":379,"_path":380},"类数组转换","/code-assessment/source/array/array-like-convert",{"title":382,"_path":383},"数组乱序","/code-assessment/source/array/array-out-of-order",{"title":385,"_path":386},"二维数组","/code-assessment/source/array/2d-array",{"title":388,"_path":389,"children":390},"字符串 String","/code-assessment/source/string",[391],{"title":392,"_path":393},"repeat()","/code-assessment/source/string/repeat",{"title":395,"_path":396,"children":397},"集合 Set","/code-assessment/source/set",[398],{"title":399,"_path":400},"遍历集合","/code-assessment/source/set/traverse",{"title":402,"_path":403},"获取通用类型","/code-assessment/source/get-generic-type",{"title":405,"_path":406},"判断朴素对象","/code-assessment/source/is-plain-object",{"title":408,"_path":409},"深浅拷贝","/code-assessment/source/shallow-and-deep-copy",{"title":411,"_path":412,"children":413},"业务场景","/code-assessment/scene",[414,444,454,457,460,463,466,469,472,475,478,481,484,487,490,493,496,499,502,505,508],{"title":341,"_path":415,"children":416},"/code-assessment/scene/promise",[417,420,423,426,429,432,435,438,441],{"title":418,"_path":419},"保证 url 打印顺序并支持 retry","/code-assessment/scene/promise/order-print-url-and-support-retry",{"title":421,"_path":422},"异步串行","/code-assessment/scene/promise/async-serial-port",{"title":424,"_path":425},"实现 Promise 并发","/code-assessment/scene/promise/promise-concurrent",{"title":427,"_path":428},"并发限制图片加载数量","/code-assessment/scene/promise/concurrent-limit-image-load-count",{"title":430,"_path":431},"实现并发调度器","/code-assessment/scene/promise/concurrent-scheduler",{"title":433,"_path":434},"实现 mergePromise 函数","/code-assessment/scene/promise/implement-merge-promise-function",{"title":436,"_path":437},"使用 addRemote 实现 add","/code-assessment/scene/promise/use-addremote-to-implement-add",{"title":439,"_path":440},"Promise 缓存","/code-assessment/scene/promise/promise-cache",{"title":442,"_path":443},"循环打印红-黄-绿","/code-assessment/scene/promise/cycle-printing-red-yellow-green",{"title":445,"_path":446,"children":447},"框架核心功能实现","/code-assessment/scene/framework-core-implement",[448,451],{"title":449,"_path":450},"event bus","/code-assessment/scene/framework-core-implement/event-bus",{"title":452,"_path":453},"极简 vue 实现","/code-assessment/scene/framework-core-implement/simple-vue",{"title":455,"_path":456},"原型链输出","/code-assessment/scene/prototype-chain-output",{"title":458,"_path":459},"阿拉伯数字和中文互转","/code-assessment/scene/arabic-numerals-and-chinese-converted",{"title":461,"_path":462},"计算对象占用字节数","/code-assessment/scene/calcuate-object-bytes",{"title":464,"_path":465},"倒计时","/code-assessment/scene/countdown",{"title":467,"_path":468},"日期格式化","/code-assessment/scene/date-format",{"title":470,"_path":471},"实现前端路由","/code-assessment/scene/frontend-route",{"title":473,"_path":474},"图片格式转换","/code-assessment/scene/image-format-conversion",{"title":476,"_path":477},"lodash.get","/code-assessment/scene/lodash-get",{"title":479,"_path":480},"记忆化请求函数 - 可缓存请求函数","/code-assessment/scene/memorize-request",{"title":482,"_path":483},"内容中出现频率最高的字符","/code-assessment/scene/most-frequent-characters-in-content",{"title":485,"_path":486},"对象是否循环引用","/code-assessment/scene/object-is-or-not-circular-reference",{"title":488,"_path":489},"解析 url 参数","/code-assessment/scene/parse-url-query",{"title":491,"_path":492},"随机数","/code-assessment/scene/random-number",{"title":494,"_path":495},"富文本内容转换","/code-assessment/scene/rich-text-content-conversion",{"title":497,"_path":498},"sku 算法实现","/code-assessment/scene/sku",{"title":500,"_path":501},"整数分割","/code-assessment/scene/split-number",{"title":503,"_path":504},"千分位分隔数字字符串","/code-assessment/scene/thousandth-separated-number-string",{"title":506,"_path":507},"长列表虚拟滚动","/code-assessment/scene/vitrual-scroll-list",{"title":509,"_path":510},"xhr hook 实现打印日志","/code-assessment/scene/xhr-hook-to-log",{"title":512,"_path":513,"children":514},"Ts 类型挑战","/code-assessment/type-challeges",[515],{"title":516,"_path":517},"No.10 元组转合集(联合类型)","/code-assessment/type-challeges/medium-tuple-to-union","i-heroicons-command-line",{"title":520,"_path":521,"children":522,"icon":526},"项目","/project",[523],{"title":524,"_path":525},"Vue 如何对 Store 进行单元测试","/project/unit-test-vue-store","i-heroicons-squares-plus",{"title":528,"_path":529,"children":530,"icon":535},"设计模式","/design-mode",[531,532],{"title":528,"_path":529},{"title":533,"_path":534},"设计思想与原则","/design-mode/thoughts-principles","i-carbon-paint-brush",{"title":537,"_path":538,"children":539,"icon":550},"后端语言","/backend-languages",[540],{"title":541,"_path":542,"children":543},"Python","/backend-languages/python",[544,547],{"title":545,"_path":546},"基础","/backend-languages/python/base",{"title":548,"_path":549},"函数","/backend-languages/python/function","i-heroicons-globe-alt",{"_path":425,"_dir":552,"_draft":553,"_partial":553,"_locale":554,"title":424,"description":554,"body":555,"_type":3930,"_id":3931,"_source":3932,"_file":3933,"_extension":3934},"promise",false,"",{"type":556,"children":557,"toc":3920},"root",[558,566,573,1556,1562,2620,2626,2656,2662,3376,3382,3914],{"type":559,"tag":560,"props":561,"children":563},"element","h2",{"id":562},"极简实现",[564],{"type":565,"value":562},"text",{"type":559,"tag":567,"props":568,"children":570},"h3",{"id":569},"借助-promiserace",[571],{"type":565,"value":572},"借助 Promise.race",{"type":559,"tag":574,"props":575,"children":579},"pre",{"className":576,"code":577,"language":578,"meta":554,"style":554},"language-js shiki shiki-themes vitesse-light vitesse-light vitesse-dark","// 模拟异步请求\nconst request = url => new Promise(resolve => {\n  setTimeout(() => {\n    resolve(`任务 ${url.padEnd(10, ' ')} 完成`)\n  }, 1000)\n})\n\n// 并发控制函数\nasync function asyncPool(tasks = [], max = 3, fn = () => Promise.resolve()) {\n  // 待执行任务数组\n  // 正在执行的任务数组\n  let pool = []\n  for (const item of tasks) {\n    // 生成异步任务\n    const task = fn(item)\n    // 添加到正在执行的任务数组\n    pool.push(task)\n    task.then(data => {\n      // 当任务执行完毕，将其从正在执行任务数组中移除\n      console.log(`${data}; 当前并发数: ${pool.length}`)\n      pool.splice(pool.indexOf(task), 1)\n    })\n\n    // 当并发池满了，就先去执行并发池中的任务，有任务执行完成后，再继续循环\n    if (pool.length === max) {\n      await Promise.race(pool)\n    }\n  }\n}\n\nconst tasks = new Array(10).fill('').map((task, i) => `url - ${i + 1}`)\nasyncPool(tasks, 3, request)\n","js",[580],{"type":559,"tag":581,"props":582,"children":583},"code",{"__ignoreMap":554},[584,596,659,681,774,792,801,811,820,914,923,932,955,997,1006,1041,1050,1081,1116,1125,1198,1255,1264,1272,1281,1323,1357,1366,1375,1384,1392,1519],{"type":559,"tag":585,"props":586,"children":589},"span",{"class":587,"line":588},"line",1,[590],{"type":559,"tag":585,"props":591,"children":593},{"style":592},"--shiki-light:#A0ADA0;--shiki-default:#A0ADA0;--shiki-dark:#758575DD",[594],{"type":565,"value":595},"// 模拟异步请求\n",{"type":559,"tag":585,"props":597,"children":599},{"class":587,"line":598},2,[600,606,612,618,624,629,634,640,645,650,654],{"type":559,"tag":585,"props":601,"children":603},{"style":602},"--shiki-light:#AB5959;--shiki-default:#AB5959;--shiki-dark:#CB7676",[604],{"type":565,"value":605},"const",{"type":559,"tag":585,"props":607,"children":609},{"style":608},"--shiki-light:#59873A;--shiki-default:#59873A;--shiki-dark:#80A665",[610],{"type":565,"value":611}," request",{"type":559,"tag":585,"props":613,"children":615},{"style":614},"--shiki-light:#999999;--shiki-default:#999999;--shiki-dark:#666666",[616],{"type":565,"value":617}," =",{"type":559,"tag":585,"props":619,"children":621},{"style":620},"--shiki-light:#B07D48;--shiki-default:#B07D48;--shiki-dark:#BD976A",[622],{"type":565,"value":623}," url",{"type":559,"tag":585,"props":625,"children":626},{"style":614},[627],{"type":565,"value":628}," =>",{"type":559,"tag":585,"props":630,"children":631},{"style":602},[632],{"type":565,"value":633}," new",{"type":559,"tag":585,"props":635,"children":637},{"style":636},"--shiki-light:#998418;--shiki-default:#998418;--shiki-dark:#B8A965",[638],{"type":565,"value":639}," Promise",{"type":559,"tag":585,"props":641,"children":642},{"style":614},[643],{"type":565,"value":644},"(",{"type":559,"tag":585,"props":646,"children":647},{"style":620},[648],{"type":565,"value":649},"resolve",{"type":559,"tag":585,"props":651,"children":652},{"style":614},[653],{"type":565,"value":628},{"type":559,"tag":585,"props":655,"children":656},{"style":614},[657],{"type":565,"value":658}," {\n",{"type":559,"tag":585,"props":660,"children":662},{"class":587,"line":661},3,[663,668,673,677],{"type":559,"tag":585,"props":664,"children":665},{"style":608},[666],{"type":565,"value":667},"  setTimeout",{"type":559,"tag":585,"props":669,"children":670},{"style":614},[671],{"type":565,"value":672},"(()",{"type":559,"tag":585,"props":674,"children":675},{"style":614},[676],{"type":565,"value":628},{"type":559,"tag":585,"props":678,"children":679},{"style":614},[680],{"type":565,"value":658},{"type":559,"tag":585,"props":682,"children":684},{"class":587,"line":683},4,[685,690,694,700,706,711,716,721,726,730,736,741,746,750,755,760,765,769],{"type":559,"tag":585,"props":686,"children":687},{"style":608},[688],{"type":565,"value":689},"    resolve",{"type":559,"tag":585,"props":691,"children":692},{"style":614},[693],{"type":565,"value":644},{"type":559,"tag":585,"props":695,"children":697},{"style":696},"--shiki-light:#B5695999;--shiki-default:#B5695999;--shiki-dark:#C98A7D99",[698],{"type":565,"value":699},"`",{"type":559,"tag":585,"props":701,"children":703},{"style":702},"--shiki-light:#B56959;--shiki-default:#B56959;--shiki-dark:#C98A7D",[704],{"type":565,"value":705},"任务 ",{"type":559,"tag":585,"props":707,"children":708},{"style":614},[709],{"type":565,"value":710},"${",{"type":559,"tag":585,"props":712,"children":713},{"style":702},[714],{"type":565,"value":715},"url",{"type":559,"tag":585,"props":717,"children":718},{"style":614},[719],{"type":565,"value":720},".",{"type":559,"tag":585,"props":722,"children":723},{"style":608},[724],{"type":565,"value":725},"padEnd",{"type":559,"tag":585,"props":727,"children":728},{"style":614},[729],{"type":565,"value":644},{"type":559,"tag":585,"props":731,"children":733},{"style":732},"--shiki-light:#2F798A;--shiki-default:#2F798A;--shiki-dark:#4C9A91",[734],{"type":565,"value":735},"10",{"type":559,"tag":585,"props":737,"children":738},{"style":614},[739],{"type":565,"value":740},",",{"type":559,"tag":585,"props":742,"children":743},{"style":696},[744],{"type":565,"value":745}," '",{"type":559,"tag":585,"props":747,"children":748},{"style":696},[749],{"type":565,"value":745},{"type":559,"tag":585,"props":751,"children":752},{"style":614},[753],{"type":565,"value":754},")",{"type":559,"tag":585,"props":756,"children":757},{"style":614},[758],{"type":565,"value":759},"}",{"type":559,"tag":585,"props":761,"children":762},{"style":702},[763],{"type":565,"value":764}," 完成",{"type":559,"tag":585,"props":766,"children":767},{"style":696},[768],{"type":565,"value":699},{"type":559,"tag":585,"props":770,"children":771},{"style":614},[772],{"type":565,"value":773},")\n",{"type":559,"tag":585,"props":775,"children":777},{"class":587,"line":776},5,[778,783,788],{"type":559,"tag":585,"props":779,"children":780},{"style":614},[781],{"type":565,"value":782},"  },",{"type":559,"tag":585,"props":784,"children":785},{"style":732},[786],{"type":565,"value":787}," 1000",{"type":559,"tag":585,"props":789,"children":790},{"style":614},[791],{"type":565,"value":773},{"type":559,"tag":585,"props":793,"children":795},{"class":587,"line":794},6,[796],{"type":559,"tag":585,"props":797,"children":798},{"style":614},[799],{"type":565,"value":800},"})\n",{"type":559,"tag":585,"props":802,"children":804},{"class":587,"line":803},7,[805],{"type":559,"tag":585,"props":806,"children":808},{"emptyLinePlaceholder":807},true,[809],{"type":565,"value":810},"\n",{"type":559,"tag":585,"props":812,"children":814},{"class":587,"line":813},8,[815],{"type":559,"tag":585,"props":816,"children":817},{"style":592},[818],{"type":565,"value":819},"// 并发控制函数\n",{"type":559,"tag":585,"props":821,"children":823},{"class":587,"line":822},9,[824,829,834,839,843,848,852,857,862,866,871,875,880,884,889,893,897,901,905,910],{"type":559,"tag":585,"props":825,"children":826},{"style":602},[827],{"type":565,"value":828},"async",{"type":559,"tag":585,"props":830,"children":831},{"style":602},[832],{"type":565,"value":833}," function",{"type":559,"tag":585,"props":835,"children":836},{"style":608},[837],{"type":565,"value":838}," asyncPool",{"type":559,"tag":585,"props":840,"children":841},{"style":614},[842],{"type":565,"value":644},{"type":559,"tag":585,"props":844,"children":845},{"style":620},[846],{"type":565,"value":847},"tasks",{"type":559,"tag":585,"props":849,"children":850},{"style":614},[851],{"type":565,"value":617},{"type":559,"tag":585,"props":853,"children":854},{"style":614},[855],{"type":565,"value":856}," [],",{"type":559,"tag":585,"props":858,"children":859},{"style":620},[860],{"type":565,"value":861}," max",{"type":559,"tag":585,"props":863,"children":864},{"style":614},[865],{"type":565,"value":617},{"type":559,"tag":585,"props":867,"children":868},{"style":732},[869],{"type":565,"value":870}," 3",{"type":559,"tag":585,"props":872,"children":873},{"style":614},[874],{"type":565,"value":740},{"type":559,"tag":585,"props":876,"children":877},{"style":608},[878],{"type":565,"value":879}," fn",{"type":559,"tag":585,"props":881,"children":882},{"style":614},[883],{"type":565,"value":617},{"type":559,"tag":585,"props":885,"children":886},{"style":614},[887],{"type":565,"value":888}," ()",{"type":559,"tag":585,"props":890,"children":891},{"style":614},[892],{"type":565,"value":628},{"type":559,"tag":585,"props":894,"children":895},{"style":636},[896],{"type":565,"value":639},{"type":559,"tag":585,"props":898,"children":899},{"style":614},[900],{"type":565,"value":720},{"type":559,"tag":585,"props":902,"children":903},{"style":608},[904],{"type":565,"value":649},{"type":559,"tag":585,"props":906,"children":907},{"style":614},[908],{"type":565,"value":909},"())",{"type":559,"tag":585,"props":911,"children":912},{"style":614},[913],{"type":565,"value":658},{"type":559,"tag":585,"props":915,"children":917},{"class":587,"line":916},10,[918],{"type":559,"tag":585,"props":919,"children":920},{"style":592},[921],{"type":565,"value":922},"  // 待执行任务数组\n",{"type":559,"tag":585,"props":924,"children":926},{"class":587,"line":925},11,[927],{"type":559,"tag":585,"props":928,"children":929},{"style":592},[930],{"type":565,"value":931},"  // 正在执行的任务数组\n",{"type":559,"tag":585,"props":933,"children":935},{"class":587,"line":934},12,[936,941,946,950],{"type":559,"tag":585,"props":937,"children":938},{"style":602},[939],{"type":565,"value":940},"  let",{"type":559,"tag":585,"props":942,"children":943},{"style":620},[944],{"type":565,"value":945}," pool",{"type":559,"tag":585,"props":947,"children":948},{"style":614},[949],{"type":565,"value":617},{"type":559,"tag":585,"props":951,"children":952},{"style":614},[953],{"type":565,"value":954}," []\n",{"type":559,"tag":585,"props":956,"children":958},{"class":587,"line":957},13,[959,965,970,974,979,984,989,993],{"type":559,"tag":585,"props":960,"children":962},{"style":961},"--shiki-light:#1E754F;--shiki-default:#1E754F;--shiki-dark:#4D9375",[963],{"type":565,"value":964},"  for",{"type":559,"tag":585,"props":966,"children":967},{"style":614},[968],{"type":565,"value":969}," (",{"type":559,"tag":585,"props":971,"children":972},{"style":602},[973],{"type":565,"value":605},{"type":559,"tag":585,"props":975,"children":976},{"style":620},[977],{"type":565,"value":978}," item",{"type":559,"tag":585,"props":980,"children":981},{"style":602},[982],{"type":565,"value":983}," of",{"type":559,"tag":585,"props":985,"children":986},{"style":620},[987],{"type":565,"value":988}," tasks",{"type":559,"tag":585,"props":990,"children":991},{"style":614},[992],{"type":565,"value":754},{"type":559,"tag":585,"props":994,"children":995},{"style":614},[996],{"type":565,"value":658},{"type":559,"tag":585,"props":998,"children":1000},{"class":587,"line":999},14,[1001],{"type":559,"tag":585,"props":1002,"children":1003},{"style":592},[1004],{"type":565,"value":1005},"    // 生成异步任务\n",{"type":559,"tag":585,"props":1007,"children":1009},{"class":587,"line":1008},15,[1010,1015,1020,1024,1028,1032,1037],{"type":559,"tag":585,"props":1011,"children":1012},{"style":602},[1013],{"type":565,"value":1014},"    const",{"type":559,"tag":585,"props":1016,"children":1017},{"style":620},[1018],{"type":565,"value":1019}," task",{"type":559,"tag":585,"props":1021,"children":1022},{"style":614},[1023],{"type":565,"value":617},{"type":559,"tag":585,"props":1025,"children":1026},{"style":608},[1027],{"type":565,"value":879},{"type":559,"tag":585,"props":1029,"children":1030},{"style":614},[1031],{"type":565,"value":644},{"type":559,"tag":585,"props":1033,"children":1034},{"style":620},[1035],{"type":565,"value":1036},"item",{"type":559,"tag":585,"props":1038,"children":1039},{"style":614},[1040],{"type":565,"value":773},{"type":559,"tag":585,"props":1042,"children":1044},{"class":587,"line":1043},16,[1045],{"type":559,"tag":585,"props":1046,"children":1047},{"style":592},[1048],{"type":565,"value":1049},"    // 添加到正在执行的任务数组\n",{"type":559,"tag":585,"props":1051,"children":1053},{"class":587,"line":1052},17,[1054,1059,1063,1068,1072,1077],{"type":559,"tag":585,"props":1055,"children":1056},{"style":620},[1057],{"type":565,"value":1058},"    pool",{"type":559,"tag":585,"props":1060,"children":1061},{"style":614},[1062],{"type":565,"value":720},{"type":559,"tag":585,"props":1064,"children":1065},{"style":608},[1066],{"type":565,"value":1067},"push",{"type":559,"tag":585,"props":1069,"children":1070},{"style":614},[1071],{"type":565,"value":644},{"type":559,"tag":585,"props":1073,"children":1074},{"style":620},[1075],{"type":565,"value":1076},"task",{"type":559,"tag":585,"props":1078,"children":1079},{"style":614},[1080],{"type":565,"value":773},{"type":559,"tag":585,"props":1082,"children":1084},{"class":587,"line":1083},18,[1085,1090,1094,1099,1103,1108,1112],{"type":559,"tag":585,"props":1086,"children":1087},{"style":620},[1088],{"type":565,"value":1089},"    task",{"type":559,"tag":585,"props":1091,"children":1092},{"style":614},[1093],{"type":565,"value":720},{"type":559,"tag":585,"props":1095,"children":1096},{"style":608},[1097],{"type":565,"value":1098},"then",{"type":559,"tag":585,"props":1100,"children":1101},{"style":614},[1102],{"type":565,"value":644},{"type":559,"tag":585,"props":1104,"children":1105},{"style":620},[1106],{"type":565,"value":1107},"data",{"type":559,"tag":585,"props":1109,"children":1110},{"style":614},[1111],{"type":565,"value":628},{"type":559,"tag":585,"props":1113,"children":1114},{"style":614},[1115],{"type":565,"value":658},{"type":559,"tag":585,"props":1117,"children":1119},{"class":587,"line":1118},19,[1120],{"type":559,"tag":585,"props":1121,"children":1122},{"style":592},[1123],{"type":565,"value":1124},"      // 当任务执行完毕，将其从正在执行任务数组中移除\n",{"type":559,"tag":585,"props":1126,"children":1128},{"class":587,"line":1127},20,[1129,1134,1138,1143,1147,1151,1155,1159,1163,1168,1172,1177,1181,1186,1190,1194],{"type":559,"tag":585,"props":1130,"children":1131},{"style":620},[1132],{"type":565,"value":1133},"      console",{"type":559,"tag":585,"props":1135,"children":1136},{"style":614},[1137],{"type":565,"value":720},{"type":559,"tag":585,"props":1139,"children":1140},{"style":608},[1141],{"type":565,"value":1142},"log",{"type":559,"tag":585,"props":1144,"children":1145},{"style":614},[1146],{"type":565,"value":644},{"type":559,"tag":585,"props":1148,"children":1149},{"style":696},[1150],{"type":565,"value":699},{"type":559,"tag":585,"props":1152,"children":1153},{"style":614},[1154],{"type":565,"value":710},{"type":559,"tag":585,"props":1156,"children":1157},{"style":702},[1158],{"type":565,"value":1107},{"type":559,"tag":585,"props":1160,"children":1161},{"style":614},[1162],{"type":565,"value":759},{"type":559,"tag":585,"props":1164,"children":1165},{"style":702},[1166],{"type":565,"value":1167},"; 当前并发数: ",{"type":559,"tag":585,"props":1169,"children":1170},{"style":614},[1171],{"type":565,"value":710},{"type":559,"tag":585,"props":1173,"children":1174},{"style":702},[1175],{"type":565,"value":1176},"pool",{"type":559,"tag":585,"props":1178,"children":1179},{"style":614},[1180],{"type":565,"value":720},{"type":559,"tag":585,"props":1182,"children":1183},{"style":636},[1184],{"type":565,"value":1185},"length",{"type":559,"tag":585,"props":1187,"children":1188},{"style":614},[1189],{"type":565,"value":759},{"type":559,"tag":585,"props":1191,"children":1192},{"style":696},[1193],{"type":565,"value":699},{"type":559,"tag":585,"props":1195,"children":1196},{"style":614},[1197],{"type":565,"value":773},{"type":559,"tag":585,"props":1199,"children":1201},{"class":587,"line":1200},21,[1202,1207,1211,1216,1220,1224,1228,1233,1237,1241,1246,1251],{"type":559,"tag":585,"props":1203,"children":1204},{"style":620},[1205],{"type":565,"value":1206},"      pool",{"type":559,"tag":585,"props":1208,"children":1209},{"style":614},[1210],{"type":565,"value":720},{"type":559,"tag":585,"props":1212,"children":1213},{"style":608},[1214],{"type":565,"value":1215},"splice",{"type":559,"tag":585,"props":1217,"children":1218},{"style":614},[1219],{"type":565,"value":644},{"type":559,"tag":585,"props":1221,"children":1222},{"style":620},[1223],{"type":565,"value":1176},{"type":559,"tag":585,"props":1225,"children":1226},{"style":614},[1227],{"type":565,"value":720},{"type":559,"tag":585,"props":1229,"children":1230},{"style":608},[1231],{"type":565,"value":1232},"indexOf",{"type":559,"tag":585,"props":1234,"children":1235},{"style":614},[1236],{"type":565,"value":644},{"type":559,"tag":585,"props":1238,"children":1239},{"style":620},[1240],{"type":565,"value":1076},{"type":559,"tag":585,"props":1242,"children":1243},{"style":614},[1244],{"type":565,"value":1245},"),",{"type":559,"tag":585,"props":1247,"children":1248},{"style":732},[1249],{"type":565,"value":1250}," 1",{"type":559,"tag":585,"props":1252,"children":1253},{"style":614},[1254],{"type":565,"value":773},{"type":559,"tag":585,"props":1256,"children":1258},{"class":587,"line":1257},22,[1259],{"type":559,"tag":585,"props":1260,"children":1261},{"style":614},[1262],{"type":565,"value":1263},"    })\n",{"type":559,"tag":585,"props":1265,"children":1267},{"class":587,"line":1266},23,[1268],{"type":559,"tag":585,"props":1269,"children":1270},{"emptyLinePlaceholder":807},[1271],{"type":565,"value":810},{"type":559,"tag":585,"props":1273,"children":1275},{"class":587,"line":1274},24,[1276],{"type":559,"tag":585,"props":1277,"children":1278},{"style":592},[1279],{"type":565,"value":1280},"    // 当并发池满了，就先去执行并发池中的任务，有任务执行完成后，再继续循环\n",{"type":559,"tag":585,"props":1282,"children":1284},{"class":587,"line":1283},25,[1285,1290,1294,1298,1302,1306,1311,1315,1319],{"type":559,"tag":585,"props":1286,"children":1287},{"style":961},[1288],{"type":565,"value":1289},"    if",{"type":559,"tag":585,"props":1291,"children":1292},{"style":614},[1293],{"type":565,"value":969},{"type":559,"tag":585,"props":1295,"children":1296},{"style":620},[1297],{"type":565,"value":1176},{"type":559,"tag":585,"props":1299,"children":1300},{"style":614},[1301],{"type":565,"value":720},{"type":559,"tag":585,"props":1303,"children":1304},{"style":636},[1305],{"type":565,"value":1185},{"type":559,"tag":585,"props":1307,"children":1308},{"style":602},[1309],{"type":565,"value":1310}," ===",{"type":559,"tag":585,"props":1312,"children":1313},{"style":620},[1314],{"type":565,"value":861},{"type":559,"tag":585,"props":1316,"children":1317},{"style":614},[1318],{"type":565,"value":754},{"type":559,"tag":585,"props":1320,"children":1321},{"style":614},[1322],{"type":565,"value":658},{"type":559,"tag":585,"props":1324,"children":1326},{"class":587,"line":1325},26,[1327,1332,1336,1340,1345,1349,1353],{"type":559,"tag":585,"props":1328,"children":1329},{"style":961},[1330],{"type":565,"value":1331},"      await",{"type":559,"tag":585,"props":1333,"children":1334},{"style":636},[1335],{"type":565,"value":639},{"type":559,"tag":585,"props":1337,"children":1338},{"style":614},[1339],{"type":565,"value":720},{"type":559,"tag":585,"props":1341,"children":1342},{"style":608},[1343],{"type":565,"value":1344},"race",{"type":559,"tag":585,"props":1346,"children":1347},{"style":614},[1348],{"type":565,"value":644},{"type":559,"tag":585,"props":1350,"children":1351},{"style":620},[1352],{"type":565,"value":1176},{"type":559,"tag":585,"props":1354,"children":1355},{"style":614},[1356],{"type":565,"value":773},{"type":559,"tag":585,"props":1358,"children":1360},{"class":587,"line":1359},27,[1361],{"type":559,"tag":585,"props":1362,"children":1363},{"style":614},[1364],{"type":565,"value":1365},"    }\n",{"type":559,"tag":585,"props":1367,"children":1369},{"class":587,"line":1368},28,[1370],{"type":559,"tag":585,"props":1371,"children":1372},{"style":614},[1373],{"type":565,"value":1374},"  }\n",{"type":559,"tag":585,"props":1376,"children":1378},{"class":587,"line":1377},29,[1379],{"type":559,"tag":585,"props":1380,"children":1381},{"style":614},[1382],{"type":565,"value":1383},"}\n",{"type":559,"tag":585,"props":1385,"children":1387},{"class":587,"line":1386},30,[1388],{"type":559,"tag":585,"props":1389,"children":1390},{"emptyLinePlaceholder":807},[1391],{"type":565,"value":810},{"type":559,"tag":585,"props":1393,"children":1395},{"class":587,"line":1394},31,[1396,1400,1404,1408,1412,1417,1421,1425,1430,1435,1439,1444,1448,1453,1458,1462,1466,1471,1475,1479,1484,1489,1493,1498,1503,1507,1511,1515],{"type":559,"tag":585,"props":1397,"children":1398},{"style":602},[1399],{"type":565,"value":605},{"type":559,"tag":585,"props":1401,"children":1402},{"style":620},[1403],{"type":565,"value":988},{"type":559,"tag":585,"props":1405,"children":1406},{"style":614},[1407],{"type":565,"value":617},{"type":559,"tag":585,"props":1409,"children":1410},{"style":602},[1411],{"type":565,"value":633},{"type":559,"tag":585,"props":1413,"children":1414},{"style":608},[1415],{"type":565,"value":1416}," Array",{"type":559,"tag":585,"props":1418,"children":1419},{"style":614},[1420],{"type":565,"value":644},{"type":559,"tag":585,"props":1422,"children":1423},{"style":732},[1424],{"type":565,"value":735},{"type":559,"tag":585,"props":1426,"children":1427},{"style":614},[1428],{"type":565,"value":1429},").",{"type":559,"tag":585,"props":1431,"children":1432},{"style":608},[1433],{"type":565,"value":1434},"fill",{"type":559,"tag":585,"props":1436,"children":1437},{"style":614},[1438],{"type":565,"value":644},{"type":559,"tag":585,"props":1440,"children":1441},{"style":696},[1442],{"type":565,"value":1443},"''",{"type":559,"tag":585,"props":1445,"children":1446},{"style":614},[1447],{"type":565,"value":1429},{"type":559,"tag":585,"props":1449,"children":1450},{"style":608},[1451],{"type":565,"value":1452},"map",{"type":559,"tag":585,"props":1454,"children":1455},{"style":614},[1456],{"type":565,"value":1457},"((",{"type":559,"tag":585,"props":1459,"children":1460},{"style":620},[1461],{"type":565,"value":1076},{"type":559,"tag":585,"props":1463,"children":1464},{"style":614},[1465],{"type":565,"value":740},{"type":559,"tag":585,"props":1467,"children":1468},{"style":620},[1469],{"type":565,"value":1470}," i",{"type":559,"tag":585,"props":1472,"children":1473},{"style":614},[1474],{"type":565,"value":754},{"type":559,"tag":585,"props":1476,"children":1477},{"style":614},[1478],{"type":565,"value":628},{"type":559,"tag":585,"props":1480,"children":1481},{"style":696},[1482],{"type":565,"value":1483}," `",{"type":559,"tag":585,"props":1485,"children":1486},{"style":702},[1487],{"type":565,"value":1488},"url - ",{"type":559,"tag":585,"props":1490,"children":1491},{"style":614},[1492],{"type":565,"value":710},{"type":559,"tag":585,"props":1494,"children":1495},{"style":702},[1496],{"type":565,"value":1497},"i ",{"type":559,"tag":585,"props":1499,"children":1500},{"style":602},[1501],{"type":565,"value":1502},"+",{"type":559,"tag":585,"props":1504,"children":1505},{"style":732},[1506],{"type":565,"value":1250},{"type":559,"tag":585,"props":1508,"children":1509},{"style":614},[1510],{"type":565,"value":759},{"type":559,"tag":585,"props":1512,"children":1513},{"style":696},[1514],{"type":565,"value":699},{"type":559,"tag":585,"props":1516,"children":1517},{"style":614},[1518],{"type":565,"value":773},{"type":559,"tag":585,"props":1520,"children":1522},{"class":587,"line":1521},32,[1523,1528,1532,1536,1540,1544,1548,1552],{"type":559,"tag":585,"props":1524,"children":1525},{"style":608},[1526],{"type":565,"value":1527},"asyncPool",{"type":559,"tag":585,"props":1529,"children":1530},{"style":614},[1531],{"type":565,"value":644},{"type":559,"tag":585,"props":1533,"children":1534},{"style":620},[1535],{"type":565,"value":847},{"type":559,"tag":585,"props":1537,"children":1538},{"style":614},[1539],{"type":565,"value":740},{"type":559,"tag":585,"props":1541,"children":1542},{"style":732},[1543],{"type":565,"value":870},{"type":559,"tag":585,"props":1545,"children":1546},{"style":614},[1547],{"type":565,"value":740},{"type":559,"tag":585,"props":1549,"children":1550},{"style":620},[1551],{"type":565,"value":611},{"type":559,"tag":585,"props":1553,"children":1554},{"style":614},[1555],{"type":565,"value":773},{"type":559,"tag":567,"props":1557,"children":1559},{"id":1558},"不借助-promiserace",[1560],{"type":565,"value":1561},"不借助 Promise.race",{"type":559,"tag":574,"props":1563,"children":1565},{"className":576,"code":1564,"language":578,"meta":554,"style":554},"\nfunction asyncPool(urls, max) {\n  return new Promise((resolve, reject) => {\n    if (urls.length === 0)\n      resolve([])\n    let index = 0 // 下一次异步任务的下标\n    let count = 0 // 请求完成的数量\n    const result = []\n    async function request() {\n      const i = index\n      const url = urls[index]\n      index++\n      try {\n        const resp = await fetch(url)\n        result[i] = resp\n      } catch(err) {\n        result[i] = err\n      } finally {\n        count++\n        // 判断请求是否完成\n        if (count === urls.length) {\n          resolve(result)\n        }\n        // 处理下标边界\n        if (index \u003C urls.length) {\n          request()\n        }\n      }\n    }\n\n    // 取数组长度和并发数量的最小值\n    for (let i = 0; i \u003C Math.min(urls.length, max); i++) {\n      request()\n    }\n  })\n}\n\n// 测试\nconst urls = []\n\nfor (let i = 0; i \u003C 100; i++) {\n  urls.push(`https://jsonplaceholder.typicode.com/albums/${i}`)\n}\n\nasyncPool(urls, 20).then(resp => {\n  console.log(resp)\n})\n",[1566],{"type":559,"tag":581,"props":1567,"children":1568},{"__ignoreMap":554},[1569,1576,1613,1658,1694,1707,1733,1758,1778,1803,1824,1859,1872,1884,1923,1954,1984,2012,2028,2040,2048,2089,2110,2118,2126,2166,2179,2186,2194,2201,2208,2216,2318,2331,2339,2348,2356,2364,2373,2393,2401,2467,2517,2525,2533,2583,2612],{"type":559,"tag":585,"props":1570,"children":1571},{"class":587,"line":588},[1572],{"type":559,"tag":585,"props":1573,"children":1574},{"emptyLinePlaceholder":807},[1575],{"type":565,"value":810},{"type":559,"tag":585,"props":1577,"children":1578},{"class":587,"line":598},[1579,1584,1588,1592,1597,1601,1605,1609],{"type":559,"tag":585,"props":1580,"children":1581},{"style":602},[1582],{"type":565,"value":1583},"function",{"type":559,"tag":585,"props":1585,"children":1586},{"style":608},[1587],{"type":565,"value":838},{"type":559,"tag":585,"props":1589,"children":1590},{"style":614},[1591],{"type":565,"value":644},{"type":559,"tag":585,"props":1593,"children":1594},{"style":620},[1595],{"type":565,"value":1596},"urls",{"type":559,"tag":585,"props":1598,"children":1599},{"style":614},[1600],{"type":565,"value":740},{"type":559,"tag":585,"props":1602,"children":1603},{"style":620},[1604],{"type":565,"value":861},{"type":559,"tag":585,"props":1606,"children":1607},{"style":614},[1608],{"type":565,"value":754},{"type":559,"tag":585,"props":1610,"children":1611},{"style":614},[1612],{"type":565,"value":658},{"type":559,"tag":585,"props":1614,"children":1615},{"class":587,"line":661},[1616,1621,1625,1629,1633,1637,1641,1646,1650,1654],{"type":559,"tag":585,"props":1617,"children":1618},{"style":961},[1619],{"type":565,"value":1620},"  return",{"type":559,"tag":585,"props":1622,"children":1623},{"style":602},[1624],{"type":565,"value":633},{"type":559,"tag":585,"props":1626,"children":1627},{"style":636},[1628],{"type":565,"value":639},{"type":559,"tag":585,"props":1630,"children":1631},{"style":614},[1632],{"type":565,"value":1457},{"type":559,"tag":585,"props":1634,"children":1635},{"style":620},[1636],{"type":565,"value":649},{"type":559,"tag":585,"props":1638,"children":1639},{"style":614},[1640],{"type":565,"value":740},{"type":559,"tag":585,"props":1642,"children":1643},{"style":620},[1644],{"type":565,"value":1645}," reject",{"type":559,"tag":585,"props":1647,"children":1648},{"style":614},[1649],{"type":565,"value":754},{"type":559,"tag":585,"props":1651,"children":1652},{"style":614},[1653],{"type":565,"value":628},{"type":559,"tag":585,"props":1655,"children":1656},{"style":614},[1657],{"type":565,"value":658},{"type":559,"tag":585,"props":1659,"children":1660},{"class":587,"line":683},[1661,1665,1669,1673,1677,1681,1685,1690],{"type":559,"tag":585,"props":1662,"children":1663},{"style":961},[1664],{"type":565,"value":1289},{"type":559,"tag":585,"props":1666,"children":1667},{"style":614},[1668],{"type":565,"value":969},{"type":559,"tag":585,"props":1670,"children":1671},{"style":620},[1672],{"type":565,"value":1596},{"type":559,"tag":585,"props":1674,"children":1675},{"style":614},[1676],{"type":565,"value":720},{"type":559,"tag":585,"props":1678,"children":1679},{"style":636},[1680],{"type":565,"value":1185},{"type":559,"tag":585,"props":1682,"children":1683},{"style":602},[1684],{"type":565,"value":1310},{"type":559,"tag":585,"props":1686,"children":1687},{"style":732},[1688],{"type":565,"value":1689}," 0",{"type":559,"tag":585,"props":1691,"children":1692},{"style":614},[1693],{"type":565,"value":773},{"type":559,"tag":585,"props":1695,"children":1696},{"class":587,"line":776},[1697,1702],{"type":559,"tag":585,"props":1698,"children":1699},{"style":608},[1700],{"type":565,"value":1701},"      resolve",{"type":559,"tag":585,"props":1703,"children":1704},{"style":614},[1705],{"type":565,"value":1706},"([])\n",{"type":559,"tag":585,"props":1708,"children":1709},{"class":587,"line":794},[1710,1715,1720,1724,1728],{"type":559,"tag":585,"props":1711,"children":1712},{"style":602},[1713],{"type":565,"value":1714},"    let",{"type":559,"tag":585,"props":1716,"children":1717},{"style":620},[1718],{"type":565,"value":1719}," index",{"type":559,"tag":585,"props":1721,"children":1722},{"style":614},[1723],{"type":565,"value":617},{"type":559,"tag":585,"props":1725,"children":1726},{"style":732},[1727],{"type":565,"value":1689},{"type":559,"tag":585,"props":1729,"children":1730},{"style":592},[1731],{"type":565,"value":1732}," // 下一次异步任务的下标\n",{"type":559,"tag":585,"props":1734,"children":1735},{"class":587,"line":803},[1736,1740,1745,1749,1753],{"type":559,"tag":585,"props":1737,"children":1738},{"style":602},[1739],{"type":565,"value":1714},{"type":559,"tag":585,"props":1741,"children":1742},{"style":620},[1743],{"type":565,"value":1744}," count",{"type":559,"tag":585,"props":1746,"children":1747},{"style":614},[1748],{"type":565,"value":617},{"type":559,"tag":585,"props":1750,"children":1751},{"style":732},[1752],{"type":565,"value":1689},{"type":559,"tag":585,"props":1754,"children":1755},{"style":592},[1756],{"type":565,"value":1757}," // 请求完成的数量\n",{"type":559,"tag":585,"props":1759,"children":1760},{"class":587,"line":813},[1761,1765,1770,1774],{"type":559,"tag":585,"props":1762,"children":1763},{"style":602},[1764],{"type":565,"value":1014},{"type":559,"tag":585,"props":1766,"children":1767},{"style":620},[1768],{"type":565,"value":1769}," result",{"type":559,"tag":585,"props":1771,"children":1772},{"style":614},[1773],{"type":565,"value":617},{"type":559,"tag":585,"props":1775,"children":1776},{"style":614},[1777],{"type":565,"value":954},{"type":559,"tag":585,"props":1779,"children":1780},{"class":587,"line":822},[1781,1786,1790,1794,1799],{"type":559,"tag":585,"props":1782,"children":1783},{"style":602},[1784],{"type":565,"value":1785},"    async",{"type":559,"tag":585,"props":1787,"children":1788},{"style":602},[1789],{"type":565,"value":833},{"type":559,"tag":585,"props":1791,"children":1792},{"style":608},[1793],{"type":565,"value":611},{"type":559,"tag":585,"props":1795,"children":1796},{"style":614},[1797],{"type":565,"value":1798},"()",{"type":559,"tag":585,"props":1800,"children":1801},{"style":614},[1802],{"type":565,"value":658},{"type":559,"tag":585,"props":1804,"children":1805},{"class":587,"line":916},[1806,1811,1815,1819],{"type":559,"tag":585,"props":1807,"children":1808},{"style":602},[1809],{"type":565,"value":1810},"      const",{"type":559,"tag":585,"props":1812,"children":1813},{"style":620},[1814],{"type":565,"value":1470},{"type":559,"tag":585,"props":1816,"children":1817},{"style":614},[1818],{"type":565,"value":617},{"type":559,"tag":585,"props":1820,"children":1821},{"style":620},[1822],{"type":565,"value":1823}," index\n",{"type":559,"tag":585,"props":1825,"children":1826},{"class":587,"line":925},[1827,1831,1835,1839,1844,1849,1854],{"type":559,"tag":585,"props":1828,"children":1829},{"style":602},[1830],{"type":565,"value":1810},{"type":559,"tag":585,"props":1832,"children":1833},{"style":620},[1834],{"type":565,"value":623},{"type":559,"tag":585,"props":1836,"children":1837},{"style":614},[1838],{"type":565,"value":617},{"type":559,"tag":585,"props":1840,"children":1841},{"style":620},[1842],{"type":565,"value":1843}," urls",{"type":559,"tag":585,"props":1845,"children":1846},{"style":614},[1847],{"type":565,"value":1848},"[",{"type":559,"tag":585,"props":1850,"children":1851},{"style":620},[1852],{"type":565,"value":1853},"index",{"type":559,"tag":585,"props":1855,"children":1856},{"style":614},[1857],{"type":565,"value":1858},"]\n",{"type":559,"tag":585,"props":1860,"children":1861},{"class":587,"line":934},[1862,1867],{"type":559,"tag":585,"props":1863,"children":1864},{"style":620},[1865],{"type":565,"value":1866},"      index",{"type":559,"tag":585,"props":1868,"children":1869},{"style":602},[1870],{"type":565,"value":1871},"++\n",{"type":559,"tag":585,"props":1873,"children":1874},{"class":587,"line":957},[1875,1880],{"type":559,"tag":585,"props":1876,"children":1877},{"style":961},[1878],{"type":565,"value":1879},"      try",{"type":559,"tag":585,"props":1881,"children":1882},{"style":614},[1883],{"type":565,"value":658},{"type":559,"tag":585,"props":1885,"children":1886},{"class":587,"line":999},[1887,1892,1897,1901,1906,1911,1915,1919],{"type":559,"tag":585,"props":1888,"children":1889},{"style":602},[1890],{"type":565,"value":1891},"        const",{"type":559,"tag":585,"props":1893,"children":1894},{"style":620},[1895],{"type":565,"value":1896}," resp",{"type":559,"tag":585,"props":1898,"children":1899},{"style":614},[1900],{"type":565,"value":617},{"type":559,"tag":585,"props":1902,"children":1903},{"style":961},[1904],{"type":565,"value":1905}," await",{"type":559,"tag":585,"props":1907,"children":1908},{"style":608},[1909],{"type":565,"value":1910}," fetch",{"type":559,"tag":585,"props":1912,"children":1913},{"style":614},[1914],{"type":565,"value":644},{"type":559,"tag":585,"props":1916,"children":1917},{"style":620},[1918],{"type":565,"value":715},{"type":559,"tag":585,"props":1920,"children":1921},{"style":614},[1922],{"type":565,"value":773},{"type":559,"tag":585,"props":1924,"children":1925},{"class":587,"line":1008},[1926,1931,1935,1940,1945,1949],{"type":559,"tag":585,"props":1927,"children":1928},{"style":620},[1929],{"type":565,"value":1930},"        result",{"type":559,"tag":585,"props":1932,"children":1933},{"style":614},[1934],{"type":565,"value":1848},{"type":559,"tag":585,"props":1936,"children":1937},{"style":620},[1938],{"type":565,"value":1939},"i",{"type":559,"tag":585,"props":1941,"children":1942},{"style":614},[1943],{"type":565,"value":1944},"]",{"type":559,"tag":585,"props":1946,"children":1947},{"style":614},[1948],{"type":565,"value":617},{"type":559,"tag":585,"props":1950,"children":1951},{"style":620},[1952],{"type":565,"value":1953}," resp\n",{"type":559,"tag":585,"props":1955,"children":1956},{"class":587,"line":1043},[1957,1962,1967,1971,1976,1980],{"type":559,"tag":585,"props":1958,"children":1959},{"style":614},[1960],{"type":565,"value":1961},"      }",{"type":559,"tag":585,"props":1963,"children":1964},{"style":961},[1965],{"type":565,"value":1966}," catch",{"type":559,"tag":585,"props":1968,"children":1969},{"style":614},[1970],{"type":565,"value":644},{"type":559,"tag":585,"props":1972,"children":1973},{"style":620},[1974],{"type":565,"value":1975},"err",{"type":559,"tag":585,"props":1977,"children":1978},{"style":614},[1979],{"type":565,"value":754},{"type":559,"tag":585,"props":1981,"children":1982},{"style":614},[1983],{"type":565,"value":658},{"type":559,"tag":585,"props":1985,"children":1986},{"class":587,"line":1052},[1987,1991,1995,1999,2003,2007],{"type":559,"tag":585,"props":1988,"children":1989},{"style":620},[1990],{"type":565,"value":1930},{"type":559,"tag":585,"props":1992,"children":1993},{"style":614},[1994],{"type":565,"value":1848},{"type":559,"tag":585,"props":1996,"children":1997},{"style":620},[1998],{"type":565,"value":1939},{"type":559,"tag":585,"props":2000,"children":2001},{"style":614},[2002],{"type":565,"value":1944},{"type":559,"tag":585,"props":2004,"children":2005},{"style":614},[2006],{"type":565,"value":617},{"type":559,"tag":585,"props":2008,"children":2009},{"style":620},[2010],{"type":565,"value":2011}," err\n",{"type":559,"tag":585,"props":2013,"children":2014},{"class":587,"line":1083},[2015,2019,2024],{"type":559,"tag":585,"props":2016,"children":2017},{"style":614},[2018],{"type":565,"value":1961},{"type":559,"tag":585,"props":2020,"children":2021},{"style":961},[2022],{"type":565,"value":2023}," finally",{"type":559,"tag":585,"props":2025,"children":2026},{"style":614},[2027],{"type":565,"value":658},{"type":559,"tag":585,"props":2029,"children":2030},{"class":587,"line":1118},[2031,2036],{"type":559,"tag":585,"props":2032,"children":2033},{"style":620},[2034],{"type":565,"value":2035},"        count",{"type":559,"tag":585,"props":2037,"children":2038},{"style":602},[2039],{"type":565,"value":1871},{"type":559,"tag":585,"props":2041,"children":2042},{"class":587,"line":1127},[2043],{"type":559,"tag":585,"props":2044,"children":2045},{"style":592},[2046],{"type":565,"value":2047},"        // 判断请求是否完成\n",{"type":559,"tag":585,"props":2049,"children":2050},{"class":587,"line":1200},[2051,2056,2060,2065,2069,2073,2077,2081,2085],{"type":559,"tag":585,"props":2052,"children":2053},{"style":961},[2054],{"type":565,"value":2055},"        if",{"type":559,"tag":585,"props":2057,"children":2058},{"style":614},[2059],{"type":565,"value":969},{"type":559,"tag":585,"props":2061,"children":2062},{"style":620},[2063],{"type":565,"value":2064},"count",{"type":559,"tag":585,"props":2066,"children":2067},{"style":602},[2068],{"type":565,"value":1310},{"type":559,"tag":585,"props":2070,"children":2071},{"style":620},[2072],{"type":565,"value":1843},{"type":559,"tag":585,"props":2074,"children":2075},{"style":614},[2076],{"type":565,"value":720},{"type":559,"tag":585,"props":2078,"children":2079},{"style":636},[2080],{"type":565,"value":1185},{"type":559,"tag":585,"props":2082,"children":2083},{"style":614},[2084],{"type":565,"value":754},{"type":559,"tag":585,"props":2086,"children":2087},{"style":614},[2088],{"type":565,"value":658},{"type":559,"tag":585,"props":2090,"children":2091},{"class":587,"line":1257},[2092,2097,2101,2106],{"type":559,"tag":585,"props":2093,"children":2094},{"style":608},[2095],{"type":565,"value":2096},"          resolve",{"type":559,"tag":585,"props":2098,"children":2099},{"style":614},[2100],{"type":565,"value":644},{"type":559,"tag":585,"props":2102,"children":2103},{"style":620},[2104],{"type":565,"value":2105},"result",{"type":559,"tag":585,"props":2107,"children":2108},{"style":614},[2109],{"type":565,"value":773},{"type":559,"tag":585,"props":2111,"children":2112},{"class":587,"line":1266},[2113],{"type":559,"tag":585,"props":2114,"children":2115},{"style":614},[2116],{"type":565,"value":2117},"        }\n",{"type":559,"tag":585,"props":2119,"children":2120},{"class":587,"line":1274},[2121],{"type":559,"tag":585,"props":2122,"children":2123},{"style":592},[2124],{"type":565,"value":2125},"        // 处理下标边界\n",{"type":559,"tag":585,"props":2127,"children":2128},{"class":587,"line":1283},[2129,2133,2137,2141,2146,2150,2154,2158,2162],{"type":559,"tag":585,"props":2130,"children":2131},{"style":961},[2132],{"type":565,"value":2055},{"type":559,"tag":585,"props":2134,"children":2135},{"style":614},[2136],{"type":565,"value":969},{"type":559,"tag":585,"props":2138,"children":2139},{"style":620},[2140],{"type":565,"value":1853},{"type":559,"tag":585,"props":2142,"children":2143},{"style":614},[2144],{"type":565,"value":2145}," \u003C",{"type":559,"tag":585,"props":2147,"children":2148},{"style":620},[2149],{"type":565,"value":1843},{"type":559,"tag":585,"props":2151,"children":2152},{"style":614},[2153],{"type":565,"value":720},{"type":559,"tag":585,"props":2155,"children":2156},{"style":636},[2157],{"type":565,"value":1185},{"type":559,"tag":585,"props":2159,"children":2160},{"style":614},[2161],{"type":565,"value":754},{"type":559,"tag":585,"props":2163,"children":2164},{"style":614},[2165],{"type":565,"value":658},{"type":559,"tag":585,"props":2167,"children":2168},{"class":587,"line":1325},[2169,2174],{"type":559,"tag":585,"props":2170,"children":2171},{"style":608},[2172],{"type":565,"value":2173},"          request",{"type":559,"tag":585,"props":2175,"children":2176},{"style":614},[2177],{"type":565,"value":2178},"()\n",{"type":559,"tag":585,"props":2180,"children":2181},{"class":587,"line":1359},[2182],{"type":559,"tag":585,"props":2183,"children":2184},{"style":614},[2185],{"type":565,"value":2117},{"type":559,"tag":585,"props":2187,"children":2188},{"class":587,"line":1368},[2189],{"type":559,"tag":585,"props":2190,"children":2191},{"style":614},[2192],{"type":565,"value":2193},"      }\n",{"type":559,"tag":585,"props":2195,"children":2196},{"class":587,"line":1377},[2197],{"type":559,"tag":585,"props":2198,"children":2199},{"style":614},[2200],{"type":565,"value":1365},{"type":559,"tag":585,"props":2202,"children":2203},{"class":587,"line":1386},[2204],{"type":559,"tag":585,"props":2205,"children":2206},{"emptyLinePlaceholder":807},[2207],{"type":565,"value":810},{"type":559,"tag":585,"props":2209,"children":2210},{"class":587,"line":1394},[2211],{"type":559,"tag":585,"props":2212,"children":2213},{"style":592},[2214],{"type":565,"value":2215},"    // 取数组长度和并发数量的最小值\n",{"type":559,"tag":585,"props":2217,"children":2218},{"class":587,"line":1521},[2219,2224,2228,2233,2237,2241,2245,2250,2254,2258,2263,2267,2272,2276,2280,2284,2288,2292,2296,2301,2305,2310,2314],{"type":559,"tag":585,"props":2220,"children":2221},{"style":961},[2222],{"type":565,"value":2223},"    for",{"type":559,"tag":585,"props":2225,"children":2226},{"style":614},[2227],{"type":565,"value":969},{"type":559,"tag":585,"props":2229,"children":2230},{"style":602},[2231],{"type":565,"value":2232},"let",{"type":559,"tag":585,"props":2234,"children":2235},{"style":620},[2236],{"type":565,"value":1470},{"type":559,"tag":585,"props":2238,"children":2239},{"style":614},[2240],{"type":565,"value":617},{"type":559,"tag":585,"props":2242,"children":2243},{"style":732},[2244],{"type":565,"value":1689},{"type":559,"tag":585,"props":2246,"children":2247},{"style":614},[2248],{"type":565,"value":2249},";",{"type":559,"tag":585,"props":2251,"children":2252},{"style":620},[2253],{"type":565,"value":1470},{"type":559,"tag":585,"props":2255,"children":2256},{"style":614},[2257],{"type":565,"value":2145},{"type":559,"tag":585,"props":2259,"children":2260},{"style":620},[2261],{"type":565,"value":2262}," Math",{"type":559,"tag":585,"props":2264,"children":2265},{"style":614},[2266],{"type":565,"value":720},{"type":559,"tag":585,"props":2268,"children":2269},{"style":608},[2270],{"type":565,"value":2271},"min",{"type":559,"tag":585,"props":2273,"children":2274},{"style":614},[2275],{"type":565,"value":644},{"type":559,"tag":585,"props":2277,"children":2278},{"style":620},[2279],{"type":565,"value":1596},{"type":559,"tag":585,"props":2281,"children":2282},{"style":614},[2283],{"type":565,"value":720},{"type":559,"tag":585,"props":2285,"children":2286},{"style":636},[2287],{"type":565,"value":1185},{"type":559,"tag":585,"props":2289,"children":2290},{"style":614},[2291],{"type":565,"value":740},{"type":559,"tag":585,"props":2293,"children":2294},{"style":620},[2295],{"type":565,"value":861},{"type":559,"tag":585,"props":2297,"children":2298},{"style":614},[2299],{"type":565,"value":2300},");",{"type":559,"tag":585,"props":2302,"children":2303},{"style":620},[2304],{"type":565,"value":1470},{"type":559,"tag":585,"props":2306,"children":2307},{"style":602},[2308],{"type":565,"value":2309},"++",{"type":559,"tag":585,"props":2311,"children":2312},{"style":614},[2313],{"type":565,"value":754},{"type":559,"tag":585,"props":2315,"children":2316},{"style":614},[2317],{"type":565,"value":658},{"type":559,"tag":585,"props":2319,"children":2321},{"class":587,"line":2320},33,[2322,2327],{"type":559,"tag":585,"props":2323,"children":2324},{"style":608},[2325],{"type":565,"value":2326},"      request",{"type":559,"tag":585,"props":2328,"children":2329},{"style":614},[2330],{"type":565,"value":2178},{"type":559,"tag":585,"props":2332,"children":2334},{"class":587,"line":2333},34,[2335],{"type":559,"tag":585,"props":2336,"children":2337},{"style":614},[2338],{"type":565,"value":1365},{"type":559,"tag":585,"props":2340,"children":2342},{"class":587,"line":2341},35,[2343],{"type":559,"tag":585,"props":2344,"children":2345},{"style":614},[2346],{"type":565,"value":2347},"  })\n",{"type":559,"tag":585,"props":2349,"children":2351},{"class":587,"line":2350},36,[2352],{"type":559,"tag":585,"props":2353,"children":2354},{"style":614},[2355],{"type":565,"value":1383},{"type":559,"tag":585,"props":2357,"children":2359},{"class":587,"line":2358},37,[2360],{"type":559,"tag":585,"props":2361,"children":2362},{"emptyLinePlaceholder":807},[2363],{"type":565,"value":810},{"type":559,"tag":585,"props":2365,"children":2367},{"class":587,"line":2366},38,[2368],{"type":559,"tag":585,"props":2369,"children":2370},{"style":592},[2371],{"type":565,"value":2372},"// 测试\n",{"type":559,"tag":585,"props":2374,"children":2376},{"class":587,"line":2375},39,[2377,2381,2385,2389],{"type":559,"tag":585,"props":2378,"children":2379},{"style":602},[2380],{"type":565,"value":605},{"type":559,"tag":585,"props":2382,"children":2383},{"style":620},[2384],{"type":565,"value":1843},{"type":559,"tag":585,"props":2386,"children":2387},{"style":614},[2388],{"type":565,"value":617},{"type":559,"tag":585,"props":2390,"children":2391},{"style":614},[2392],{"type":565,"value":954},{"type":559,"tag":585,"props":2394,"children":2396},{"class":587,"line":2395},40,[2397],{"type":559,"tag":585,"props":2398,"children":2399},{"emptyLinePlaceholder":807},[2400],{"type":565,"value":810},{"type":559,"tag":585,"props":2402,"children":2404},{"class":587,"line":2403},41,[2405,2410,2414,2418,2422,2426,2430,2434,2438,2442,2447,2451,2455,2459,2463],{"type":559,"tag":585,"props":2406,"children":2407},{"style":961},[2408],{"type":565,"value":2409},"for",{"type":559,"tag":585,"props":2411,"children":2412},{"style":614},[2413],{"type":565,"value":969},{"type":559,"tag":585,"props":2415,"children":2416},{"style":602},[2417],{"type":565,"value":2232},{"type":559,"tag":585,"props":2419,"children":2420},{"style":620},[2421],{"type":565,"value":1470},{"type":559,"tag":585,"props":2423,"children":2424},{"style":614},[2425],{"type":565,"value":617},{"type":559,"tag":585,"props":2427,"children":2428},{"style":732},[2429],{"type":565,"value":1689},{"type":559,"tag":585,"props":2431,"children":2432},{"style":614},[2433],{"type":565,"value":2249},{"type":559,"tag":585,"props":2435,"children":2436},{"style":620},[2437],{"type":565,"value":1470},{"type":559,"tag":585,"props":2439,"children":2440},{"style":614},[2441],{"type":565,"value":2145},{"type":559,"tag":585,"props":2443,"children":2444},{"style":732},[2445],{"type":565,"value":2446}," 100",{"type":559,"tag":585,"props":2448,"children":2449},{"style":614},[2450],{"type":565,"value":2249},{"type":559,"tag":585,"props":2452,"children":2453},{"style":620},[2454],{"type":565,"value":1470},{"type":559,"tag":585,"props":2456,"children":2457},{"style":602},[2458],{"type":565,"value":2309},{"type":559,"tag":585,"props":2460,"children":2461},{"style":614},[2462],{"type":565,"value":754},{"type":559,"tag":585,"props":2464,"children":2465},{"style":614},[2466],{"type":565,"value":658},{"type":559,"tag":585,"props":2468,"children":2470},{"class":587,"line":2469},42,[2471,2476,2480,2484,2488,2492,2497,2501,2505,2509,2513],{"type":559,"tag":585,"props":2472,"children":2473},{"style":620},[2474],{"type":565,"value":2475},"  urls",{"type":559,"tag":585,"props":2477,"children":2478},{"style":614},[2479],{"type":565,"value":720},{"type":559,"tag":585,"props":2481,"children":2482},{"style":608},[2483],{"type":565,"value":1067},{"type":559,"tag":585,"props":2485,"children":2486},{"style":614},[2487],{"type":565,"value":644},{"type":559,"tag":585,"props":2489,"children":2490},{"style":696},[2491],{"type":565,"value":699},{"type":559,"tag":585,"props":2493,"children":2494},{"style":702},[2495],{"type":565,"value":2496},"https://jsonplaceholder.typicode.com/albums/",{"type":559,"tag":585,"props":2498,"children":2499},{"style":614},[2500],{"type":565,"value":710},{"type":559,"tag":585,"props":2502,"children":2503},{"style":702},[2504],{"type":565,"value":1939},{"type":559,"tag":585,"props":2506,"children":2507},{"style":614},[2508],{"type":565,"value":759},{"type":559,"tag":585,"props":2510,"children":2511},{"style":696},[2512],{"type":565,"value":699},{"type":559,"tag":585,"props":2514,"children":2515},{"style":614},[2516],{"type":565,"value":773},{"type":559,"tag":585,"props":2518,"children":2520},{"class":587,"line":2519},43,[2521],{"type":559,"tag":585,"props":2522,"children":2523},{"style":614},[2524],{"type":565,"value":1383},{"type":559,"tag":585,"props":2526,"children":2528},{"class":587,"line":2527},44,[2529],{"type":559,"tag":585,"props":2530,"children":2531},{"emptyLinePlaceholder":807},[2532],{"type":565,"value":810},{"type":559,"tag":585,"props":2534,"children":2536},{"class":587,"line":2535},45,[2537,2541,2545,2549,2553,2558,2562,2566,2570,2575,2579],{"type":559,"tag":585,"props":2538,"children":2539},{"style":608},[2540],{"type":565,"value":1527},{"type":559,"tag":585,"props":2542,"children":2543},{"style":614},[2544],{"type":565,"value":644},{"type":559,"tag":585,"props":2546,"children":2547},{"style":620},[2548],{"type":565,"value":1596},{"type":559,"tag":585,"props":2550,"children":2551},{"style":614},[2552],{"type":565,"value":740},{"type":559,"tag":585,"props":2554,"children":2555},{"style":732},[2556],{"type":565,"value":2557}," 20",{"type":559,"tag":585,"props":2559,"children":2560},{"style":614},[2561],{"type":565,"value":1429},{"type":559,"tag":585,"props":2563,"children":2564},{"style":608},[2565],{"type":565,"value":1098},{"type":559,"tag":585,"props":2567,"children":2568},{"style":614},[2569],{"type":565,"value":644},{"type":559,"tag":585,"props":2571,"children":2572},{"style":620},[2573],{"type":565,"value":2574},"resp",{"type":559,"tag":585,"props":2576,"children":2577},{"style":614},[2578],{"type":565,"value":628},{"type":559,"tag":585,"props":2580,"children":2581},{"style":614},[2582],{"type":565,"value":658},{"type":559,"tag":585,"props":2584,"children":2586},{"class":587,"line":2585},46,[2587,2592,2596,2600,2604,2608],{"type":559,"tag":585,"props":2588,"children":2589},{"style":620},[2590],{"type":565,"value":2591},"  console",{"type":559,"tag":585,"props":2593,"children":2594},{"style":614},[2595],{"type":565,"value":720},{"type":559,"tag":585,"props":2597,"children":2598},{"style":608},[2599],{"type":565,"value":1142},{"type":559,"tag":585,"props":2601,"children":2602},{"style":614},[2603],{"type":565,"value":644},{"type":559,"tag":585,"props":2605,"children":2606},{"style":620},[2607],{"type":565,"value":2574},{"type":559,"tag":585,"props":2609,"children":2610},{"style":614},[2611],{"type":565,"value":773},{"type":559,"tag":585,"props":2613,"children":2615},{"class":587,"line":2614},47,[2616],{"type":559,"tag":585,"props":2617,"children":2618},{"style":614},[2619],{"type":565,"value":800},{"type":559,"tag":560,"props":2621,"children":2623},{"id":2622},"async-pool-源码实现",[2624],{"type":565,"value":2625},"async-pool 源码实现",{"type":559,"tag":2627,"props":2628,"children":2629},"ol",{},[2630,2636,2641,2646,2651],{"type":559,"tag":2631,"props":2632,"children":2633},"li",{},[2634],{"type":565,"value":2635},"先初始化 limit 个 promise 实例，将他们放到 executing 数组中",{"type":559,"tag":2631,"props":2637,"children":2638},{},[2639],{"type":565,"value":2640},"使用 Promise.race 等待这 limit 个 promise 实例的执行结果",{"type":559,"tag":2631,"props":2642,"children":2643},{},[2644],{"type":565,"value":2645},"一旦某一个 promise 的状态发生变更，就将其从 executing 中删除，然后再执行循环生成新的 promise，放入 executing 中",{"type":559,"tag":2631,"props":2647,"children":2648},{},[2649],{"type":565,"value":2650},"重复 2、3 两个步骤，直到所有的 promise 都被执行完",{"type":559,"tag":2631,"props":2652,"children":2653},{},[2654],{"type":565,"value":2655},"最后使用 Promise.all 返回所有 promise 实例的执行结果",{"type":559,"tag":567,"props":2657,"children":2659},{"id":2658},"es6-版本",[2660],{"type":565,"value":2661},"es6 版本",{"type":559,"tag":574,"props":2663,"children":2665},{"className":576,"code":2664,"language":578,"meta":554,"style":554},"function asyncPool(poolLimit, array, iteratorFn) {\n  let i = 0\n  const ret = []\n  const executing = []\n  const enqueue = function () {\n    if (i === array.length) return Promise.resolve()\n    const item = array[i++]\n    const p = Promise.resolve().then(() => iteratorFn(item, array))\n    ret.push(p)\n    let r = Promise.resolve()\n    if (poolLimit \u003C= array.length) {\n      const e = p.then(() => executing.splice(executing.indexOf(e), 1))\n      executing.push(e)\n      if (executing.length >= poolLimit) {\n        r = Promise.race(executing)\n      }\n    }\n    return r.then(() => enqueue())\n  }\n  return enqueue().then(() => Promise.all(ret))\n}\n",[2666],{"type":559,"tag":581,"props":2667,"children":2668},{"__ignoreMap":554},[2669,2715,2735,2756,2776,2804,2860,2895,2965,2994,3026,3066,3152,3180,3222,3258,3265,3272,3309,3316,3369],{"type":559,"tag":585,"props":2670,"children":2671},{"class":587,"line":588},[2672,2676,2680,2684,2689,2693,2698,2702,2707,2711],{"type":559,"tag":585,"props":2673,"children":2674},{"style":602},[2675],{"type":565,"value":1583},{"type":559,"tag":585,"props":2677,"children":2678},{"style":608},[2679],{"type":565,"value":838},{"type":559,"tag":585,"props":2681,"children":2682},{"style":614},[2683],{"type":565,"value":644},{"type":559,"tag":585,"props":2685,"children":2686},{"style":620},[2687],{"type":565,"value":2688},"poolLimit",{"type":559,"tag":585,"props":2690,"children":2691},{"style":614},[2692],{"type":565,"value":740},{"type":559,"tag":585,"props":2694,"children":2695},{"style":620},[2696],{"type":565,"value":2697}," array",{"type":559,"tag":585,"props":2699,"children":2700},{"style":614},[2701],{"type":565,"value":740},{"type":559,"tag":585,"props":2703,"children":2704},{"style":620},[2705],{"type":565,"value":2706}," iteratorFn",{"type":559,"tag":585,"props":2708,"children":2709},{"style":614},[2710],{"type":565,"value":754},{"type":559,"tag":585,"props":2712,"children":2713},{"style":614},[2714],{"type":565,"value":658},{"type":559,"tag":585,"props":2716,"children":2717},{"class":587,"line":598},[2718,2722,2726,2730],{"type":559,"tag":585,"props":2719,"children":2720},{"style":602},[2721],{"type":565,"value":940},{"type":559,"tag":585,"props":2723,"children":2724},{"style":620},[2725],{"type":565,"value":1470},{"type":559,"tag":585,"props":2727,"children":2728},{"style":614},[2729],{"type":565,"value":617},{"type":559,"tag":585,"props":2731,"children":2732},{"style":732},[2733],{"type":565,"value":2734}," 0\n",{"type":559,"tag":585,"props":2736,"children":2737},{"class":587,"line":661},[2738,2743,2748,2752],{"type":559,"tag":585,"props":2739,"children":2740},{"style":602},[2741],{"type":565,"value":2742},"  const",{"type":559,"tag":585,"props":2744,"children":2745},{"style":620},[2746],{"type":565,"value":2747}," ret",{"type":559,"tag":585,"props":2749,"children":2750},{"style":614},[2751],{"type":565,"value":617},{"type":559,"tag":585,"props":2753,"children":2754},{"style":614},[2755],{"type":565,"value":954},{"type":559,"tag":585,"props":2757,"children":2758},{"class":587,"line":683},[2759,2763,2768,2772],{"type":559,"tag":585,"props":2760,"children":2761},{"style":602},[2762],{"type":565,"value":2742},{"type":559,"tag":585,"props":2764,"children":2765},{"style":620},[2766],{"type":565,"value":2767}," executing",{"type":559,"tag":585,"props":2769,"children":2770},{"style":614},[2771],{"type":565,"value":617},{"type":559,"tag":585,"props":2773,"children":2774},{"style":614},[2775],{"type":565,"value":954},{"type":559,"tag":585,"props":2777,"children":2778},{"class":587,"line":776},[2779,2783,2788,2792,2796,2800],{"type":559,"tag":585,"props":2780,"children":2781},{"style":602},[2782],{"type":565,"value":2742},{"type":559,"tag":585,"props":2784,"children":2785},{"style":608},[2786],{"type":565,"value":2787}," enqueue",{"type":559,"tag":585,"props":2789,"children":2790},{"style":614},[2791],{"type":565,"value":617},{"type":559,"tag":585,"props":2793,"children":2794},{"style":602},[2795],{"type":565,"value":833},{"type":559,"tag":585,"props":2797,"children":2798},{"style":614},[2799],{"type":565,"value":888},{"type":559,"tag":585,"props":2801,"children":2802},{"style":614},[2803],{"type":565,"value":658},{"type":559,"tag":585,"props":2805,"children":2806},{"class":587,"line":794},[2807,2811,2815,2819,2823,2827,2831,2835,2839,2844,2848,2852,2856],{"type":559,"tag":585,"props":2808,"children":2809},{"style":961},[2810],{"type":565,"value":1289},{"type":559,"tag":585,"props":2812,"children":2813},{"style":614},[2814],{"type":565,"value":969},{"type":559,"tag":585,"props":2816,"children":2817},{"style":620},[2818],{"type":565,"value":1939},{"type":559,"tag":585,"props":2820,"children":2821},{"style":602},[2822],{"type":565,"value":1310},{"type":559,"tag":585,"props":2824,"children":2825},{"style":620},[2826],{"type":565,"value":2697},{"type":559,"tag":585,"props":2828,"children":2829},{"style":614},[2830],{"type":565,"value":720},{"type":559,"tag":585,"props":2832,"children":2833},{"style":636},[2834],{"type":565,"value":1185},{"type":559,"tag":585,"props":2836,"children":2837},{"style":614},[2838],{"type":565,"value":754},{"type":559,"tag":585,"props":2840,"children":2841},{"style":961},[2842],{"type":565,"value":2843}," return",{"type":559,"tag":585,"props":2845,"children":2846},{"style":636},[2847],{"type":565,"value":639},{"type":559,"tag":585,"props":2849,"children":2850},{"style":614},[2851],{"type":565,"value":720},{"type":559,"tag":585,"props":2853,"children":2854},{"style":608},[2855],{"type":565,"value":649},{"type":559,"tag":585,"props":2857,"children":2858},{"style":614},[2859],{"type":565,"value":2178},{"type":559,"tag":585,"props":2861,"children":2862},{"class":587,"line":803},[2863,2867,2871,2875,2879,2883,2887,2891],{"type":559,"tag":585,"props":2864,"children":2865},{"style":602},[2866],{"type":565,"value":1014},{"type":559,"tag":585,"props":2868,"children":2869},{"style":620},[2870],{"type":565,"value":978},{"type":559,"tag":585,"props":2872,"children":2873},{"style":614},[2874],{"type":565,"value":617},{"type":559,"tag":585,"props":2876,"children":2877},{"style":620},[2878],{"type":565,"value":2697},{"type":559,"tag":585,"props":2880,"children":2881},{"style":614},[2882],{"type":565,"value":1848},{"type":559,"tag":585,"props":2884,"children":2885},{"style":620},[2886],{"type":565,"value":1939},{"type":559,"tag":585,"props":2888,"children":2889},{"style":602},[2890],{"type":565,"value":2309},{"type":559,"tag":585,"props":2892,"children":2893},{"style":614},[2894],{"type":565,"value":1858},{"type":559,"tag":585,"props":2896,"children":2897},{"class":587,"line":813},[2898,2902,2907,2911,2915,2919,2923,2928,2932,2936,2940,2944,2948,2952,2956,2960],{"type":559,"tag":585,"props":2899,"children":2900},{"style":602},[2901],{"type":565,"value":1014},{"type":559,"tag":585,"props":2903,"children":2904},{"style":620},[2905],{"type":565,"value":2906}," p",{"type":559,"tag":585,"props":2908,"children":2909},{"style":614},[2910],{"type":565,"value":617},{"type":559,"tag":585,"props":2912,"children":2913},{"style":636},[2914],{"type":565,"value":639},{"type":559,"tag":585,"props":2916,"children":2917},{"style":614},[2918],{"type":565,"value":720},{"type":559,"tag":585,"props":2920,"children":2921},{"style":608},[2922],{"type":565,"value":649},{"type":559,"tag":585,"props":2924,"children":2925},{"style":614},[2926],{"type":565,"value":2927},"().",{"type":559,"tag":585,"props":2929,"children":2930},{"style":608},[2931],{"type":565,"value":1098},{"type":559,"tag":585,"props":2933,"children":2934},{"style":614},[2935],{"type":565,"value":672},{"type":559,"tag":585,"props":2937,"children":2938},{"style":614},[2939],{"type":565,"value":628},{"type":559,"tag":585,"props":2941,"children":2942},{"style":608},[2943],{"type":565,"value":2706},{"type":559,"tag":585,"props":2945,"children":2946},{"style":614},[2947],{"type":565,"value":644},{"type":559,"tag":585,"props":2949,"children":2950},{"style":620},[2951],{"type":565,"value":1036},{"type":559,"tag":585,"props":2953,"children":2954},{"style":614},[2955],{"type":565,"value":740},{"type":559,"tag":585,"props":2957,"children":2958},{"style":620},[2959],{"type":565,"value":2697},{"type":559,"tag":585,"props":2961,"children":2962},{"style":614},[2963],{"type":565,"value":2964},"))\n",{"type":559,"tag":585,"props":2966,"children":2967},{"class":587,"line":822},[2968,2973,2977,2981,2985,2990],{"type":559,"tag":585,"props":2969,"children":2970},{"style":620},[2971],{"type":565,"value":2972},"    ret",{"type":559,"tag":585,"props":2974,"children":2975},{"style":614},[2976],{"type":565,"value":720},{"type":559,"tag":585,"props":2978,"children":2979},{"style":608},[2980],{"type":565,"value":1067},{"type":559,"tag":585,"props":2982,"children":2983},{"style":614},[2984],{"type":565,"value":644},{"type":559,"tag":585,"props":2986,"children":2987},{"style":620},[2988],{"type":565,"value":2989},"p",{"type":559,"tag":585,"props":2991,"children":2992},{"style":614},[2993],{"type":565,"value":773},{"type":559,"tag":585,"props":2995,"children":2996},{"class":587,"line":916},[2997,3001,3006,3010,3014,3018,3022],{"type":559,"tag":585,"props":2998,"children":2999},{"style":602},[3000],{"type":565,"value":1714},{"type":559,"tag":585,"props":3002,"children":3003},{"style":620},[3004],{"type":565,"value":3005}," r",{"type":559,"tag":585,"props":3007,"children":3008},{"style":614},[3009],{"type":565,"value":617},{"type":559,"tag":585,"props":3011,"children":3012},{"style":636},[3013],{"type":565,"value":639},{"type":559,"tag":585,"props":3015,"children":3016},{"style":614},[3017],{"type":565,"value":720},{"type":559,"tag":585,"props":3019,"children":3020},{"style":608},[3021],{"type":565,"value":649},{"type":559,"tag":585,"props":3023,"children":3024},{"style":614},[3025],{"type":565,"value":2178},{"type":559,"tag":585,"props":3027,"children":3028},{"class":587,"line":925},[3029,3033,3037,3041,3046,3050,3054,3058,3062],{"type":559,"tag":585,"props":3030,"children":3031},{"style":961},[3032],{"type":565,"value":1289},{"type":559,"tag":585,"props":3034,"children":3035},{"style":614},[3036],{"type":565,"value":969},{"type":559,"tag":585,"props":3038,"children":3039},{"style":620},[3040],{"type":565,"value":2688},{"type":559,"tag":585,"props":3042,"children":3043},{"style":614},[3044],{"type":565,"value":3045}," \u003C=",{"type":559,"tag":585,"props":3047,"children":3048},{"style":620},[3049],{"type":565,"value":2697},{"type":559,"tag":585,"props":3051,"children":3052},{"style":614},[3053],{"type":565,"value":720},{"type":559,"tag":585,"props":3055,"children":3056},{"style":636},[3057],{"type":565,"value":1185},{"type":559,"tag":585,"props":3059,"children":3060},{"style":614},[3061],{"type":565,"value":754},{"type":559,"tag":585,"props":3063,"children":3064},{"style":614},[3065],{"type":565,"value":658},{"type":559,"tag":585,"props":3067,"children":3068},{"class":587,"line":934},[3069,3073,3078,3082,3086,3090,3094,3098,3102,3106,3110,3114,3118,3123,3127,3131,3135,3140,3144,3148],{"type":559,"tag":585,"props":3070,"children":3071},{"style":602},[3072],{"type":565,"value":1810},{"type":559,"tag":585,"props":3074,"children":3075},{"style":620},[3076],{"type":565,"value":3077}," e",{"type":559,"tag":585,"props":3079,"children":3080},{"style":614},[3081],{"type":565,"value":617},{"type":559,"tag":585,"props":3083,"children":3084},{"style":620},[3085],{"type":565,"value":2906},{"type":559,"tag":585,"props":3087,"children":3088},{"style":614},[3089],{"type":565,"value":720},{"type":559,"tag":585,"props":3091,"children":3092},{"style":608},[3093],{"type":565,"value":1098},{"type":559,"tag":585,"props":3095,"children":3096},{"style":614},[3097],{"type":565,"value":672},{"type":559,"tag":585,"props":3099,"children":3100},{"style":614},[3101],{"type":565,"value":628},{"type":559,"tag":585,"props":3103,"children":3104},{"style":620},[3105],{"type":565,"value":2767},{"type":559,"tag":585,"props":3107,"children":3108},{"style":614},[3109],{"type":565,"value":720},{"type":559,"tag":585,"props":3111,"children":3112},{"style":608},[3113],{"type":565,"value":1215},{"type":559,"tag":585,"props":3115,"children":3116},{"style":614},[3117],{"type":565,"value":644},{"type":559,"tag":585,"props":3119,"children":3120},{"style":620},[3121],{"type":565,"value":3122},"executing",{"type":559,"tag":585,"props":3124,"children":3125},{"style":614},[3126],{"type":565,"value":720},{"type":559,"tag":585,"props":3128,"children":3129},{"style":608},[3130],{"type":565,"value":1232},{"type":559,"tag":585,"props":3132,"children":3133},{"style":614},[3134],{"type":565,"value":644},{"type":559,"tag":585,"props":3136,"children":3137},{"style":620},[3138],{"type":565,"value":3139},"e",{"type":559,"tag":585,"props":3141,"children":3142},{"style":614},[3143],{"type":565,"value":1245},{"type":559,"tag":585,"props":3145,"children":3146},{"style":732},[3147],{"type":565,"value":1250},{"type":559,"tag":585,"props":3149,"children":3150},{"style":614},[3151],{"type":565,"value":2964},{"type":559,"tag":585,"props":3153,"children":3154},{"class":587,"line":957},[3155,3160,3164,3168,3172,3176],{"type":559,"tag":585,"props":3156,"children":3157},{"style":620},[3158],{"type":565,"value":3159},"      executing",{"type":559,"tag":585,"props":3161,"children":3162},{"style":614},[3163],{"type":565,"value":720},{"type":559,"tag":585,"props":3165,"children":3166},{"style":608},[3167],{"type":565,"value":1067},{"type":559,"tag":585,"props":3169,"children":3170},{"style":614},[3171],{"type":565,"value":644},{"type":559,"tag":585,"props":3173,"children":3174},{"style":620},[3175],{"type":565,"value":3139},{"type":559,"tag":585,"props":3177,"children":3178},{"style":614},[3179],{"type":565,"value":773},{"type":559,"tag":585,"props":3181,"children":3182},{"class":587,"line":999},[3183,3188,3192,3196,3200,3204,3209,3214,3218],{"type":559,"tag":585,"props":3184,"children":3185},{"style":961},[3186],{"type":565,"value":3187},"      if",{"type":559,"tag":585,"props":3189,"children":3190},{"style":614},[3191],{"type":565,"value":969},{"type":559,"tag":585,"props":3193,"children":3194},{"style":620},[3195],{"type":565,"value":3122},{"type":559,"tag":585,"props":3197,"children":3198},{"style":614},[3199],{"type":565,"value":720},{"type":559,"tag":585,"props":3201,"children":3202},{"style":636},[3203],{"type":565,"value":1185},{"type":559,"tag":585,"props":3205,"children":3206},{"style":614},[3207],{"type":565,"value":3208}," >=",{"type":559,"tag":585,"props":3210,"children":3211},{"style":620},[3212],{"type":565,"value":3213}," poolLimit",{"type":559,"tag":585,"props":3215,"children":3216},{"style":614},[3217],{"type":565,"value":754},{"type":559,"tag":585,"props":3219,"children":3220},{"style":614},[3221],{"type":565,"value":658},{"type":559,"tag":585,"props":3223,"children":3224},{"class":587,"line":1008},[3225,3230,3234,3238,3242,3246,3250,3254],{"type":559,"tag":585,"props":3226,"children":3227},{"style":620},[3228],{"type":565,"value":3229},"        r",{"type":559,"tag":585,"props":3231,"children":3232},{"style":614},[3233],{"type":565,"value":617},{"type":559,"tag":585,"props":3235,"children":3236},{"style":636},[3237],{"type":565,"value":639},{"type":559,"tag":585,"props":3239,"children":3240},{"style":614},[3241],{"type":565,"value":720},{"type":559,"tag":585,"props":3243,"children":3244},{"style":608},[3245],{"type":565,"value":1344},{"type":559,"tag":585,"props":3247,"children":3248},{"style":614},[3249],{"type":565,"value":644},{"type":559,"tag":585,"props":3251,"children":3252},{"style":620},[3253],{"type":565,"value":3122},{"type":559,"tag":585,"props":3255,"children":3256},{"style":614},[3257],{"type":565,"value":773},{"type":559,"tag":585,"props":3259,"children":3260},{"class":587,"line":1043},[3261],{"type":559,"tag":585,"props":3262,"children":3263},{"style":614},[3264],{"type":565,"value":2193},{"type":559,"tag":585,"props":3266,"children":3267},{"class":587,"line":1052},[3268],{"type":559,"tag":585,"props":3269,"children":3270},{"style":614},[3271],{"type":565,"value":1365},{"type":559,"tag":585,"props":3273,"children":3274},{"class":587,"line":1083},[3275,3280,3284,3288,3292,3296,3300,3304],{"type":559,"tag":585,"props":3276,"children":3277},{"style":961},[3278],{"type":565,"value":3279},"    return",{"type":559,"tag":585,"props":3281,"children":3282},{"style":620},[3283],{"type":565,"value":3005},{"type":559,"tag":585,"props":3285,"children":3286},{"style":614},[3287],{"type":565,"value":720},{"type":559,"tag":585,"props":3289,"children":3290},{"style":608},[3291],{"type":565,"value":1098},{"type":559,"tag":585,"props":3293,"children":3294},{"style":614},[3295],{"type":565,"value":672},{"type":559,"tag":585,"props":3297,"children":3298},{"style":614},[3299],{"type":565,"value":628},{"type":559,"tag":585,"props":3301,"children":3302},{"style":608},[3303],{"type":565,"value":2787},{"type":559,"tag":585,"props":3305,"children":3306},{"style":614},[3307],{"type":565,"value":3308},"())\n",{"type":559,"tag":585,"props":3310,"children":3311},{"class":587,"line":1118},[3312],{"type":559,"tag":585,"props":3313,"children":3314},{"style":614},[3315],{"type":565,"value":1374},{"type":559,"tag":585,"props":3317,"children":3318},{"class":587,"line":1127},[3319,3323,3327,3331,3335,3339,3343,3347,3351,3356,3360,3365],{"type":559,"tag":585,"props":3320,"children":3321},{"style":961},[3322],{"type":565,"value":1620},{"type":559,"tag":585,"props":3324,"children":3325},{"style":608},[3326],{"type":565,"value":2787},{"type":559,"tag":585,"props":3328,"children":3329},{"style":614},[3330],{"type":565,"value":2927},{"type":559,"tag":585,"props":3332,"children":3333},{"style":608},[3334],{"type":565,"value":1098},{"type":559,"tag":585,"props":3336,"children":3337},{"style":614},[3338],{"type":565,"value":672},{"type":559,"tag":585,"props":3340,"children":3341},{"style":614},[3342],{"type":565,"value":628},{"type":559,"tag":585,"props":3344,"children":3345},{"style":636},[3346],{"type":565,"value":639},{"type":559,"tag":585,"props":3348,"children":3349},{"style":614},[3350],{"type":565,"value":720},{"type":559,"tag":585,"props":3352,"children":3353},{"style":608},[3354],{"type":565,"value":3355},"all",{"type":559,"tag":585,"props":3357,"children":3358},{"style":614},[3359],{"type":565,"value":644},{"type":559,"tag":585,"props":3361,"children":3362},{"style":620},[3363],{"type":565,"value":3364},"ret",{"type":559,"tag":585,"props":3366,"children":3367},{"style":614},[3368],{"type":565,"value":2964},{"type":559,"tag":585,"props":3370,"children":3371},{"class":587,"line":1200},[3372],{"type":559,"tag":585,"props":3373,"children":3374},{"style":614},[3375],{"type":565,"value":1383},{"type":559,"tag":567,"props":3377,"children":3379},{"id":3378},"es7-版本",[3380],{"type":565,"value":3381},"es7 版本",{"type":559,"tag":574,"props":3383,"children":3385},{"className":576,"code":3384,"language":578,"meta":554,"style":554},"async function asyncPool(poolLimit, array, iteratorFn) {\n  const ret = []\n  const executing = []\n  for (const item of array) {\n    const p = Promise.resolve().then(() => iteratorFn(item, array))\n    ret.push(p)\n    if (poolLimit \u003C= array.length) {\n      // then 回调中，当这个 promise 状态变为 fulfilled 后，将其从正在执行的 promise 列表 executing 中删除\n      const e = p.then(() => executing.splice(executing.indexOf(e), 1))\n      executing.push(e)\n      if (executing.length >= poolLimit) {\n        // 一旦正在执行的 promise 列表数量等于限制数，就使用 Promise.race 等待某一个 promise 状态发生变更\n        // 状态变更后，就会执行上面 then 的回调，将该 promise 从 executing 中删除\n        // 然后再进入到下一次 for 循环，生成新的 promise 进行补充\n        await Promise.race(executing)\n      }\n    }\n  }\n  return Promise.all(ret)\n}\n",[3386],{"type":559,"tag":581,"props":3387,"children":3388},{"__ignoreMap":554},[3389,3436,3455,3474,3509,3576,3603,3642,3650,3733,3760,3799,3807,3815,3823,3855,3862,3869,3876,3907],{"type":559,"tag":585,"props":3390,"children":3391},{"class":587,"line":588},[3392,3396,3400,3404,3408,3412,3416,3420,3424,3428,3432],{"type":559,"tag":585,"props":3393,"children":3394},{"style":602},[3395],{"type":565,"value":828},{"type":559,"tag":585,"props":3397,"children":3398},{"style":602},[3399],{"type":565,"value":833},{"type":559,"tag":585,"props":3401,"children":3402},{"style":608},[3403],{"type":565,"value":838},{"type":559,"tag":585,"props":3405,"children":3406},{"style":614},[3407],{"type":565,"value":644},{"type":559,"tag":585,"props":3409,"children":3410},{"style":620},[3411],{"type":565,"value":2688},{"type":559,"tag":585,"props":3413,"children":3414},{"style":614},[3415],{"type":565,"value":740},{"type":559,"tag":585,"props":3417,"children":3418},{"style":620},[3419],{"type":565,"value":2697},{"type":559,"tag":585,"props":3421,"children":3422},{"style":614},[3423],{"type":565,"value":740},{"type":559,"tag":585,"props":3425,"children":3426},{"style":620},[3427],{"type":565,"value":2706},{"type":559,"tag":585,"props":3429,"children":3430},{"style":614},[3431],{"type":565,"value":754},{"type":559,"tag":585,"props":3433,"children":3434},{"style":614},[3435],{"type":565,"value":658},{"type":559,"tag":585,"props":3437,"children":3438},{"class":587,"line":598},[3439,3443,3447,3451],{"type":559,"tag":585,"props":3440,"children":3441},{"style":602},[3442],{"type":565,"value":2742},{"type":559,"tag":585,"props":3444,"children":3445},{"style":620},[3446],{"type":565,"value":2747},{"type":559,"tag":585,"props":3448,"children":3449},{"style":614},[3450],{"type":565,"value":617},{"type":559,"tag":585,"props":3452,"children":3453},{"style":614},[3454],{"type":565,"value":954},{"type":559,"tag":585,"props":3456,"children":3457},{"class":587,"line":661},[3458,3462,3466,3470],{"type":559,"tag":585,"props":3459,"children":3460},{"style":602},[3461],{"type":565,"value":2742},{"type":559,"tag":585,"props":3463,"children":3464},{"style":620},[3465],{"type":565,"value":2767},{"type":559,"tag":585,"props":3467,"children":3468},{"style":614},[3469],{"type":565,"value":617},{"type":559,"tag":585,"props":3471,"children":3472},{"style":614},[3473],{"type":565,"value":954},{"type":559,"tag":585,"props":3475,"children":3476},{"class":587,"line":683},[3477,3481,3485,3489,3493,3497,3501,3505],{"type":559,"tag":585,"props":3478,"children":3479},{"style":961},[3480],{"type":565,"value":964},{"type":559,"tag":585,"props":3482,"children":3483},{"style":614},[3484],{"type":565,"value":969},{"type":559,"tag":585,"props":3486,"children":3487},{"style":602},[3488],{"type":565,"value":605},{"type":559,"tag":585,"props":3490,"children":3491},{"style":620},[3492],{"type":565,"value":978},{"type":559,"tag":585,"props":3494,"children":3495},{"style":602},[3496],{"type":565,"value":983},{"type":559,"tag":585,"props":3498,"children":3499},{"style":620},[3500],{"type":565,"value":2697},{"type":559,"tag":585,"props":3502,"children":3503},{"style":614},[3504],{"type":565,"value":754},{"type":559,"tag":585,"props":3506,"children":3507},{"style":614},[3508],{"type":565,"value":658},{"type":559,"tag":585,"props":3510,"children":3511},{"class":587,"line":776},[3512,3516,3520,3524,3528,3532,3536,3540,3544,3548,3552,3556,3560,3564,3568,3572],{"type":559,"tag":585,"props":3513,"children":3514},{"style":602},[3515],{"type":565,"value":1014},{"type":559,"tag":585,"props":3517,"children":3518},{"style":620},[3519],{"type":565,"value":2906},{"type":559,"tag":585,"props":3521,"children":3522},{"style":614},[3523],{"type":565,"value":617},{"type":559,"tag":585,"props":3525,"children":3526},{"style":636},[3527],{"type":565,"value":639},{"type":559,"tag":585,"props":3529,"children":3530},{"style":614},[3531],{"type":565,"value":720},{"type":559,"tag":585,"props":3533,"children":3534},{"style":608},[3535],{"type":565,"value":649},{"type":559,"tag":585,"props":3537,"children":3538},{"style":614},[3539],{"type":565,"value":2927},{"type":559,"tag":585,"props":3541,"children":3542},{"style":608},[3543],{"type":565,"value":1098},{"type":559,"tag":585,"props":3545,"children":3546},{"style":614},[3547],{"type":565,"value":672},{"type":559,"tag":585,"props":3549,"children":3550},{"style":614},[3551],{"type":565,"value":628},{"type":559,"tag":585,"props":3553,"children":3554},{"style":608},[3555],{"type":565,"value":2706},{"type":559,"tag":585,"props":3557,"children":3558},{"style":614},[3559],{"type":565,"value":644},{"type":559,"tag":585,"props":3561,"children":3562},{"style":620},[3563],{"type":565,"value":1036},{"type":559,"tag":585,"props":3565,"children":3566},{"style":614},[3567],{"type":565,"value":740},{"type":559,"tag":585,"props":3569,"children":3570},{"style":620},[3571],{"type":565,"value":2697},{"type":559,"tag":585,"props":3573,"children":3574},{"style":614},[3575],{"type":565,"value":2964},{"type":559,"tag":585,"props":3577,"children":3578},{"class":587,"line":794},[3579,3583,3587,3591,3595,3599],{"type":559,"tag":585,"props":3580,"children":3581},{"style":620},[3582],{"type":565,"value":2972},{"type":559,"tag":585,"props":3584,"children":3585},{"style":614},[3586],{"type":565,"value":720},{"type":559,"tag":585,"props":3588,"children":3589},{"style":608},[3590],{"type":565,"value":1067},{"type":559,"tag":585,"props":3592,"children":3593},{"style":614},[3594],{"type":565,"value":644},{"type":559,"tag":585,"props":3596,"children":3597},{"style":620},[3598],{"type":565,"value":2989},{"type":559,"tag":585,"props":3600,"children":3601},{"style":614},[3602],{"type":565,"value":773},{"type":559,"tag":585,"props":3604,"children":3605},{"class":587,"line":803},[3606,3610,3614,3618,3622,3626,3630,3634,3638],{"type":559,"tag":585,"props":3607,"children":3608},{"style":961},[3609],{"type":565,"value":1289},{"type":559,"tag":585,"props":3611,"children":3612},{"style":614},[3613],{"type":565,"value":969},{"type":559,"tag":585,"props":3615,"children":3616},{"style":620},[3617],{"type":565,"value":2688},{"type":559,"tag":585,"props":3619,"children":3620},{"style":614},[3621],{"type":565,"value":3045},{"type":559,"tag":585,"props":3623,"children":3624},{"style":620},[3625],{"type":565,"value":2697},{"type":559,"tag":585,"props":3627,"children":3628},{"style":614},[3629],{"type":565,"value":720},{"type":559,"tag":585,"props":3631,"children":3632},{"style":636},[3633],{"type":565,"value":1185},{"type":559,"tag":585,"props":3635,"children":3636},{"style":614},[3637],{"type":565,"value":754},{"type":559,"tag":585,"props":3639,"children":3640},{"style":614},[3641],{"type":565,"value":658},{"type":559,"tag":585,"props":3643,"children":3644},{"class":587,"line":813},[3645],{"type":559,"tag":585,"props":3646,"children":3647},{"style":592},[3648],{"type":565,"value":3649},"      // then 回调中，当这个 promise 状态变为 fulfilled 后，将其从正在执行的 promise 列表 executing 中删除\n",{"type":559,"tag":585,"props":3651,"children":3652},{"class":587,"line":822},[3653,3657,3661,3665,3669,3673,3677,3681,3685,3689,3693,3697,3701,3705,3709,3713,3717,3721,3725,3729],{"type":559,"tag":585,"props":3654,"children":3655},{"style":602},[3656],{"type":565,"value":1810},{"type":559,"tag":585,"props":3658,"children":3659},{"style":620},[3660],{"type":565,"value":3077},{"type":559,"tag":585,"props":3662,"children":3663},{"style":614},[3664],{"type":565,"value":617},{"type":559,"tag":585,"props":3666,"children":3667},{"style":620},[3668],{"type":565,"value":2906},{"type":559,"tag":585,"props":3670,"children":3671},{"style":614},[3672],{"type":565,"value":720},{"type":559,"tag":585,"props":3674,"children":3675},{"style":608},[3676],{"type":565,"value":1098},{"type":559,"tag":585,"props":3678,"children":3679},{"style":614},[3680],{"type":565,"value":672},{"type":559,"tag":585,"props":3682,"children":3683},{"style":614},[3684],{"type":565,"value":628},{"type":559,"tag":585,"props":3686,"children":3687},{"style":620},[3688],{"type":565,"value":2767},{"type":559,"tag":585,"props":3690,"children":3691},{"style":614},[3692],{"type":565,"value":720},{"type":559,"tag":585,"props":3694,"children":3695},{"style":608},[3696],{"type":565,"value":1215},{"type":559,"tag":585,"props":3698,"children":3699},{"style":614},[3700],{"type":565,"value":644},{"type":559,"tag":585,"props":3702,"children":3703},{"style":620},[3704],{"type":565,"value":3122},{"type":559,"tag":585,"props":3706,"children":3707},{"style":614},[3708],{"type":565,"value":720},{"type":559,"tag":585,"props":3710,"children":3711},{"style":608},[3712],{"type":565,"value":1232},{"type":559,"tag":585,"props":3714,"children":3715},{"style":614},[3716],{"type":565,"value":644},{"type":559,"tag":585,"props":3718,"children":3719},{"style":620},[3720],{"type":565,"value":3139},{"type":559,"tag":585,"props":3722,"children":3723},{"style":614},[3724],{"type":565,"value":1245},{"type":559,"tag":585,"props":3726,"children":3727},{"style":732},[3728],{"type":565,"value":1250},{"type":559,"tag":585,"props":3730,"children":3731},{"style":614},[3732],{"type":565,"value":2964},{"type":559,"tag":585,"props":3734,"children":3735},{"class":587,"line":916},[3736,3740,3744,3748,3752,3756],{"type":559,"tag":585,"props":3737,"children":3738},{"style":620},[3739],{"type":565,"value":3159},{"type":559,"tag":585,"props":3741,"children":3742},{"style":614},[3743],{"type":565,"value":720},{"type":559,"tag":585,"props":3745,"children":3746},{"style":608},[3747],{"type":565,"value":1067},{"type":559,"tag":585,"props":3749,"children":3750},{"style":614},[3751],{"type":565,"value":644},{"type":559,"tag":585,"props":3753,"children":3754},{"style":620},[3755],{"type":565,"value":3139},{"type":559,"tag":585,"props":3757,"children":3758},{"style":614},[3759],{"type":565,"value":773},{"type":559,"tag":585,"props":3761,"children":3762},{"class":587,"line":925},[3763,3767,3771,3775,3779,3783,3787,3791,3795],{"type":559,"tag":585,"props":3764,"children":3765},{"style":961},[3766],{"type":565,"value":3187},{"type":559,"tag":585,"props":3768,"children":3769},{"style":614},[3770],{"type":565,"value":969},{"type":559,"tag":585,"props":3772,"children":3773},{"style":620},[3774],{"type":565,"value":3122},{"type":559,"tag":585,"props":3776,"children":3777},{"style":614},[3778],{"type":565,"value":720},{"type":559,"tag":585,"props":3780,"children":3781},{"style":636},[3782],{"type":565,"value":1185},{"type":559,"tag":585,"props":3784,"children":3785},{"style":614},[3786],{"type":565,"value":3208},{"type":559,"tag":585,"props":3788,"children":3789},{"style":620},[3790],{"type":565,"value":3213},{"type":559,"tag":585,"props":3792,"children":3793},{"style":614},[3794],{"type":565,"value":754},{"type":559,"tag":585,"props":3796,"children":3797},{"style":614},[3798],{"type":565,"value":658},{"type":559,"tag":585,"props":3800,"children":3801},{"class":587,"line":934},[3802],{"type":559,"tag":585,"props":3803,"children":3804},{"style":592},[3805],{"type":565,"value":3806},"        // 一旦正在执行的 promise 列表数量等于限制数，就使用 Promise.race 等待某一个 promise 状态发生变更\n",{"type":559,"tag":585,"props":3808,"children":3809},{"class":587,"line":957},[3810],{"type":559,"tag":585,"props":3811,"children":3812},{"style":592},[3813],{"type":565,"value":3814},"        // 状态变更后，就会执行上面 then 的回调，将该 promise 从 executing 中删除\n",{"type":559,"tag":585,"props":3816,"children":3817},{"class":587,"line":999},[3818],{"type":559,"tag":585,"props":3819,"children":3820},{"style":592},[3821],{"type":565,"value":3822},"        // 然后再进入到下一次 for 循环，生成新的 promise 进行补充\n",{"type":559,"tag":585,"props":3824,"children":3825},{"class":587,"line":1008},[3826,3831,3835,3839,3843,3847,3851],{"type":559,"tag":585,"props":3827,"children":3828},{"style":961},[3829],{"type":565,"value":3830},"        await",{"type":559,"tag":585,"props":3832,"children":3833},{"style":636},[3834],{"type":565,"value":639},{"type":559,"tag":585,"props":3836,"children":3837},{"style":614},[3838],{"type":565,"value":720},{"type":559,"tag":585,"props":3840,"children":3841},{"style":608},[3842],{"type":565,"value":1344},{"type":559,"tag":585,"props":3844,"children":3845},{"style":614},[3846],{"type":565,"value":644},{"type":559,"tag":585,"props":3848,"children":3849},{"style":620},[3850],{"type":565,"value":3122},{"type":559,"tag":585,"props":3852,"children":3853},{"style":614},[3854],{"type":565,"value":773},{"type":559,"tag":585,"props":3856,"children":3857},{"class":587,"line":1043},[3858],{"type":559,"tag":585,"props":3859,"children":3860},{"style":614},[3861],{"type":565,"value":2193},{"type":559,"tag":585,"props":3863,"children":3864},{"class":587,"line":1052},[3865],{"type":559,"tag":585,"props":3866,"children":3867},{"style":614},[3868],{"type":565,"value":1365},{"type":559,"tag":585,"props":3870,"children":3871},{"class":587,"line":1083},[3872],{"type":559,"tag":585,"props":3873,"children":3874},{"style":614},[3875],{"type":565,"value":1374},{"type":559,"tag":585,"props":3877,"children":3878},{"class":587,"line":1118},[3879,3883,3887,3891,3895,3899,3903],{"type":559,"tag":585,"props":3880,"children":3881},{"style":961},[3882],{"type":565,"value":1620},{"type":559,"tag":585,"props":3884,"children":3885},{"style":636},[3886],{"type":565,"value":639},{"type":559,"tag":585,"props":3888,"children":3889},{"style":614},[3890],{"type":565,"value":720},{"type":559,"tag":585,"props":3892,"children":3893},{"style":608},[3894],{"type":565,"value":3355},{"type":559,"tag":585,"props":3896,"children":3897},{"style":614},[3898],{"type":565,"value":644},{"type":559,"tag":585,"props":3900,"children":3901},{"style":620},[3902],{"type":565,"value":3364},{"type":559,"tag":585,"props":3904,"children":3905},{"style":614},[3906],{"type":565,"value":773},{"type":559,"tag":585,"props":3908,"children":3909},{"class":587,"line":1127},[3910],{"type":559,"tag":585,"props":3911,"children":3912},{"style":614},[3913],{"type":565,"value":1383},{"type":559,"tag":3915,"props":3916,"children":3917},"style",{},[3918],{"type":565,"value":3919},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":554,"searchDepth":776,"depth":776,"links":3921},[3922,3926],{"id":562,"depth":598,"text":562,"children":3923},[3924,3925],{"id":569,"depth":661,"text":572},{"id":1558,"depth":661,"text":1561},{"id":2622,"depth":598,"text":2625,"children":3927},[3928,3929],{"id":2658,"depth":661,"text":2661},{"id":3378,"depth":661,"text":3381},"markdown","content:3.code-assessment:2.scene:1.promise:3.promise-concurrent.md","content","3.code-assessment/2.scene/1.promise/3.promise-concurrent.md","md",[3936,3937],{"_path":422,"title":421,"description":554},{"_path":431,"title":430,"description":554},1715094976592]